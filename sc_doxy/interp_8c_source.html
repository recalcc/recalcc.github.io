<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>My Project: interp.c Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">My Project
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">interp.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="interp_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*      SC      A Spreadsheet Calculator</span>
<a name="l00002"></a>00002 <span class="comment"> *              Expression interpreter and assorted support routines.</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> *              original by James Gosling, September 1982</span>
<a name="l00005"></a>00005 <span class="comment"> *              modified by Mark Weiser and Bruce Israel, </span>
<a name="l00006"></a>00006 <span class="comment"> *                      University of Maryland</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> *              More mods Robert Bond, 12/86</span>
<a name="l00009"></a>00009 <span class="comment"> *              More mods by Alan Silverstein, 3-4/88, see list of changes.</span>
<a name="l00010"></a>00010 <span class="comment"> *              $Revision: 7.16 $</span>
<a name="l00011"></a>00011 <span class="comment"> */</span>
<a name="l00012"></a>00012 
<a name="l00013"></a>00013 <span class="preprocessor">#include &lt;sys/types.h&gt;</span>
<a name="l00014"></a>00014 <span class="preprocessor">#ifdef aiws</span>
<a name="l00015"></a>00015 <span class="preprocessor"></span><span class="preprocessor">#undef _C_func                  </span><span class="comment">/* Fixes for undefined symbols on AIX */</span>
<a name="l00016"></a>00016 <span class="preprocessor">#endif</span>
<a name="l00017"></a>00017 <span class="preprocessor"></span>
<a name="l00018"></a>00018 <span class="preprocessor">#ifdef IEEE_MATH</span>
<a name="l00019"></a>00019 <span class="preprocessor"></span><span class="preprocessor">#include &lt;ieeefp.h&gt;</span>
<a name="l00020"></a>00020 <span class="preprocessor">#endif </span><span class="comment">/* IEEE_MATH */</span>
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 <span class="preprocessor">#include &lt;math.h&gt;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &lt;signal.h&gt;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;setjmp.h&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;ctype.h&gt;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;errno.h&gt;</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="preprocessor">#ifdef BSD42</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span><span class="preprocessor">#include &lt;strings.h&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;sys/time.h&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#ifndef strchr</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span><span class="preprocessor">#define strchr index</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span><span class="preprocessor">#include &lt;time.h&gt;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#ifndef SYSIII</span>
<a name="l00037"></a>00037 <span class="preprocessor"></span><span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#endif</span>
<a name="l00039"></a>00039 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &lt;curses.h&gt;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;<a class="code" href="sc_8h.html">sc.h</a>&quot;</span>
<a name="l00044"></a>00044 
<a name="l00045"></a>00045 <span class="preprocessor">#ifndef MSDOS</span>
<a name="l00046"></a>00046 <span class="preprocessor"></span><span class="preprocessor">#include &lt;unistd.h&gt;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#endif</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span>
<a name="l00049"></a>00049 <span class="preprocessor">#ifdef REGCOMP</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span><span class="preprocessor">#include &lt;regex.h&gt;</span>
<a name="l00051"></a>00051 <span class="preprocessor">#endif</span>
<a name="l00052"></a>00052 <span class="preprocessor"></span><span class="preprocessor">#ifdef RE_COMP</span>
<a name="l00053"></a>00053 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="keywordtype">char</span> *re_comp(<span class="keywordtype">char</span> *s);
<a name="l00054"></a>00054 <span class="keyword">extern</span> <span class="keywordtype">char</span> *re_exec(<span class="keywordtype">char</span> *s);
<a name="l00055"></a>00055 <span class="preprocessor">#endif</span>
<a name="l00056"></a>00056 <span class="preprocessor"></span><span class="preprocessor">#ifdef REGCMP</span>
<a name="l00057"></a>00057 <span class="preprocessor"></span><span class="keywordtype">char</span> *regcmp();
<a name="l00058"></a>00058 <span class="keywordtype">char</span> *regex();
<a name="l00059"></a>00059 <span class="preprocessor">#endif</span>
<a name="l00060"></a>00060 <span class="preprocessor"></span>
<a name="l00061"></a>00061 <span class="preprocessor">#ifdef SIGVOID</span>
<a name="l00062"></a>00062 <span class="preprocessor"></span>    <span class="keywordtype">void</span> <a class="code" href="interp_8c.html#ab5032b2f1718f2505efc7a82fbc6ae30">doquit</a>();
<a name="l00063"></a>00063 <span class="preprocessor">#else</span>
<a name="l00064"></a>00064 <span class="preprocessor"></span>    <span class="keywordtype">int</span> <a class="code" href="interp_8c.html#ab5032b2f1718f2505efc7a82fbc6ae30">doquit</a>();
<a name="l00065"></a>00065 <span class="preprocessor">#endif</span>
<a name="l00066"></a>00066 <span class="preprocessor"></span>
<a name="l00067"></a>00067 <span class="comment">/* Use this structure to save the last &#39;g&#39; command */</span>
<a name="l00068"></a><a class="code" href="screen_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">00068</a> <span class="keyword">struct </span><a class="code" href="structgo__save.html">go_save</a> <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>;
<a name="l00069"></a>00069 
<a name="l00070"></a>00070 <span class="comment">/* g_type can be: */</span>
<a name="l00071"></a><a class="code" href="interp_8c.html#a8a014a87901d1d2fff9c30f54d7ec8ac">00071</a> <span class="preprocessor">#define G_NONE 0        </span><span class="comment">/* Starting value - must be 0 */</span>
<a name="l00072"></a><a class="code" href="interp_8c.html#a9da532e1aa41d1d3bb8f88e96aa41ca5">00072</a> <span class="preprocessor">#define G_NUM 1</span>
<a name="l00073"></a><a class="code" href="interp_8c.html#a8c071082596007b19b854975272b73bd">00073</a> <span class="preprocessor"></span><span class="preprocessor">#define G_STR 2</span>
<a name="l00074"></a><a class="code" href="interp_8c.html#aa9aa1c757d3baad975fe85af45624d15">00074</a> <span class="preprocessor"></span><span class="preprocessor">#define G_NSTR 3</span>
<a name="l00075"></a><a class="code" href="interp_8c.html#adf4f0280a0c65f6879059eb789731eb8">00075</a> <span class="preprocessor"></span><span class="preprocessor">#define G_XSTR 4</span>
<a name="l00076"></a><a class="code" href="interp_8c.html#a9ed9f31a26d542df88331116511098ca">00076</a> <span class="preprocessor"></span><span class="preprocessor">#define G_CELL 5</span>
<a name="l00077"></a>00077 <span class="preprocessor"></span>
<a name="l00078"></a><a class="code" href="interp_8c.html#a03a498c85062a0adf4f130b81e4b32af">00078</a> <span class="preprocessor">#define ISVALID(r,c)    ((r)&gt;=0 &amp;&amp; (r)&lt;maxrows &amp;&amp; (c)&gt;=0 &amp;&amp; (c)&lt;maxcols)</span>
<a name="l00079"></a>00079 <span class="preprocessor"></span>
<a name="l00080"></a><a class="code" href="interp_8c.html#a32f86b7c541e3f352078b7a2bfa115cb">00080</a> jmp_buf <a class="code" href="interp_8c.html#a32f86b7c541e3f352078b7a2bfa115cb">fpe_save</a>;
<a name="l00081"></a><a class="code" href="interp_8c.html#a158d9d755a3b4e8262cc8e9ff1592b44">00081</a> <span class="keywordtype">int</span>     <a class="code" href="interp_8c.html#a158d9d755a3b4e8262cc8e9ff1592b44">exprerr</a>;        <span class="comment">/* Set by eval() and seval() if expression errors */</span>
<a name="l00082"></a><a class="code" href="sc_8h.html#a2dcf3a506b87ebbd54de2fe635ff36a2">00082</a> <span class="keywordtype">double</span>  <a class="code" href="interp_8c.html#a2dcf3a506b87ebbd54de2fe635ff36a2">prescale</a> = 1.0; <span class="comment">/* Prescale for constants in let() */</span>
<a name="l00083"></a><a class="code" href="sc_8h.html#a570a6d0484a98c1b413f297d6afc738e">00083</a> <span class="keywordtype">int</span>     <a class="code" href="interp_8c.html#a570a6d0484a98c1b413f297d6afc738e">extfunc</a>  = 0;   <span class="comment">/* Enable/disable external functions */</span>
<a name="l00084"></a><a class="code" href="sc_8h.html#a6825c9e12c2d5353c1741e71fbe29fc0">00084</a> <span class="keywordtype">int</span>     <a class="code" href="interp_8c.html#a6825c9e12c2d5353c1741e71fbe29fc0">loading</a> = 0;    <span class="comment">/* Set when readfile() is active */</span>
<a name="l00085"></a><a class="code" href="sc_8h.html#acb0cfad15ab1d25aabd8bf11950f787b">00085</a> <span class="keywordtype">int</span>     <a class="code" href="interp_8c.html#acb0cfad15ab1d25aabd8bf11950f787b">gmyrow</a>, <a class="code" href="interp_8c.html#a4f852dc743977df0268fcdbec84353a2">gmycol</a>; <span class="comment">/* globals used to implement @myrow, @mycol cmds */</span>
<a name="l00086"></a><a class="code" href="interp_8c.html#a4405c775bda3aee041f992bdf4dc7792">00086</a> <span class="keywordtype">int</span>     <a class="code" href="interp_8c.html#a4405c775bda3aee041f992bdf4dc7792">rowoffset</a> = 0, <a class="code" href="interp_8c.html#af99a356889e60bd714423c716a090b0c">coloffset</a> = 0;   <span class="comment">/* row &amp; col offsets for range</span>
<a name="l00087"></a>00087 <span class="comment">                                           functions */</span>
<a name="l00088"></a>00088 
<a name="l00089"></a>00089 <span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="interp_8c.html#ad8a8d3ef8400e8e62501d0f006eb5c1b">decimal</a>;    <span class="comment">/* Set if there was a decimal point in the number */</span>
<a name="l00090"></a>00090 
<a name="l00091"></a>00091 <span class="comment">/* a linked list of free [struct enodes]&#39;s, uses .e.o.left as the pointer */</span>
<a name="l00092"></a><a class="code" href="interp_8c.html#a286e9016810cd4415bb921296a15d769">00092</a> <span class="keyword">struct </span><a class="code" href="structenode.html">enode</a> *<a class="code" href="cmds_8c.html#a286e9016810cd4415bb921296a15d769">freeenodes</a> = NULL;
<a name="l00093"></a>00093 
<a name="l00094"></a>00094 <span class="keywordtype">double</span>  <a class="code" href="interp_8c.html#ada1acb175b41fcf664bb03ebbf054a4c">dolookup</a>(<span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> * val, <span class="keywordtype">int</span> minr, <span class="keywordtype">int</span> minc, <span class="keywordtype">int</span> maxr,
<a name="l00095"></a>00095         <span class="keywordtype">int</span> maxc, <span class="keywordtype">int</span> offr, <span class="keywordtype">int</span> offc);
<a name="l00096"></a>00096 <span class="keywordtype">double</span>  <a class="code" href="interp_8c.html#ac3d45fb773fc23770d0e7261c9f32bb7">fn1_eval</a>(<span class="keywordtype">double</span> (*fn)(), <span class="keywordtype">double</span> <a class="code" href="sc_8c.html#af09bff4320de23f28f0d261c3b124d6b">arg</a>);
<a name="l00097"></a>00097 <span class="keywordtype">double</span>  <a class="code" href="interp_8c.html#aeb980433772df4965a55ee593d200ea0">fn2_eval</a>(<span class="keywordtype">double</span> (*fn)(), <span class="keywordtype">double</span> arg1, <span class="keywordtype">double</span> arg2);
<a name="l00098"></a>00098 <span class="keywordtype">int</span>     <a class="code" href="interp_8c.html#a1d5cdbd505340af3043fd032c380c0de">RealEvalAll</a>();
<a name="l00099"></a>00099 <span class="keywordtype">int</span>     <a class="code" href="interp_8c.html#af3f31ae6f6be0cf9f9f97f616e32949a">constant</a>(<span class="keyword">register</span> <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>);
<a name="l00100"></a>00100 <span class="keywordtype">void</span>    <a class="code" href="interp_8c.html#a4583387a8c7d750c737ed8193d216f12">RealEvalOne</a>(<span class="keyword">register</span> <span class="keyword">struct</span> <a class="code" href="structent.html">ent</a> *p, <span class="keywordtype">int</span> i, <span class="keywordtype">int</span> j, <span class="keywordtype">int</span> *chgct);
<a name="l00101"></a>00101 <span class="keywordtype">void</span>    <a class="code" href="interp_8c.html#a55fffd29e22d23bbd91f6784c4ec27e0">copydbuf</a>(<span class="keywordtype">int</span> deltar, <span class="keywordtype">int</span> deltac);
<a name="l00102"></a>00102 <span class="keywordtype">void</span>    <a class="code" href="interp_8c.html#a5d8205f1f72eaf6b54fde4cb193f741c">decompile</a>(<span class="keyword">register</span> <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>, <span class="keywordtype">int</span> priority);
<a name="l00103"></a>00103 <span class="keywordtype">void</span>    <a class="code" href="interp_8c.html#a55eb98d039d128372f7339b0c024b7d8">index_arg</a>(<span class="keywordtype">char</span> *<a class="code" href="structenode.html#a993db5ac323e22de8928bead6adf0ecd">s</a>, <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>);
<a name="l00104"></a>00104 <span class="keywordtype">void</span>    <a class="code" href="interp_8c.html#a5f57fdc1c231ab547ac922e57c387a92">list_arg</a>(<span class="keywordtype">char</span> *<a class="code" href="structenode.html#a993db5ac323e22de8928bead6adf0ecd">s</a>, <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>);
<a name="l00105"></a>00105 <span class="keywordtype">void</span>    <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>(<span class="keywordtype">char</span> *<a class="code" href="structenode.html#a993db5ac323e22de8928bead6adf0ecd">s</a>, <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>);
<a name="l00106"></a>00106 <span class="keywordtype">void</span>    <a class="code" href="interp_8c.html#acf925506b3dc0f276cc55161b0cb82a7">range_arg</a>(<span class="keywordtype">char</span> *<a class="code" href="structenode.html#a993db5ac323e22de8928bead6adf0ecd">s</a>, <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>);
<a name="l00107"></a>00107 <span class="keywordtype">void</span>    <a class="code" href="interp_8c.html#a194e7a2d14c4cab05673a019d73f2403">three_arg</a>(<span class="keywordtype">char</span> *<a class="code" href="structenode.html#a993db5ac323e22de8928bead6adf0ecd">s</a>, <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>);
<a name="l00108"></a>00108 <span class="keywordtype">void</span>    <a class="code" href="interp_8c.html#adf9f3e1f811a4f9a338defe68d9ce232">two_arg</a>(<span class="keywordtype">char</span> *<a class="code" href="structenode.html#a993db5ac323e22de8928bead6adf0ecd">s</a>, <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>);
<a name="l00109"></a>00109 <span class="keywordtype">void</span>    <a class="code" href="interp_8c.html#a500313724a891a50e7fa127e69e48efc">two_arg_index</a>(<span class="keywordtype">char</span> *<a class="code" href="structenode.html#a993db5ac323e22de8928bead6adf0ecd">s</a>, <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>);
<a name="l00110"></a>00110 
<a name="l00111"></a>00111 <span class="keywordtype">double</span>  <a class="code" href="interp_8c.html#a1da8e5cf1e1a1d41c1a030f094c44a03">rint</a>(<span class="keywordtype">double</span> d);
<a name="l00112"></a><a class="code" href="interp_8c.html#a274198a92f8aa92468c7ed3a62c8e7eb">00112</a> <span class="keywordtype">int</span>     <a class="code" href="interp_8c.html#a274198a92f8aa92468c7ed3a62c8e7eb">cellerror</a> = <a class="code" href="sc_8h.html#a0a47a7c621688cb5e5dd3b35954cdad2">CELLOK</a>;     <span class="comment">/* is there an error in this cell */</span>
<a name="l00113"></a>00113 
<a name="l00114"></a>00114 <span class="preprocessor">#ifndef M_PI</span>
<a name="l00115"></a><a class="code" href="interp_8c.html#ae71449b1cc6e6250b91f539153a7a0d3">00115</a> <span class="preprocessor"></span><span class="preprocessor">#define M_PI (double)3.14159265358979323846</span>
<a name="l00116"></a>00116 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00117"></a><a class="code" href="interp_8c.html#a8fb4cc3e5aa102c0e7060aa55d462a7a">00117</a> <span class="preprocessor"></span><span class="preprocessor">#define dtr(x) ((x)*(M_PI/(double)180.0))</span>
<a name="l00118"></a><a class="code" href="interp_8c.html#a50eeee859bc3dae436a4fc61be76ca0e">00118</a> <span class="preprocessor"></span><span class="preprocessor">#define rtd(x) ((x)*(180.0/(double)M_PI))</span>
<a name="l00119"></a>00119 <span class="preprocessor"></span>
<a name="l00120"></a>00120 <span class="keywordtype">double</span>
<a name="l00121"></a><a class="code" href="interp_8c.html#a68a2c34d08bab76e7ce896e577986867">00121</a> <a class="code" href="interp_8c.html#a68a2c34d08bab76e7ce896e577986867">finfunc</a>(<span class="keywordtype">int</span> fun, <span class="keywordtype">double</span> v1, <span class="keywordtype">double</span> v2, <span class="keywordtype">double</span> v3)
<a name="l00122"></a>00122 {
<a name="l00123"></a>00123         <span class="keywordtype">double</span> answer,p;
<a name="l00124"></a>00124  
<a name="l00125"></a>00125         p = <a class="code" href="interp_8c.html#aeb980433772df4965a55ee593d200ea0">fn2_eval</a>(pow, 1 + v2, v3);
<a name="l00126"></a>00126  
<a name="l00127"></a>00127         <span class="keywordflow">switch</span> (fun) {
<a name="l00128"></a>00128             <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a46b90e99485a21a2150e424cc2a4afba">PV</a>:
<a name="l00129"></a>00129                 <span class="keywordflow">if</span> (v2)
<a name="l00130"></a>00130                     answer = v1 * (1 - 1/p) / v2;
<a name="l00131"></a>00131                 <span class="keywordflow">else</span> {
<a name="l00132"></a>00132                     cellerror = <a class="code" href="sc_8h.html#a21246343b17f2039f546f18e0e72cff6">CELLERROR</a>;
<a name="l00133"></a>00133                     answer = (double)0;
<a name="l00134"></a>00134                 }
<a name="l00135"></a>00135                 <span class="keywordflow">break</span>;
<a name="l00136"></a>00136             <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a2493b51e5d7913035483d04f68c57cec">FV</a>:
<a name="l00137"></a>00137                 <span class="keywordflow">if</span> (v2)
<a name="l00138"></a>00138                     answer = v1 * (p - 1) / v2;
<a name="l00139"></a>00139                 <span class="keywordflow">else</span> {
<a name="l00140"></a>00140                     cellerror = <a class="code" href="sc_8h.html#a21246343b17f2039f546f18e0e72cff6">CELLERROR</a>;
<a name="l00141"></a>00141                     answer = (double)0;
<a name="l00142"></a>00142                 }
<a name="l00143"></a>00143                 <span class="keywordflow">break</span>;
<a name="l00144"></a>00144             <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a18dbd798cee76f2edc7b877b4c0fb400">PMT</a>:
<a name="l00145"></a>00145                 <span class="comment">/* CHECK IF ~= 1 - 1/1 */</span>
<a name="l00146"></a>00146                 <span class="keywordflow">if</span> (p &amp;&amp; p != (<span class="keywordtype">double</span>)1)
<a name="l00147"></a>00147                     answer = v1 * v2 / (1 - 1/p);
<a name="l00148"></a>00148                 <span class="keywordflow">else</span> {
<a name="l00149"></a>00149                     cellerror = <a class="code" href="sc_8h.html#a21246343b17f2039f546f18e0e72cff6">CELLERROR</a>;
<a name="l00150"></a>00150                     answer = (double)0;
<a name="l00151"></a>00151                 }
<a name="l00152"></a>00152                 
<a name="l00153"></a>00153                 <span class="keywordflow">break</span>;
<a name="l00154"></a>00154             <span class="keywordflow">default</span>:
<a name="l00155"></a>00155                 <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot;Unknown function in finfunc&quot;</span>);
<a name="l00156"></a>00156                 cellerror = <a class="code" href="sc_8h.html#a21246343b17f2039f546f18e0e72cff6">CELLERROR</a>;
<a name="l00157"></a>00157                 <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>)0);
<a name="l00158"></a>00158         }
<a name="l00159"></a>00159         <span class="keywordflow">return</span> (answer);
<a name="l00160"></a>00160 }
<a name="l00161"></a>00161 
<a name="l00162"></a>00162 <span class="keywordtype">char</span> *
<a name="l00163"></a><a class="code" href="interp_8c.html#a2141ab079a1035de07c54ed25cc38855">00163</a> <a class="code" href="interp_8c.html#a2141ab079a1035de07c54ed25cc38855">dostindex</a>(<span class="keywordtype">int</span> minr, <span class="keywordtype">int</span> minc, <span class="keywordtype">int</span> maxr, <span class="keywordtype">int</span> maxc, <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *val)
<a name="l00164"></a>00164 {
<a name="l00165"></a>00165     <span class="keywordtype">int</span> <a class="code" href="structenode.html#a665ccff1d13c8ee142d2278af000dfc9">r</a>, c;
<a name="l00166"></a>00166     <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *p;
<a name="l00167"></a>00167     <span class="keywordtype">char</span> *pr;
<a name="l00168"></a>00168 
<a name="l00169"></a>00169     p = (<span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *)0;
<a name="l00170"></a>00170     <span class="keywordflow">if</span> (minr == maxr) {                 <span class="comment">/* look along the row */</span>
<a name="l00171"></a>00171         r = minr;
<a name="l00172"></a>00172         c = minc + (int) <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(val) - 1;
<a name="l00173"></a>00173     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (minc == maxc) {          <span class="comment">/* look down the column */</span>
<a name="l00174"></a>00174         r = minr + (int) <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(val) - 1;
<a name="l00175"></a>00175         c = minc;
<a name="l00176"></a>00176     } <span class="keywordflow">else</span> {
<a name="l00177"></a>00177         r = minr + (int) <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(val-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left) - 1;
<a name="l00178"></a>00178         c = minc + (int) <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(val-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right) - 1;
<a name="l00179"></a>00179     }
<a name="l00180"></a>00180     <span class="keywordflow">if</span> (c &lt;= maxc &amp;&amp; c &gt;=minc &amp;&amp; r &lt;= maxr &amp;&amp; r &gt;=minr)
<a name="l00181"></a>00181         p = *<a class="code" href="sc_8h.html#a2288f3ade588c7240beef3b7a301051b">ATBL</a>(<a class="code" href="sc_8c.html#ab1cc8ce06f419cceb40acdf03a6bb4fc">tbl</a>, r, c);
<a name="l00182"></a>00182 
<a name="l00183"></a>00183     <span class="keywordflow">if</span> (p &amp;&amp; p-&gt;<a class="code" href="structent.html#a5346704737f8bf536f566804d95d9a02">label</a>) {
<a name="l00184"></a>00184         pr = <a class="code" href="pxmalloc_8c.html#a7119be33744c04e41b75e9edc14a3a46">scxmalloc</a>((<span class="keywordtype">size_t</span>)(strlen(p-&gt;<a class="code" href="structent.html#a5346704737f8bf536f566804d95d9a02">label</a>)+1));
<a name="l00185"></a>00185         (void) strcpy(pr, p-&gt;<a class="code" href="structent.html#a5346704737f8bf536f566804d95d9a02">label</a>);
<a name="l00186"></a>00186         <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structent.html#ab08000c5e4f50af3a8f55684f634ca7e">cellerror</a>)
<a name="l00187"></a>00187             cellerror = <a class="code" href="sc_8h.html#aa6529750c8b88ff209c78679f50190fe">CELLINVALID</a>;
<a name="l00188"></a>00188         <span class="keywordflow">return</span> (pr);
<a name="l00189"></a>00189     } <span class="keywordflow">else</span>
<a name="l00190"></a>00190         <span class="keywordflow">return</span> ((<span class="keywordtype">char</span> *)0);
<a name="l00191"></a>00191 }
<a name="l00192"></a>00192 
<a name="l00193"></a>00193 <span class="keywordtype">double</span>
<a name="l00194"></a><a class="code" href="interp_8c.html#a6839370bd08ee5f4ecbb326bc17570b0">00194</a> <a class="code" href="interp_8c.html#a6839370bd08ee5f4ecbb326bc17570b0">doindex</a>(<span class="keywordtype">int</span> minr, <span class="keywordtype">int</span> minc, <span class="keywordtype">int</span> maxr, <span class="keywordtype">int</span> maxc, <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *val)
<a name="l00195"></a>00195 {
<a name="l00196"></a>00196     <span class="keywordtype">int</span> r, c;
<a name="l00197"></a>00197     <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *p;
<a name="l00198"></a>00198 
<a name="l00199"></a>00199     <span class="keywordflow">if</span> (val-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a> == <span class="charliteral">&#39;,&#39;</span>) {               <span class="comment">/* index by both row and column */</span>
<a name="l00200"></a>00200         r = minr + (int) <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(val-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left) - 1;
<a name="l00201"></a>00201         c = minc + (int) <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(val-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right) - 1;
<a name="l00202"></a>00202     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (minr == maxr) {          <span class="comment">/* look along the row */</span>
<a name="l00203"></a>00203         r = minr;
<a name="l00204"></a>00204         c = minc + (int) <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(val) - 1;
<a name="l00205"></a>00205     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (minc == maxc) {          <span class="comment">/* look down the column */</span>
<a name="l00206"></a>00206         r = minr + (int) <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(val) - 1;
<a name="l00207"></a>00207         c = minc;
<a name="l00208"></a>00208     } <span class="keywordflow">else</span> {
<a name="l00209"></a>00209         <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot;Improper indexing operation&quot;</span>);
<a name="l00210"></a>00210         <span class="keywordflow">return</span> (<span class="keywordtype">double</span>) 0;
<a name="l00211"></a>00211     }
<a name="l00212"></a>00212 
<a name="l00213"></a>00213     <span class="keywordflow">if</span> (c &lt;= maxc &amp;&amp; c &gt;=minc &amp;&amp; r &lt;= maxr &amp;&amp; r &gt;=minr &amp;&amp;
<a name="l00214"></a>00214             (p = *<a class="code" href="sc_8h.html#a2288f3ade588c7240beef3b7a301051b">ATBL</a>(<a class="code" href="sc_8c.html#ab1cc8ce06f419cceb40acdf03a6bb4fc">tbl</a>, r, c)) &amp;&amp; p-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a>&amp;<a class="code" href="sc_8h.html#a242aaa897b3487fbbae12bf4b297ad1b">is_valid</a>) {
<a name="l00215"></a>00215         <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structent.html#ab08000c5e4f50af3a8f55684f634ca7e">cellerror</a>)
<a name="l00216"></a>00216             cellerror = <a class="code" href="sc_8h.html#aa6529750c8b88ff209c78679f50190fe">CELLINVALID</a>;
<a name="l00217"></a>00217         <span class="keywordflow">return</span> p-&gt;<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>;
<a name="l00218"></a>00218     } <span class="keywordflow">else</span>
<a name="l00219"></a>00219         <span class="keywordflow">return</span> (<span class="keywordtype">double</span>) 0;
<a name="l00220"></a>00220 }
<a name="l00221"></a>00221 
<a name="l00222"></a>00222 <span class="keywordtype">double</span>
<a name="l00223"></a><a class="code" href="interp_8c.html#ada1acb175b41fcf664bb03ebbf054a4c">00223</a> <a class="code" href="interp_8c.html#ada1acb175b41fcf664bb03ebbf054a4c">dolookup</a>(<span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> * val, <span class="keywordtype">int</span> minr, <span class="keywordtype">int</span> minc, <span class="keywordtype">int</span> maxr, <span class="keywordtype">int</span> maxc, <span class="keywordtype">int</span> offset, <span class="keywordtype">int</span> vflag)
<a name="l00224"></a>00224 {
<a name="l00225"></a>00225     <span class="keywordtype">double</span> <a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>, ret = (double)0;
<a name="l00226"></a>00226     <span class="keywordtype">int</span> r, c;
<a name="l00227"></a>00227     <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *p = (<span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *)0;
<a name="l00228"></a>00228     <span class="keywordtype">int</span> incr, incc, fndr, fndc;
<a name="l00229"></a>00229     <span class="keywordtype">char</span> *s;
<a name="l00230"></a>00230 
<a name="l00231"></a>00231     incr = vflag; incc = 1 - vflag;
<a name="l00232"></a>00232     <span class="keywordflow">if</span> (<a class="code" href="cmds_8c.html#a693876ef70fbb4c1ef7e2b83bb5126da">etype</a>(val) == <a class="code" href="psc_8c.html#aaf0952059602752258dccaa015d7b54a">NUM</a>) {
<a name="l00233"></a>00233         cellerror = <a class="code" href="sc_8h.html#a0a47a7c621688cb5e5dd3b35954cdad2">CELLOK</a>;
<a name="l00234"></a>00234         v = <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(val);
<a name="l00235"></a>00235         <span class="keywordflow">for</span> (r = minr, c = minc; r &lt;= maxr &amp;&amp; c &lt;= maxc; r+=incr, c+=incc) {
<a name="l00236"></a>00236             <span class="keywordflow">if</span> ((p = *<a class="code" href="sc_8h.html#a2288f3ade588c7240beef3b7a301051b">ATBL</a>(<a class="code" href="sc_8c.html#ab1cc8ce06f419cceb40acdf03a6bb4fc">tbl</a>, r, c)) &amp;&amp; p-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a>&amp;<a class="code" href="sc_8h.html#a242aaa897b3487fbbae12bf4b297ad1b">is_valid</a>) {
<a name="l00237"></a>00237                 <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a> &lt;= v) {
<a name="l00238"></a>00238                     fndr = incc ? (minr + offset) : r;
<a name="l00239"></a>00239                     fndc = incr ? (minc + offset) : c;
<a name="l00240"></a>00240                     <span class="keywordflow">if</span> (<a class="code" href="interp_8c.html#a03a498c85062a0adf4f130b81e4b32af">ISVALID</a>(fndr, fndc))
<a name="l00241"></a>00241                         p = *<a class="code" href="sc_8h.html#a2288f3ade588c7240beef3b7a301051b">ATBL</a>(<a class="code" href="sc_8c.html#ab1cc8ce06f419cceb40acdf03a6bb4fc">tbl</a>, fndr, fndc);
<a name="l00242"></a>00242                     <span class="keywordflow">else</span> {
<a name="l00243"></a>00243                         <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot; range specified to @[hv]lookup&quot;</span>);
<a name="l00244"></a>00244                         cellerror = <a class="code" href="sc_8h.html#a21246343b17f2039f546f18e0e72cff6">CELLERROR</a>;
<a name="l00245"></a>00245                     }
<a name="l00246"></a>00246                     <span class="keywordflow">if</span> (p &amp;&amp; p-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a>&amp;<a class="code" href="sc_8h.html#a242aaa897b3487fbbae12bf4b297ad1b">is_valid</a>) {
<a name="l00247"></a>00247                         <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structent.html#ab08000c5e4f50af3a8f55684f634ca7e">cellerror</a>)
<a name="l00248"></a>00248                             cellerror = <a class="code" href="sc_8h.html#aa6529750c8b88ff209c78679f50190fe">CELLINVALID</a>;
<a name="l00249"></a>00249                         ret = p-&gt;<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>;
<a name="l00250"></a>00250                     }
<a name="l00251"></a>00251                 } <span class="keywordflow">else</span> <span class="keywordflow">break</span>;
<a name="l00252"></a>00252             }
<a name="l00253"></a>00253         }
<a name="l00254"></a>00254     } <span class="keywordflow">else</span> {
<a name="l00255"></a>00255         cellerror = <a class="code" href="sc_8h.html#a0a47a7c621688cb5e5dd3b35954cdad2">CELLOK</a>;
<a name="l00256"></a>00256         s = <a class="code" href="interp_8c.html#a08452d640cd2db36eb97e3979d6df576">seval</a>(val);
<a name="l00257"></a>00257         <span class="keywordflow">for</span> (r = minr, c = minc; r &lt;= maxr &amp;&amp; c &lt;= maxc; r+=incr, c+=incc) {
<a name="l00258"></a>00258             <span class="keywordflow">if</span> ((p = *<a class="code" href="sc_8h.html#a2288f3ade588c7240beef3b7a301051b">ATBL</a>(<a class="code" href="sc_8c.html#ab1cc8ce06f419cceb40acdf03a6bb4fc">tbl</a>, r, c)) &amp;&amp; p-&gt;<a class="code" href="structent.html#a5346704737f8bf536f566804d95d9a02">label</a>) {
<a name="l00259"></a>00259                 <span class="keywordflow">if</span> (strcmp(p-&gt;<a class="code" href="structent.html#a5346704737f8bf536f566804d95d9a02">label</a>,s) == 0) {
<a name="l00260"></a>00260                     fndr = incc ? (minr + offset) : r;
<a name="l00261"></a>00261                     fndc = incr ? (minc + offset) : c;
<a name="l00262"></a>00262                     <span class="keywordflow">if</span> (<a class="code" href="interp_8c.html#a03a498c85062a0adf4f130b81e4b32af">ISVALID</a>(fndr,fndc)) {
<a name="l00263"></a>00263                         p = *<a class="code" href="sc_8h.html#a2288f3ade588c7240beef3b7a301051b">ATBL</a>(<a class="code" href="sc_8c.html#ab1cc8ce06f419cceb40acdf03a6bb4fc">tbl</a>, fndr, fndc);
<a name="l00264"></a>00264                         <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structent.html#ab08000c5e4f50af3a8f55684f634ca7e">cellerror</a>)
<a name="l00265"></a>00265                                 cellerror = <a class="code" href="sc_8h.html#aa6529750c8b88ff209c78679f50190fe">CELLINVALID</a>;
<a name="l00266"></a>00266                     } <span class="keywordflow">else</span> {
<a name="l00267"></a>00267                         <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot; range specified to @[hv]lookup&quot;</span>);
<a name="l00268"></a>00268                         cellerror = <a class="code" href="sc_8h.html#a21246343b17f2039f546f18e0e72cff6">CELLERROR</a>;
<a name="l00269"></a>00269                     }
<a name="l00270"></a>00270                     <span class="keywordflow">break</span>;
<a name="l00271"></a>00271                 }
<a name="l00272"></a>00272             }
<a name="l00273"></a>00273         }
<a name="l00274"></a>00274         <span class="keywordflow">if</span> (p &amp;&amp; p-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a>&amp;<a class="code" href="sc_8h.html#a242aaa897b3487fbbae12bf4b297ad1b">is_valid</a>)
<a name="l00275"></a>00275             ret = p-&gt;<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>;
<a name="l00276"></a>00276         <a class="code" href="pxmalloc_8c.html#a319bd47b6e3c09b65d3d666d7007bdc3">scxfree</a>(s);
<a name="l00277"></a>00277     }
<a name="l00278"></a>00278     <span class="keywordflow">return</span> ret;
<a name="l00279"></a>00279 }
<a name="l00280"></a>00280 
<a name="l00281"></a>00281 <span class="keywordtype">double</span>
<a name="l00282"></a><a class="code" href="interp_8c.html#ad7a8d2e1871740e53e41e45f0208c705">00282</a> <a class="code" href="interp_8c.html#ad7a8d2e1871740e53e41e45f0208c705">docount</a>(<span class="keywordtype">int</span> minr, <span class="keywordtype">int</span> minc, <span class="keywordtype">int</span> maxr, <span class="keywordtype">int</span> maxc, <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *e)
<a name="l00283"></a>00283 {
<a name="l00284"></a>00284     <span class="keywordtype">int</span> <a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>;
<a name="l00285"></a>00285     <span class="keywordtype">int</span> r, c;
<a name="l00286"></a>00286     <span class="keywordtype">int</span> cellerr = <a class="code" href="sc_8h.html#a0a47a7c621688cb5e5dd3b35954cdad2">CELLOK</a>;
<a name="l00287"></a>00287     <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *p;
<a name="l00288"></a>00288 
<a name="l00289"></a>00289     v = 0;
<a name="l00290"></a>00290     <span class="keywordflow">for</span> (r = minr; r&lt;=maxr; r++)
<a name="l00291"></a>00291         <span class="keywordflow">for</span> (c = minc; c&lt;=maxc; c++) {
<a name="l00292"></a>00292             <span class="keywordflow">if</span> (e) {
<a name="l00293"></a>00293                 <a class="code" href="interp_8c.html#a4405c775bda3aee041f992bdf4dc7792">rowoffset</a> = r - minr;
<a name="l00294"></a>00294                 <a class="code" href="interp_8c.html#af99a356889e60bd714423c716a090b0c">coloffset</a> = c - minc;
<a name="l00295"></a>00295             }
<a name="l00296"></a>00296             <span class="keywordflow">if</span> (!e || <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e))
<a name="l00297"></a>00297                 <span class="keywordflow">if</span> ((p = *<a class="code" href="sc_8h.html#a2288f3ade588c7240beef3b7a301051b">ATBL</a>(<a class="code" href="sc_8c.html#ab1cc8ce06f419cceb40acdf03a6bb4fc">tbl</a>, r, c)) &amp;&amp; p-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> &amp; <a class="code" href="sc_8h.html#a242aaa897b3487fbbae12bf4b297ad1b">is_valid</a>) {
<a name="l00298"></a>00298                     <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structent.html#ab08000c5e4f50af3a8f55684f634ca7e">cellerror</a>)
<a name="l00299"></a>00299                         cellerr = <a class="code" href="sc_8h.html#aa6529750c8b88ff209c78679f50190fe">CELLINVALID</a>;
<a name="l00300"></a>00300                     v++;
<a name="l00301"></a>00301                 }
<a name="l00302"></a>00302         }
<a name="l00303"></a>00303     cellerror = cellerr;
<a name="l00304"></a>00304     <a class="code" href="interp_8c.html#a4405c775bda3aee041f992bdf4dc7792">rowoffset</a> = <a class="code" href="interp_8c.html#af99a356889e60bd714423c716a090b0c">coloffset</a> = 0;
<a name="l00305"></a>00305     <span class="keywordflow">return</span> <a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>;
<a name="l00306"></a>00306 }
<a name="l00307"></a>00307 
<a name="l00308"></a>00308 <span class="keywordtype">double</span>
<a name="l00309"></a><a class="code" href="interp_8c.html#a0bd4aae90247324aaa5167516de4e3fd">00309</a> <a class="code" href="interp_8c.html#a0bd4aae90247324aaa5167516de4e3fd">dosum</a>(<span class="keywordtype">int</span> minr, <span class="keywordtype">int</span> minc, <span class="keywordtype">int</span> maxr, <span class="keywordtype">int</span> maxc, <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *e)
<a name="l00310"></a>00310 {
<a name="l00311"></a>00311     <span class="keywordtype">double</span> <a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>;
<a name="l00312"></a>00312     <span class="keywordtype">int</span> r, c;
<a name="l00313"></a>00313     <span class="keywordtype">int</span> cellerr = <a class="code" href="sc_8h.html#a0a47a7c621688cb5e5dd3b35954cdad2">CELLOK</a>;
<a name="l00314"></a>00314     <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *p;
<a name="l00315"></a>00315 
<a name="l00316"></a>00316     v = (double)0;
<a name="l00317"></a>00317     <span class="keywordflow">for</span> (r = minr; r&lt;=maxr; r++)
<a name="l00318"></a>00318         <span class="keywordflow">for</span> (c = minc; c&lt;=maxc; c++) {
<a name="l00319"></a>00319             <span class="keywordflow">if</span> (e) {
<a name="l00320"></a>00320                 <a class="code" href="interp_8c.html#a4405c775bda3aee041f992bdf4dc7792">rowoffset</a> = r - minr;
<a name="l00321"></a>00321                 <a class="code" href="interp_8c.html#af99a356889e60bd714423c716a090b0c">coloffset</a> = c - minc;
<a name="l00322"></a>00322             }
<a name="l00323"></a>00323             <span class="keywordflow">if</span> (!e || <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e))
<a name="l00324"></a>00324                 <span class="keywordflow">if</span> ((p = *<a class="code" href="sc_8h.html#a2288f3ade588c7240beef3b7a301051b">ATBL</a>(<a class="code" href="sc_8c.html#ab1cc8ce06f419cceb40acdf03a6bb4fc">tbl</a>, r, c)) &amp;&amp; p-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> &amp; <a class="code" href="sc_8h.html#a242aaa897b3487fbbae12bf4b297ad1b">is_valid</a>) {
<a name="l00325"></a>00325                     <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structent.html#ab08000c5e4f50af3a8f55684f634ca7e">cellerror</a>)
<a name="l00326"></a>00326                         cellerr = <a class="code" href="sc_8h.html#aa6529750c8b88ff209c78679f50190fe">CELLINVALID</a>;
<a name="l00327"></a>00327                     v += p-&gt;<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>;
<a name="l00328"></a>00328                 }
<a name="l00329"></a>00329         }
<a name="l00330"></a>00330     cellerror = cellerr;
<a name="l00331"></a>00331     <a class="code" href="interp_8c.html#a4405c775bda3aee041f992bdf4dc7792">rowoffset</a> = <a class="code" href="interp_8c.html#af99a356889e60bd714423c716a090b0c">coloffset</a> = 0;
<a name="l00332"></a>00332     <span class="keywordflow">return</span> <a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>;
<a name="l00333"></a>00333 }
<a name="l00334"></a>00334 
<a name="l00335"></a>00335 <span class="keywordtype">double</span>
<a name="l00336"></a><a class="code" href="interp_8c.html#aea381023ebf9f5a5564965d11d93b648">00336</a> <a class="code" href="interp_8c.html#aea381023ebf9f5a5564965d11d93b648">doprod</a>(<span class="keywordtype">int</span> minr, <span class="keywordtype">int</span> minc, <span class="keywordtype">int</span> maxr, <span class="keywordtype">int</span> maxc, <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *e)
<a name="l00337"></a>00337 {
<a name="l00338"></a>00338     <span class="keywordtype">double</span> <a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>;
<a name="l00339"></a>00339     <span class="keywordtype">int</span> r, c;
<a name="l00340"></a>00340     <span class="keywordtype">int</span> cellerr = <a class="code" href="sc_8h.html#a0a47a7c621688cb5e5dd3b35954cdad2">CELLOK</a>;
<a name="l00341"></a>00341     <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *p;
<a name="l00342"></a>00342 
<a name="l00343"></a>00343     v = 1;
<a name="l00344"></a>00344     <span class="keywordflow">for</span> (r = minr; r&lt;=maxr; r++)
<a name="l00345"></a>00345         <span class="keywordflow">for</span> (c = minc; c&lt;=maxc; c++) {
<a name="l00346"></a>00346             <span class="keywordflow">if</span> (e) {
<a name="l00347"></a>00347                 <a class="code" href="interp_8c.html#a4405c775bda3aee041f992bdf4dc7792">rowoffset</a> = r - minr;
<a name="l00348"></a>00348                 <a class="code" href="interp_8c.html#af99a356889e60bd714423c716a090b0c">coloffset</a> = c - minc;
<a name="l00349"></a>00349             }
<a name="l00350"></a>00350             <span class="keywordflow">if</span> (!e || <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e))
<a name="l00351"></a>00351                 <span class="keywordflow">if</span> ((p = *<a class="code" href="sc_8h.html#a2288f3ade588c7240beef3b7a301051b">ATBL</a>(<a class="code" href="sc_8c.html#ab1cc8ce06f419cceb40acdf03a6bb4fc">tbl</a>, r, c)) &amp;&amp; p-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> &amp; <a class="code" href="sc_8h.html#a242aaa897b3487fbbae12bf4b297ad1b">is_valid</a>) {
<a name="l00352"></a>00352                     <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structent.html#ab08000c5e4f50af3a8f55684f634ca7e">cellerror</a>)
<a name="l00353"></a>00353                         cellerr = <a class="code" href="sc_8h.html#aa6529750c8b88ff209c78679f50190fe">CELLINVALID</a>;
<a name="l00354"></a>00354                     v *= p-&gt;<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>;
<a name="l00355"></a>00355                 }
<a name="l00356"></a>00356         }
<a name="l00357"></a>00357     cellerror = cellerr;
<a name="l00358"></a>00358     <a class="code" href="interp_8c.html#a4405c775bda3aee041f992bdf4dc7792">rowoffset</a> = <a class="code" href="interp_8c.html#af99a356889e60bd714423c716a090b0c">coloffset</a> = 0;
<a name="l00359"></a>00359     <span class="keywordflow">return</span> <a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>;
<a name="l00360"></a>00360 }
<a name="l00361"></a>00361 
<a name="l00362"></a>00362 <span class="keywordtype">double</span>
<a name="l00363"></a><a class="code" href="interp_8c.html#a8972e4ae6890f6eedbe4a3bc29a9f78f">00363</a> <a class="code" href="interp_8c.html#a8972e4ae6890f6eedbe4a3bc29a9f78f">doavg</a>(<span class="keywordtype">int</span> minr, <span class="keywordtype">int</span> minc, <span class="keywordtype">int</span> maxr, <span class="keywordtype">int</span> maxc, <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *e)
<a name="l00364"></a>00364 {
<a name="l00365"></a>00365     <span class="keywordtype">double</span> <a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>;
<a name="l00366"></a>00366     <span class="keywordtype">int</span> r, c;
<a name="l00367"></a>00367     <span class="keywordtype">int</span> count;
<a name="l00368"></a>00368     <span class="keywordtype">int</span> cellerr = <a class="code" href="sc_8h.html#a0a47a7c621688cb5e5dd3b35954cdad2">CELLOK</a>;
<a name="l00369"></a>00369     <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *p;
<a name="l00370"></a>00370 
<a name="l00371"></a>00371     v = (double)0;
<a name="l00372"></a>00372     count = 0;
<a name="l00373"></a>00373     <span class="keywordflow">for</span> (r = minr; r&lt;=maxr; r++)
<a name="l00374"></a>00374         <span class="keywordflow">for</span> (c = minc; c&lt;=maxc; c++) {
<a name="l00375"></a>00375             <span class="keywordflow">if</span> (e) {
<a name="l00376"></a>00376                 <a class="code" href="interp_8c.html#a4405c775bda3aee041f992bdf4dc7792">rowoffset</a> = r - minr;
<a name="l00377"></a>00377                 <a class="code" href="interp_8c.html#af99a356889e60bd714423c716a090b0c">coloffset</a> = c - minc;
<a name="l00378"></a>00378             }
<a name="l00379"></a>00379             <span class="keywordflow">if</span> (!e || <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e))
<a name="l00380"></a>00380                 <span class="keywordflow">if</span> ((p = *<a class="code" href="sc_8h.html#a2288f3ade588c7240beef3b7a301051b">ATBL</a>(<a class="code" href="sc_8c.html#ab1cc8ce06f419cceb40acdf03a6bb4fc">tbl</a>, r, c)) &amp;&amp; p-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a>&amp;<a class="code" href="sc_8h.html#a242aaa897b3487fbbae12bf4b297ad1b">is_valid</a>) {
<a name="l00381"></a>00381                     <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structent.html#ab08000c5e4f50af3a8f55684f634ca7e">cellerror</a>)
<a name="l00382"></a>00382                         cellerr = <a class="code" href="sc_8h.html#aa6529750c8b88ff209c78679f50190fe">CELLINVALID</a>;
<a name="l00383"></a>00383 
<a name="l00384"></a>00384                     v += p-&gt;<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>;
<a name="l00385"></a>00385                     count++;
<a name="l00386"></a>00386                 }
<a name="l00387"></a>00387         }
<a name="l00388"></a>00388     cellerror = cellerr;
<a name="l00389"></a>00389     <a class="code" href="interp_8c.html#a4405c775bda3aee041f992bdf4dc7792">rowoffset</a> = <a class="code" href="interp_8c.html#af99a356889e60bd714423c716a090b0c">coloffset</a> = 0;
<a name="l00390"></a>00390 
<a name="l00391"></a>00391     <span class="keywordflow">if</span> (count == 0) 
<a name="l00392"></a>00392         <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>)0);
<a name="l00393"></a>00393 
<a name="l00394"></a>00394     <span class="keywordflow">return</span> (v / (<span class="keywordtype">double</span>)count);
<a name="l00395"></a>00395 }
<a name="l00396"></a>00396 
<a name="l00397"></a>00397 <span class="keywordtype">double</span>
<a name="l00398"></a><a class="code" href="interp_8c.html#a0728581cbbe4bd0605ca8b1a3252c658">00398</a> <a class="code" href="interp_8c.html#a0728581cbbe4bd0605ca8b1a3252c658">dostddev</a>(<span class="keywordtype">int</span> minr, <span class="keywordtype">int</span> minc, <span class="keywordtype">int</span> maxr, <span class="keywordtype">int</span> maxc, <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *e)
<a name="l00399"></a>00399 {
<a name="l00400"></a>00400     <span class="keywordtype">double</span> lp, rp, <a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>, nd;
<a name="l00401"></a>00401     <span class="keywordtype">int</span> r, c;
<a name="l00402"></a>00402     <span class="keywordtype">int</span> n;
<a name="l00403"></a>00403     <span class="keywordtype">int</span> cellerr = <a class="code" href="sc_8h.html#a0a47a7c621688cb5e5dd3b35954cdad2">CELLOK</a>;
<a name="l00404"></a>00404     <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *p;
<a name="l00405"></a>00405 
<a name="l00406"></a>00406     n = 0;
<a name="l00407"></a>00407     lp = 0;
<a name="l00408"></a>00408     rp = 0;
<a name="l00409"></a>00409     <span class="keywordflow">for</span> (r = minr; r&lt;=maxr; r++)
<a name="l00410"></a>00410         <span class="keywordflow">for</span> (c = minc; c&lt;=maxc; c++) {
<a name="l00411"></a>00411             <span class="keywordflow">if</span> (e) {
<a name="l00412"></a>00412                 <a class="code" href="interp_8c.html#a4405c775bda3aee041f992bdf4dc7792">rowoffset</a> = r - minr;
<a name="l00413"></a>00413                 <a class="code" href="interp_8c.html#af99a356889e60bd714423c716a090b0c">coloffset</a> = c - minc;
<a name="l00414"></a>00414             }
<a name="l00415"></a>00415             <span class="keywordflow">if</span> (!e || <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e))
<a name="l00416"></a>00416                 <span class="keywordflow">if</span> ((p = *<a class="code" href="sc_8h.html#a2288f3ade588c7240beef3b7a301051b">ATBL</a>(<a class="code" href="sc_8c.html#ab1cc8ce06f419cceb40acdf03a6bb4fc">tbl</a>, r, c)) &amp;&amp; p-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a>&amp;<a class="code" href="sc_8h.html#a242aaa897b3487fbbae12bf4b297ad1b">is_valid</a>) {
<a name="l00417"></a>00417                     <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structent.html#ab08000c5e4f50af3a8f55684f634ca7e">cellerror</a>)
<a name="l00418"></a>00418                         cellerr = <a class="code" href="sc_8h.html#aa6529750c8b88ff209c78679f50190fe">CELLINVALID</a>;
<a name="l00419"></a>00419 
<a name="l00420"></a>00420                     v = p-&gt;<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>;
<a name="l00421"></a>00421                     lp += v*<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>;
<a name="l00422"></a>00422                     rp += <a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>;
<a name="l00423"></a>00423                     n++;
<a name="l00424"></a>00424                 }
<a name="l00425"></a>00425         }
<a name="l00426"></a>00426     cellerror = cellerr;
<a name="l00427"></a>00427     <a class="code" href="interp_8c.html#a4405c775bda3aee041f992bdf4dc7792">rowoffset</a> = <a class="code" href="interp_8c.html#af99a356889e60bd714423c716a090b0c">coloffset</a> = 0;
<a name="l00428"></a>00428 
<a name="l00429"></a>00429     <span class="keywordflow">if</span> ((n == 0) || (n == 1)) 
<a name="l00430"></a>00430         <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>)0);
<a name="l00431"></a>00431     nd = (double)n;
<a name="l00432"></a>00432     <span class="keywordflow">return</span> (sqrt((nd*lp-rp*rp)/(nd*(nd-1))));
<a name="l00433"></a>00433 }
<a name="l00434"></a>00434 
<a name="l00435"></a>00435 <span class="keywordtype">double</span>
<a name="l00436"></a><a class="code" href="interp_8c.html#a2f74f447a71beea6dac5fd93573bb882">00436</a> <a class="code" href="interp_8c.html#a2f74f447a71beea6dac5fd93573bb882">domax</a>(<span class="keywordtype">int</span> minr, <span class="keywordtype">int</span> minc, <span class="keywordtype">int</span> maxr, <span class="keywordtype">int</span> maxc, <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *e)
<a name="l00437"></a>00437 {
<a name="l00438"></a>00438     <span class="keywordtype">double</span> <a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a> = (double)0;
<a name="l00439"></a>00439     <span class="keywordtype">int</span> r, c;
<a name="l00440"></a>00440     <span class="keywordtype">int</span> count;
<a name="l00441"></a>00441     <span class="keywordtype">int</span> cellerr = <a class="code" href="sc_8h.html#a0a47a7c621688cb5e5dd3b35954cdad2">CELLOK</a>;
<a name="l00442"></a>00442     <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *p;
<a name="l00443"></a>00443 
<a name="l00444"></a>00444     count = 0;
<a name="l00445"></a>00445     <span class="keywordflow">for</span> (r = minr; r&lt;=maxr; r++)
<a name="l00446"></a>00446         <span class="keywordflow">for</span> (c = minc; c&lt;=maxc; c++) {
<a name="l00447"></a>00447             <span class="keywordflow">if</span> (e) {
<a name="l00448"></a>00448                 <a class="code" href="interp_8c.html#a4405c775bda3aee041f992bdf4dc7792">rowoffset</a> = r - minr;
<a name="l00449"></a>00449                 <a class="code" href="interp_8c.html#af99a356889e60bd714423c716a090b0c">coloffset</a> = c - minc;
<a name="l00450"></a>00450             }
<a name="l00451"></a>00451             <span class="keywordflow">if</span> (!e || <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e))
<a name="l00452"></a>00452                 <span class="keywordflow">if</span> ((p = *<a class="code" href="sc_8h.html#a2288f3ade588c7240beef3b7a301051b">ATBL</a>(<a class="code" href="sc_8c.html#ab1cc8ce06f419cceb40acdf03a6bb4fc">tbl</a>, r, c)) &amp;&amp; p-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a>&amp;<a class="code" href="sc_8h.html#a242aaa897b3487fbbae12bf4b297ad1b">is_valid</a>) {
<a name="l00453"></a>00453                     <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structent.html#ab08000c5e4f50af3a8f55684f634ca7e">cellerror</a>)
<a name="l00454"></a>00454                         cellerr = <a class="code" href="sc_8h.html#aa6529750c8b88ff209c78679f50190fe">CELLINVALID</a>;
<a name="l00455"></a>00455 
<a name="l00456"></a>00456                     <span class="keywordflow">if</span> (!count) {
<a name="l00457"></a>00457                         v = p-&gt;<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>;
<a name="l00458"></a>00458                         count++;
<a name="l00459"></a>00459                     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a> &gt; v)
<a name="l00460"></a>00460                         v = p-&gt;<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>;
<a name="l00461"></a>00461                 }
<a name="l00462"></a>00462         }
<a name="l00463"></a>00463     cellerror = cellerr;
<a name="l00464"></a>00464     <a class="code" href="interp_8c.html#a4405c775bda3aee041f992bdf4dc7792">rowoffset</a> = <a class="code" href="interp_8c.html#af99a356889e60bd714423c716a090b0c">coloffset</a> = 0;
<a name="l00465"></a>00465 
<a name="l00466"></a>00466     <span class="keywordflow">if</span> (count == 0) 
<a name="l00467"></a>00467         <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>)0);
<a name="l00468"></a>00468 
<a name="l00469"></a>00469     <span class="keywordflow">return</span> (v);
<a name="l00470"></a>00470 }
<a name="l00471"></a>00471 
<a name="l00472"></a>00472 <span class="keywordtype">double</span>
<a name="l00473"></a><a class="code" href="interp_8c.html#a66be3be1c0dcff44041d9cbaaf7a22f8">00473</a> <a class="code" href="interp_8c.html#a66be3be1c0dcff44041d9cbaaf7a22f8">domin</a>(<span class="keywordtype">int</span> minr, <span class="keywordtype">int</span> minc, <span class="keywordtype">int</span> maxr, <span class="keywordtype">int</span> maxc, <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *e)
<a name="l00474"></a>00474 {
<a name="l00475"></a>00475     <span class="keywordtype">double</span> <a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a> = (double)0;
<a name="l00476"></a>00476     <span class="keywordtype">int</span> r, c;
<a name="l00477"></a>00477     <span class="keywordtype">int</span> count;
<a name="l00478"></a>00478     <span class="keywordtype">int</span> cellerr = <a class="code" href="sc_8h.html#a0a47a7c621688cb5e5dd3b35954cdad2">CELLOK</a>;
<a name="l00479"></a>00479     <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *p;
<a name="l00480"></a>00480 
<a name="l00481"></a>00481     count = 0;
<a name="l00482"></a>00482     <span class="keywordflow">for</span> (r = minr; r&lt;=maxr; r++)
<a name="l00483"></a>00483         <span class="keywordflow">for</span> (c = minc; c&lt;=maxc; c++) {
<a name="l00484"></a>00484             <span class="keywordflow">if</span> (e) {
<a name="l00485"></a>00485                 <a class="code" href="interp_8c.html#a4405c775bda3aee041f992bdf4dc7792">rowoffset</a> = r - minr;
<a name="l00486"></a>00486                 <a class="code" href="interp_8c.html#af99a356889e60bd714423c716a090b0c">coloffset</a> = c - minc;
<a name="l00487"></a>00487             }
<a name="l00488"></a>00488             <span class="keywordflow">if</span> (!e || <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e))
<a name="l00489"></a>00489                 <span class="keywordflow">if</span> ((p = *<a class="code" href="sc_8h.html#a2288f3ade588c7240beef3b7a301051b">ATBL</a>(<a class="code" href="sc_8c.html#ab1cc8ce06f419cceb40acdf03a6bb4fc">tbl</a>, r, c)) &amp;&amp; p-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a>&amp;<a class="code" href="sc_8h.html#a242aaa897b3487fbbae12bf4b297ad1b">is_valid</a>) {
<a name="l00490"></a>00490                     <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structent.html#ab08000c5e4f50af3a8f55684f634ca7e">cellerror</a>)
<a name="l00491"></a>00491                         cellerr = <a class="code" href="sc_8h.html#aa6529750c8b88ff209c78679f50190fe">CELLINVALID</a>;
<a name="l00492"></a>00492 
<a name="l00493"></a>00493                     <span class="keywordflow">if</span> (!count) {
<a name="l00494"></a>00494                         v = p-&gt;<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>;
<a name="l00495"></a>00495                         count++;
<a name="l00496"></a>00496                     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a> &lt; v)
<a name="l00497"></a>00497                         v = p-&gt;<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>;
<a name="l00498"></a>00498                 }
<a name="l00499"></a>00499         }
<a name="l00500"></a>00500     cellerror = cellerr;
<a name="l00501"></a>00501     <a class="code" href="interp_8c.html#a4405c775bda3aee041f992bdf4dc7792">rowoffset</a> = <a class="code" href="interp_8c.html#af99a356889e60bd714423c716a090b0c">coloffset</a> = 0;
<a name="l00502"></a>00502 
<a name="l00503"></a>00503     <span class="keywordflow">if</span> (count == 0) 
<a name="l00504"></a>00504         <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>)0);
<a name="l00505"></a>00505 
<a name="l00506"></a>00506     <span class="keywordflow">return</span> (v);
<a name="l00507"></a>00507 }
<a name="l00508"></a>00508 
<a name="l00509"></a><a class="code" href="interp_8c.html#a67621473bc82954d9ad986cc712fa98d">00509</a> <span class="keywordtype">int</span> <a class="code" href="interp_8c.html#a67621473bc82954d9ad986cc712fa98d">mdays</a>[12]={ 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 };
<a name="l00510"></a>00510 
<a name="l00511"></a>00511 <span class="keywordtype">double</span>
<a name="l00512"></a><a class="code" href="interp_8c.html#ae3fa8e5dbfbbb5274b75d23799d8aa3c">00512</a> <a class="code" href="interp_8c.html#ae3fa8e5dbfbbb5274b75d23799d8aa3c">dodts</a>(<span class="keywordtype">int</span> e1, <span class="keywordtype">int</span> e2, <span class="keywordtype">int</span> e3)
<a name="l00513"></a>00513 {
<a name="l00514"></a>00514     <span class="keywordtype">int</span>         yr, mo, day;
<a name="l00515"></a>00515     time_t      secs;
<a name="l00516"></a>00516     <span class="keyword">struct </span>tm   t; 
<a name="l00517"></a>00517 
<a name="l00518"></a>00518     <span class="keywordflow">if</span> (e2 &gt; 12 || e3 &gt; 31) {
<a name="l00519"></a>00519         mo  = e1;
<a name="l00520"></a>00520         day = e2;
<a name="l00521"></a>00521         yr  = e3;
<a name="l00522"></a>00522     } <span class="keywordflow">else</span> {
<a name="l00523"></a>00523         yr  = e1;
<a name="l00524"></a>00524         mo  = e2;
<a name="l00525"></a>00525         day = e3;
<a name="l00526"></a>00526     }
<a name="l00527"></a>00527     mdays[1] = 28 + (yr%4 == 0) - (yr%100 == 0) + (yr%400 == 0);
<a name="l00528"></a>00528 
<a name="l00529"></a>00529     t.tm_hour = t.tm_min = t.tm_sec = 0;
<a name="l00530"></a>00530     t.tm_mon = --mo;
<a name="l00531"></a>00531     t.tm_mday = day;
<a name="l00532"></a>00532     t.tm_year = yr -= 1900;
<a name="l00533"></a>00533     t.tm_isdst = -1;
<a name="l00534"></a>00534 
<a name="l00535"></a>00535     <span class="keywordflow">if</span> (mo &lt; 0 || mo &gt; 11 || day &lt; 1 || day &gt; mdays[mo] ||
<a name="l00536"></a>00536                (secs = mktime(&amp;t)) == -1) {
<a name="l00537"></a>00537         <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot;@dts: invalid argument or date out of range&quot;</span>);
<a name="l00538"></a>00538         cellerror = <a class="code" href="sc_8h.html#a21246343b17f2039f546f18e0e72cff6">CELLERROR</a>;
<a name="l00539"></a>00539         <span class="keywordflow">return</span> (0.0);
<a name="l00540"></a>00540     }
<a name="l00541"></a>00541 
<a name="l00542"></a>00542     <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>)secs);
<a name="l00543"></a>00543 }
<a name="l00544"></a>00544 
<a name="l00545"></a>00545 <span class="keywordtype">double</span>
<a name="l00546"></a><a class="code" href="interp_8c.html#a0eaa04f2b2e3b9e4002d84720b427691">00546</a> <a class="code" href="interp_8c.html#a0eaa04f2b2e3b9e4002d84720b427691">dotts</a>(<span class="keywordtype">int</span> hr, <span class="keywordtype">int</span> min, <span class="keywordtype">int</span> sec)
<a name="l00547"></a>00547 {
<a name="l00548"></a>00548     <span class="keywordflow">if</span> (hr &lt; 0 || hr &gt; 23 || min &lt; 0 || min &gt; 59 || sec &lt; 0 || sec &gt; 59) {
<a name="l00549"></a>00549         <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a> (<span class="stringliteral">&quot;@tts: Invalid argument&quot;</span>);
<a name="l00550"></a>00550         cellerror = <a class="code" href="sc_8h.html#a21246343b17f2039f546f18e0e72cff6">CELLERROR</a>;
<a name="l00551"></a>00551         <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>) 0);
<a name="l00552"></a>00552     }
<a name="l00553"></a>00553     <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>)(sec+min*60+hr*3600));
<a name="l00554"></a>00554 }
<a name="l00555"></a>00555 
<a name="l00556"></a>00556 <span class="keywordtype">double</span>
<a name="l00557"></a><a class="code" href="interp_8c.html#a47d1a9a224fcab44f7c15f5a3db557c6">00557</a> <a class="code" href="interp_8c.html#a47d1a9a224fcab44f7c15f5a3db557c6">dotime</a>(<span class="keywordtype">int</span> which, <span class="keywordtype">double</span> when)
<a name="l00558"></a>00558 {
<a name="l00559"></a>00559         <span class="keyword">static</span> time_t t_cache;
<a name="l00560"></a>00560         <span class="keyword">static</span> <span class="keyword">struct </span>tm tm_cache;
<a name="l00561"></a>00561         <span class="keyword">struct </span>tm *tp;
<a name="l00562"></a>00562         time_t tloc;
<a name="l00563"></a>00563 
<a name="l00564"></a>00564         <span class="keywordflow">if</span> (which == <a class="code" href="sc_8h.html#acc4a9ad83f9350a588d117e0c8916d45">NOW</a>) 
<a name="l00565"></a>00565             <span class="keywordflow">return</span> (<span class="keywordtype">double</span>)time(NULL);
<a name="l00566"></a>00566 
<a name="l00567"></a>00567         tloc = (time_t)when;
<a name="l00568"></a>00568 
<a name="l00569"></a>00569         <span class="keywordflow">if</span> (tloc != t_cache) {
<a name="l00570"></a>00570             tp = localtime(&amp;tloc);
<a name="l00571"></a>00571             tm_cache = *tp;
<a name="l00572"></a>00572             tm_cache.tm_mon += 1;
<a name="l00573"></a>00573             tm_cache.tm_year += 1900;
<a name="l00574"></a>00574             t_cache = tloc;
<a name="l00575"></a>00575         }
<a name="l00576"></a>00576 
<a name="l00577"></a>00577         <span class="keywordflow">switch</span> (which) {
<a name="l00578"></a>00578             <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a4698ae12cf6a8acb5886fffd0ec897e6">HOUR</a>:          <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>)(tm_cache.tm_hour));
<a name="l00579"></a>00579             <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ac1454fa04f41c693f39425697a137d82">MINUTE</a>:        <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>)(tm_cache.tm_min));
<a name="l00580"></a>00580             <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a94212be2394d2d37d9dfd33d07d82dba">SECOND</a>:        <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>)(tm_cache.tm_sec));
<a name="l00581"></a>00581             <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a3729d06495d9713592f79f3122c9e677">MONTH</a>:         <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>)(tm_cache.tm_mon));
<a name="l00582"></a>00582             <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a509a01c55cbe47386fe24602b7c7fda1">DAY</a>:           <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>)(tm_cache.tm_mday));
<a name="l00583"></a>00583             <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a5871356500f559add06ea81d60331b1b">YEAR</a>:          <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>)(tm_cache.tm_year));
<a name="l00584"></a>00584         }
<a name="l00585"></a>00585         <span class="comment">/* Safety net */</span>
<a name="l00586"></a>00586         cellerror = <a class="code" href="sc_8h.html#a21246343b17f2039f546f18e0e72cff6">CELLERROR</a>;
<a name="l00587"></a>00587         <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>)0);
<a name="l00588"></a>00588 }
<a name="l00589"></a>00589 
<a name="l00590"></a>00590 <span class="keywordtype">double</span>
<a name="l00591"></a><a class="code" href="interp_8c.html#a5282ee558e5fa91a8769f179eecef7cc">00591</a> <a class="code" href="interp_8c.html#a5282ee558e5fa91a8769f179eecef7cc">doston</a>(<span class="keywordtype">char</span> *s)
<a name="l00592"></a>00592 {
<a name="l00593"></a>00593     <span class="keywordtype">double</span> v;
<a name="l00594"></a>00594 
<a name="l00595"></a>00595     <span class="keywordflow">if</span> (!s)
<a name="l00596"></a>00596         <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>)0);
<a name="l00597"></a>00597 
<a name="l00598"></a>00598     v = strtod(s, NULL);
<a name="l00599"></a>00599     <a class="code" href="pxmalloc_8c.html#a319bd47b6e3c09b65d3d666d7007bdc3">scxfree</a>(s);
<a name="l00600"></a>00600     <span class="keywordflow">return</span>(v);
<a name="l00601"></a>00601 }
<a name="l00602"></a>00602 
<a name="l00603"></a>00603 <span class="keywordtype">double</span>
<a name="l00604"></a><a class="code" href="interp_8c.html#a59c95b70f40a33a7a54416c1d8b4e985">00604</a> <a class="code" href="interp_8c.html#a59c95b70f40a33a7a54416c1d8b4e985">doeqs</a>(<span class="keywordtype">char</span> *s1, <span class="keywordtype">char</span> *s2)
<a name="l00605"></a>00605 {
<a name="l00606"></a>00606     <span class="keywordtype">double</span> v;
<a name="l00607"></a>00607 
<a name="l00608"></a>00608     <span class="keywordflow">if</span> (!s1 &amp;&amp; !s2)
<a name="l00609"></a>00609         <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>)1.0);
<a name="l00610"></a>00610 
<a name="l00611"></a>00611     <span class="keywordflow">if</span> (!s1 || !s2)
<a name="l00612"></a>00612         v = 0.0;
<a name="l00613"></a>00613     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(s1, s2) == 0)
<a name="l00614"></a>00614         v = 1.0;
<a name="l00615"></a>00615     <span class="keywordflow">else</span>
<a name="l00616"></a>00616         v = 0.0;
<a name="l00617"></a>00617 
<a name="l00618"></a>00618     <span class="keywordflow">if</span> (s1)
<a name="l00619"></a>00619         <a class="code" href="pxmalloc_8c.html#a319bd47b6e3c09b65d3d666d7007bdc3">scxfree</a>(s1);
<a name="l00620"></a>00620 
<a name="l00621"></a>00621     <span class="keywordflow">if</span> (s2)
<a name="l00622"></a>00622         <a class="code" href="pxmalloc_8c.html#a319bd47b6e3c09b65d3d666d7007bdc3">scxfree</a>(s2);
<a name="l00623"></a>00623 
<a name="l00624"></a>00624     <span class="keywordflow">return</span>(v);
<a name="l00625"></a>00625 }
<a name="l00626"></a>00626 
<a name="l00627"></a>00627 
<a name="l00628"></a>00628 <span class="comment">/*</span>
<a name="l00629"></a>00629 <span class="comment"> * Given a string representing a column name and a value which is a row</span>
<a name="l00630"></a>00630 <span class="comment"> * number, return a pointer to the selected cell&#39;s entry, if any, else NULL.</span>
<a name="l00631"></a>00631 <span class="comment"> * Use only the integer part of the column number.  Always free the string.</span>
<a name="l00632"></a>00632 <span class="comment"> */</span>
<a name="l00633"></a>00633 
<a name="l00634"></a>00634 <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *
<a name="l00635"></a><a class="code" href="interp_8c.html#a9c976c6025f769e23a865fac48cc8955">00635</a> <a class="code" href="interp_8c.html#a9c976c6025f769e23a865fac48cc8955">getent</a>(<span class="keywordtype">char</span> *colstr, <span class="keywordtype">double</span> rowdoub)
<a name="l00636"></a>00636 {
<a name="l00637"></a>00637     <span class="keywordtype">int</span> collen;         <span class="comment">/* length of string */</span>
<a name="l00638"></a>00638     <span class="keywordtype">int</span> <a class="code" href="help_8c.html#a3a974d15c9cde2c3be4c2ad715920fc1">row</a>, <a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>;       <span class="comment">/* integer values   */</span>
<a name="l00639"></a>00639     <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *p = (<span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *)0;    <span class="comment">/* selected entry   */</span>
<a name="l00640"></a>00640 
<a name="l00641"></a>00641     <span class="keywordflow">if</span> (!colstr) {
<a name="l00642"></a>00642         cellerror = <a class="code" href="sc_8h.html#a21246343b17f2039f546f18e0e72cff6">CELLERROR</a>;
<a name="l00643"></a>00643         <span class="keywordflow">return</span> ((<span class="keyword">struct</span> <a class="code" href="structent.html">ent</a> *)0);
<a name="l00644"></a>00644     }
<a name="l00645"></a>00645 
<a name="l00646"></a>00646     <span class="keywordflow">if</span> (((row = (<span class="keywordtype">int</span>) floor(rowdoub)) &gt;= 0)
<a name="l00647"></a>00647             &amp;&amp; (row &lt; <a class="code" href="sc_8c.html#aad460640e3f69b0a50f1c6b5aefacbf5">maxrows</a>)                          <span class="comment">/* in range */</span>
<a name="l00648"></a>00648             &amp;&amp; ((collen = strlen (colstr)) &lt;= 2)        <span class="comment">/* not too long */</span>
<a name="l00649"></a>00649             &amp;&amp; ((col = <a class="code" href="lex_8c.html#ac4e75a54ce0ffcc57522f277449e2767">atocol</a> (colstr, collen)) &gt;= 0)
<a name="l00650"></a>00650             &amp;&amp; (col &lt; <a class="code" href="psc_8c.html#aba78b5e694f3296b3216736dc74c2a71">maxcols</a>)) {                       <span class="comment">/* in range */</span>
<a name="l00651"></a>00651         p = *<a class="code" href="sc_8h.html#a2288f3ade588c7240beef3b7a301051b">ATBL</a>(<a class="code" href="sc_8c.html#ab1cc8ce06f419cceb40acdf03a6bb4fc">tbl</a>, row, col);
<a name="l00652"></a>00652         <span class="keywordflow">if</span> ((p != NULL) &amp;&amp; p-&gt;<a class="code" href="structent.html#ab08000c5e4f50af3a8f55684f634ca7e">cellerror</a>)
<a name="l00653"></a>00653             cellerror = <a class="code" href="sc_8h.html#aa6529750c8b88ff209c78679f50190fe">CELLINVALID</a>;
<a name="l00654"></a>00654     }
<a name="l00655"></a>00655     <a class="code" href="pxmalloc_8c.html#a319bd47b6e3c09b65d3d666d7007bdc3">scxfree</a>(colstr);
<a name="l00656"></a>00656     <span class="keywordflow">return</span> (p);
<a name="l00657"></a>00657 }
<a name="l00658"></a>00658 
<a name="l00659"></a>00659 
<a name="l00660"></a>00660 <span class="comment">/*</span>
<a name="l00661"></a>00661 <span class="comment"> * Given a string representing a column name and a value which is a column</span>
<a name="l00662"></a>00662 <span class="comment"> * number, return the selected cell&#39;s numeric value, if any.</span>
<a name="l00663"></a>00663 <span class="comment"> */</span>
<a name="l00664"></a>00664 
<a name="l00665"></a>00665 <span class="keywordtype">double</span>
<a name="l00666"></a><a class="code" href="interp_8c.html#ac611ad3038e00a4dff365658866c7745">00666</a> <a class="code" href="interp_8c.html#ac611ad3038e00a4dff365658866c7745">donval</a>(<span class="keywordtype">char</span> *colstr, <span class="keywordtype">double</span> rowdoub)
<a name="l00667"></a>00667 {
<a name="l00668"></a>00668     <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *ep;
<a name="l00669"></a>00669 
<a name="l00670"></a>00670     <span class="keywordflow">return</span> (((ep = <a class="code" href="interp_8c.html#a9c976c6025f769e23a865fac48cc8955">getent</a>(colstr, rowdoub)) &amp;&amp; ((ep-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a>) &amp; <a class="code" href="sc_8h.html#a242aaa897b3487fbbae12bf4b297ad1b">is_valid</a>)) ?
<a name="l00671"></a>00671             (ep-&gt;<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>) : (<span class="keywordtype">double</span>)0);
<a name="l00672"></a>00672 }
<a name="l00673"></a>00673 
<a name="l00674"></a>00674 
<a name="l00675"></a>00675 <span class="comment">/*</span>
<a name="l00676"></a>00676 <span class="comment"> *      The list routines (e.g. dolmax) are called with an LMAX enode.</span>
<a name="l00677"></a>00677 <span class="comment"> *      The left pointer is a chain of ELIST nodes, the right pointer</span>
<a name="l00678"></a>00678 <span class="comment"> *      is a value.</span>
<a name="l00679"></a>00679 <span class="comment"> */</span>
<a name="l00680"></a>00680 <span class="keywordtype">double</span>
<a name="l00681"></a><a class="code" href="interp_8c.html#af08728eb47fdd28f5c16e33c1f72f077">00681</a> <a class="code" href="interp_8c.html#af08728eb47fdd28f5c16e33c1f72f077">dolmax</a>(<span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *ep)
<a name="l00682"></a>00682 {
<a name="l00683"></a>00683     <span class="keyword">register</span> <span class="keywordtype">int</span> count = 0;
<a name="l00684"></a>00684     <span class="keyword">register</span> <span class="keywordtype">double</span> maxval = 0; <span class="comment">/* Assignment to shut up lint */</span>
<a name="l00685"></a>00685     <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structenode.html">enode</a> *p;
<a name="l00686"></a>00686     <span class="keyword">register</span> <span class="keywordtype">double</span> <a class="code" href="structenode.html#af1d02090ec11bc269254d33a72506419">v</a>;
<a name="l00687"></a>00687 
<a name="l00688"></a>00688     cellerror = <a class="code" href="sc_8h.html#a0a47a7c621688cb5e5dd3b35954cdad2">CELLOK</a>;
<a name="l00689"></a>00689     <span class="keywordflow">for</span> (p = ep; p; p = p-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left) {
<a name="l00690"></a>00690         v = <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(p-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right);
<a name="l00691"></a>00691         <span class="keywordflow">if</span> (!count || v &gt; maxval)
<a name="l00692"></a>00692             maxval = <a class="code" href="structenode.html#af1d02090ec11bc269254d33a72506419">v</a>; count++;
<a name="l00693"></a>00693     }
<a name="l00694"></a>00694     <span class="keywordflow">if</span> (count) <span class="keywordflow">return</span> maxval;
<a name="l00695"></a>00695     <span class="keywordflow">else</span> <span class="keywordflow">return</span> (<span class="keywordtype">double</span>)0;
<a name="l00696"></a>00696 }
<a name="l00697"></a>00697 
<a name="l00698"></a>00698 <span class="keywordtype">double</span>
<a name="l00699"></a><a class="code" href="interp_8c.html#adb343f5ed626f2b0457b8e45994558a1">00699</a> <a class="code" href="interp_8c.html#adb343f5ed626f2b0457b8e45994558a1">dolmin</a>(<span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *ep)
<a name="l00700"></a>00700 {
<a name="l00701"></a>00701     <span class="keyword">register</span> <span class="keywordtype">int</span> count = 0;
<a name="l00702"></a>00702     <span class="keyword">register</span> <span class="keywordtype">double</span> minval = 0; <span class="comment">/* Assignment to shut up lint */</span>
<a name="l00703"></a>00703     <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structenode.html">enode</a> *p;
<a name="l00704"></a>00704     <span class="keyword">register</span> <span class="keywordtype">double</span> <a class="code" href="structenode.html#af1d02090ec11bc269254d33a72506419">v</a>;
<a name="l00705"></a>00705 
<a name="l00706"></a>00706     cellerror = <a class="code" href="sc_8h.html#a0a47a7c621688cb5e5dd3b35954cdad2">CELLOK</a>;
<a name="l00707"></a>00707     <span class="keywordflow">for</span> (p = ep; p; p = p-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left) {
<a name="l00708"></a>00708         v = <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(p-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right);
<a name="l00709"></a>00709         <span class="keywordflow">if</span> (!count || v &lt; minval)
<a name="l00710"></a>00710             minval = <a class="code" href="structenode.html#af1d02090ec11bc269254d33a72506419">v</a>; count++;
<a name="l00711"></a>00711     }
<a name="l00712"></a>00712     <span class="keywordflow">if</span> (count) <span class="keywordflow">return</span> minval;
<a name="l00713"></a>00713     <span class="keywordflow">else</span> <span class="keywordflow">return</span> (<span class="keywordtype">double</span>)0;
<a name="l00714"></a>00714 }
<a name="l00715"></a>00715 
<a name="l00716"></a>00716 <span class="keywordtype">double</span> 
<a name="l00717"></a><a class="code" href="sc_8h.html#ab28be6c2dbde9b58fdbb7ee205c6b139">00717</a> <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(<span class="keyword">register</span> <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>)
<a name="l00718"></a>00718 {
<a name="l00719"></a>00719     <span class="keywordflow">if</span> (e == (<span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *)0) {
<a name="l00720"></a>00720         cellerror = <a class="code" href="sc_8h.html#aa6529750c8b88ff209c78679f50190fe">CELLINVALID</a>;
<a name="l00721"></a>00721         <span class="keywordflow">return</span> (<span class="keywordtype">double</span>)0;
<a name="l00722"></a>00722     }
<a name="l00723"></a>00723     <span class="keywordflow">switch</span> (e-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a>) {
<a name="l00724"></a>00724         <span class="keywordflow">case</span> <span class="charliteral">&#39;+&#39;</span>:       <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left) + <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right));
<a name="l00725"></a>00725         <span class="keywordflow">case</span> <span class="charliteral">&#39;-&#39;</span>:       {
<a name="l00726"></a>00726                         <span class="keywordtype">double</span> l, <a class="code" href="structenode.html#a665ccff1d13c8ee142d2278af000dfc9">r</a>;
<a name="l00727"></a>00727                         l = <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left);
<a name="l00728"></a>00728                         r = <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right);
<a name="l00729"></a>00729                         <span class="keywordflow">return</span> l - <a class="code" href="structenode.html#a665ccff1d13c8ee142d2278af000dfc9">r</a>;
<a name="l00730"></a>00730                         }
<a name="l00731"></a>00731         <span class="keywordflow">case</span> <span class="charliteral">&#39;*&#39;</span>:       <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left) * <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right));
<a name="l00732"></a>00732         <span class="keywordflow">case</span> <span class="charliteral">&#39;/&#39;</span>:       {
<a name="l00733"></a>00733                         <span class="keywordtype">double</span> num, denom;
<a name="l00734"></a>00734                         num = <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left);
<a name="l00735"></a>00735                         denom = <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right);
<a name="l00736"></a>00736                         <span class="keywordflow">if</span> (cellerror) {
<a name="l00737"></a>00737                             cellerror = <a class="code" href="sc_8h.html#aa6529750c8b88ff209c78679f50190fe">CELLINVALID</a>;
<a name="l00738"></a>00738                             <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>) 0);
<a name="l00739"></a>00739                         } <span class="keywordflow">else</span>
<a name="l00740"></a>00740                         <span class="keywordflow">if</span> (denom)
<a name="l00741"></a>00741                             <span class="keywordflow">return</span> (num/denom);
<a name="l00742"></a>00742                         <span class="keywordflow">else</span> {
<a name="l00743"></a>00743                             cellerror = <a class="code" href="sc_8h.html#a21246343b17f2039f546f18e0e72cff6">CELLERROR</a>;
<a name="l00744"></a>00744                             <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>) 0);
<a name="l00745"></a>00745                         }
<a name="l00746"></a>00746         }
<a name="l00747"></a>00747         <span class="keywordflow">case</span> <span class="charliteral">&#39;%&#39;</span>:       {
<a name="l00748"></a>00748                         <span class="keywordtype">double</span> num, denom;
<a name="l00749"></a>00749                         num = floor(<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left));
<a name="l00750"></a>00750                         denom = floor(<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right));
<a name="l00751"></a>00751                         <span class="keywordflow">if</span> (denom)
<a name="l00752"></a>00752                             <span class="keywordflow">return</span> (num - floor(num/denom)*denom);
<a name="l00753"></a>00753                         <span class="keywordflow">else</span> {
<a name="l00754"></a>00754                             cellerror = <a class="code" href="sc_8h.html#a21246343b17f2039f546f18e0e72cff6">CELLERROR</a>;
<a name="l00755"></a>00755                             <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>) 0);
<a name="l00756"></a>00756                         }
<a name="l00757"></a>00757         }
<a name="l00758"></a>00758         <span class="keywordflow">case</span> <span class="charliteral">&#39;^&#39;</span>:       <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#aeb980433772df4965a55ee593d200ea0">fn2_eval</a>(pow,<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left),<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right)));
<a name="l00759"></a>00759         <span class="keywordflow">case</span> <span class="charliteral">&#39;&lt;&#39;</span>:       <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left) &lt; <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right));
<a name="l00760"></a>00760         <span class="keywordflow">case</span> <span class="charliteral">&#39;=&#39;</span>:       {
<a name="l00761"></a>00761                         <span class="keywordtype">double</span> l, <a class="code" href="structenode.html#a665ccff1d13c8ee142d2278af000dfc9">r</a>;
<a name="l00762"></a>00762                         l = <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left);
<a name="l00763"></a>00763                         r = <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right);
<a name="l00764"></a>00764                         <span class="keywordflow">return</span> (l == r);
<a name="l00765"></a>00765                         }
<a name="l00766"></a>00766         <span class="keywordflow">case</span> <span class="charliteral">&#39;&gt;&#39;</span>:       <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left) &gt; <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right));
<a name="l00767"></a>00767         <span class="keywordflow">case</span> <span class="charliteral">&#39;&amp;&#39;</span>:       <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left) &amp;&amp; <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right));
<a name="l00768"></a>00768         <span class="keywordflow">case</span> <span class="charliteral">&#39;|&#39;</span>:       <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left) || <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right));
<a name="l00769"></a>00769         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ac138c68a0709c57bc5f7567abc1558eb">IF</a>:
<a name="l00770"></a>00770         <span class="keywordflow">case</span> <span class="charliteral">&#39;?&#39;</span>:       <span class="keywordflow">return</span> <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left) ? <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right-&gt;e.o.left)
<a name="l00771"></a>00771                                                 : <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right-&gt;e.o.right);
<a name="l00772"></a>00772         <span class="keywordflow">case</span> <span class="charliteral">&#39;m&#39;</span>:       <span class="keywordflow">return</span> (-<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left));
<a name="l00773"></a>00773         <span class="keywordflow">case</span> <span class="charliteral">&#39;f&#39;</span>:       {
<a name="l00774"></a>00774                         <span class="keywordtype">int</span> rtmp = <a class="code" href="interp_8c.html#a4405c775bda3aee041f992bdf4dc7792">rowoffset</a>;
<a name="l00775"></a>00775                         <span class="keywordtype">int</span> ctmp = <a class="code" href="interp_8c.html#af99a356889e60bd714423c716a090b0c">coloffset</a>;
<a name="l00776"></a>00776                         <span class="keywordtype">double</span> ret;
<a name="l00777"></a>00777                         <a class="code" href="interp_8c.html#a4405c775bda3aee041f992bdf4dc7792">rowoffset</a> = <a class="code" href="interp_8c.html#af99a356889e60bd714423c716a090b0c">coloffset</a> = 0;
<a name="l00778"></a>00778                         ret = <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left);
<a name="l00779"></a>00779                         <a class="code" href="interp_8c.html#a4405c775bda3aee041f992bdf4dc7792">rowoffset</a> = rtmp;
<a name="l00780"></a>00780                         <a class="code" href="interp_8c.html#af99a356889e60bd714423c716a090b0c">coloffset</a> = ctmp;
<a name="l00781"></a>00781                         <span class="keywordflow">return</span> (ret);
<a name="l00782"></a>00782                         }
<a name="l00783"></a>00783         <span class="keywordflow">case</span> <span class="charliteral">&#39;F&#39;</span>:       <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left));
<a name="l00784"></a>00784         <span class="keywordflow">case</span> <span class="charliteral">&#39;!&#39;</span>:       <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left) == 0.0);
<a name="l00785"></a>00785         <span class="keywordflow">case</span> <span class="charliteral">&#39;;&#39;</span>:       <span class="keywordflow">return</span> (((<span class="keywordtype">int</span>)<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left) &amp; 7) +
<a name="l00786"></a>00786                                 (((<span class="keywordtype">int</span>)<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right) &amp; 7) &lt;&lt; 3));
<a name="l00787"></a>00787         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a1b2fd882aad05d28c200084770380c56">O_CONST</a>:   <span class="keywordflow">if</span> (!finite(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ad6e4e48660754be5ffc0583c15716ac0">k</a>)) {
<a name="l00788"></a>00788                             e-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a> = <a class="code" href="sc_8h.html#a2e5646da89a3a7fc37c028da6af601b8">ERR_</a>;
<a name="l00789"></a>00789                             e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ad6e4e48660754be5ffc0583c15716ac0">k</a> = (double) 0;
<a name="l00790"></a>00790                             cellerror = <a class="code" href="sc_8h.html#a21246343b17f2039f546f18e0e72cff6">CELLERROR</a>;
<a name="l00791"></a>00791                         }
<a name="l00792"></a>00792                         <span class="keywordflow">return</span> (e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ad6e4e48660754be5ffc0583c15716ac0">k</a>);
<a name="l00793"></a>00793         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ab7c61d0445730f55373808a31e3b9575">O_VAR</a>:     {
<a name="l00794"></a>00794                         <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *vp = e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#af1d02090ec11bc269254d33a72506419">v</a>.<a class="code" href="structent__ptr.html#abdf28c3ec0c48cd52cafbcd2825ae50b">vp</a>;
<a name="l00795"></a>00795                         <span class="keywordtype">int</span> <a class="code" href="help_8c.html#a3a974d15c9cde2c3be4c2ad715920fc1">row</a>, <a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>;
<a name="l00796"></a>00796                         <span class="keywordflow">if</span> (vp &amp;&amp; (<a class="code" href="interp_8c.html#a4405c775bda3aee041f992bdf4dc7792">rowoffset</a> || <a class="code" href="interp_8c.html#af99a356889e60bd714423c716a090b0c">coloffset</a>)) {
<a name="l00797"></a>00797                             row = e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#af1d02090ec11bc269254d33a72506419">v</a>.<a class="code" href="structent__ptr.html#a68b964980232d5b93da66ade646b6448">vf</a> &amp; <a class="code" href="sc_8h.html#a51d798b195d3e22ca7665e2ebf81539b">FIX_ROW</a> ? vp-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>
<a name="l00798"></a>00798                                                       : vp-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a> + <a class="code" href="interp_8c.html#a4405c775bda3aee041f992bdf4dc7792">rowoffset</a>;
<a name="l00799"></a>00799                             col = e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#af1d02090ec11bc269254d33a72506419">v</a>.<a class="code" href="structent__ptr.html#a68b964980232d5b93da66ade646b6448">vf</a> &amp; <a class="code" href="sc_8h.html#a7a89e20080d3b56d96740b913c84163e">FIX_COL</a> ? vp-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>
<a name="l00800"></a>00800                                                       : vp-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a> + <a class="code" href="interp_8c.html#af99a356889e60bd714423c716a090b0c">coloffset</a>;
<a name="l00801"></a>00801                             <a class="code" href="pvmtbl_8c.html#aed91143b6917f518cec727e37c387590">checkbounds</a>(&amp;row, &amp;col);
<a name="l00802"></a>00802                             vp = *<a class="code" href="sc_8h.html#a2288f3ade588c7240beef3b7a301051b">ATBL</a>(<a class="code" href="sc_8c.html#ab1cc8ce06f419cceb40acdf03a6bb4fc">tbl</a>, row, col);
<a name="l00803"></a>00803                         }
<a name="l00804"></a>00804                         <span class="keywordflow">if</span> (!vp || vp-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> &amp; <a class="code" href="sc_8h.html#a31531b5af50566a57cd58e422bc3b3a7">is_deleted</a>) {
<a name="l00805"></a>00805                             cellerror = <a class="code" href="sc_8h.html#a21246343b17f2039f546f18e0e72cff6">CELLERROR</a>;
<a name="l00806"></a>00806                             <span class="keywordflow">return</span> (<span class="keywordtype">double</span>) 0;
<a name="l00807"></a>00807                         }
<a name="l00808"></a>00808                         <span class="keywordflow">if</span> (vp-&gt;<a class="code" href="structent.html#ab08000c5e4f50af3a8f55684f634ca7e">cellerror</a>)
<a name="l00809"></a>00809                             cellerror = <a class="code" href="sc_8h.html#aa6529750c8b88ff209c78679f50190fe">CELLINVALID</a>;
<a name="l00810"></a>00810                         <span class="keywordflow">return</span> (vp-&gt;<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>);
<a name="l00811"></a>00811                         }
<a name="l00812"></a>00812         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a1319745524dbd8748dba95bb12b19f19">SUM</a>:
<a name="l00813"></a>00813         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a6fb685ced489c960ab8a71e915f72539">PROD</a>:
<a name="l00814"></a>00814         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ac377db81b810bff5ff74221befd2ccc0">AVG</a>:
<a name="l00815"></a>00815         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a698c124f1c293f98840449d6c5b9d984">COUNT</a>:
<a name="l00816"></a>00816         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a87244bd2adfc822019823add7aa42514">STDDEV</a>:
<a name="l00817"></a>00817         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a392fb874e547e582e9c66a08a1f23326">MAX</a>:
<a name="l00818"></a>00818         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#adbd5cbe76e047a39e0a34f085cdae6fe">MIN</a>:
<a name="l00819"></a>00819         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ac6885dbfb371c33e523c7fb046118b36">INDEX</a>:
<a name="l00820"></a>00820         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#afad4cd3fef3f7d50f95ee7713a58c59e">LOOKUP</a>:
<a name="l00821"></a>00821         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a3ede2116cb46920427dbd47638bd0520">HLOOKUP</a>:
<a name="l00822"></a>00822         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ad09c432ea106e71a0121048889ce2fae">VLOOKUP</a>: {
<a name="l00823"></a>00823             <span class="keywordtype">int</span> r, c;
<a name="l00824"></a>00824             <span class="keywordtype">int</span> maxr, maxc;
<a name="l00825"></a>00825             <span class="keywordtype">int</span> minr, minc;
<a name="l00826"></a>00826             maxr = e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left-&gt;e.r.right.vp-&gt;row;
<a name="l00827"></a>00827             maxc = e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left-&gt;e.r.right.vp-&gt;col;
<a name="l00828"></a>00828             minr = e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left-&gt;e.r.left.vp-&gt;row;
<a name="l00829"></a>00829             minc = e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left-&gt;e.r.left.vp-&gt;col;
<a name="l00830"></a>00830             <span class="keywordflow">if</span> (minr&gt;maxr) r = maxr, maxr = minr, minr = r;
<a name="l00831"></a>00831             <span class="keywordflow">if</span> (minc&gt;maxc) c = maxc, maxc = minc, minc = c;
<a name="l00832"></a>00832                 <span class="keywordflow">switch</span> (e-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a>) {
<a name="l00833"></a>00833                     <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#afad4cd3fef3f7d50f95ee7713a58c59e">LOOKUP</a>:
<a name="l00834"></a>00834                         <span class="keywordflow">return</span> <a class="code" href="interp_8c.html#ada1acb175b41fcf664bb03ebbf054a4c">dolookup</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right, minr, minc, maxr, maxc,
<a name="l00835"></a>00835                                 1, minc==maxc);
<a name="l00836"></a>00836                     <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a3ede2116cb46920427dbd47638bd0520">HLOOKUP</a>:
<a name="l00837"></a>00837                         <span class="keywordflow">return</span> <a class="code" href="interp_8c.html#ada1acb175b41fcf664bb03ebbf054a4c">dolookup</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right-&gt;e.o.left, minr,minc,maxr,maxc,
<a name="l00838"></a>00838                             (<span class="keywordtype">int</span>) <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right-&gt;e.o.right), 0);
<a name="l00839"></a>00839                     <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ad09c432ea106e71a0121048889ce2fae">VLOOKUP</a>:
<a name="l00840"></a>00840                         <span class="keywordflow">return</span> <a class="code" href="interp_8c.html#ada1acb175b41fcf664bb03ebbf054a4c">dolookup</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right-&gt;e.o.left, minr,minc,maxr,maxc,
<a name="l00841"></a>00841                             (<span class="keywordtype">int</span>) <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right-&gt;e.o.right), 1);
<a name="l00842"></a>00842                     <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ac6885dbfb371c33e523c7fb046118b36">INDEX</a>:
<a name="l00843"></a>00843                         <span class="keywordflow">return</span> <a class="code" href="interp_8c.html#a6839370bd08ee5f4ecbb326bc17570b0">doindex</a>(minr, minc, maxr, maxc, e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right);
<a name="l00844"></a>00844                     <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a1319745524dbd8748dba95bb12b19f19">SUM</a>:
<a name="l00845"></a>00845                         <span class="keywordflow">return</span> <a class="code" href="interp_8c.html#a0bd4aae90247324aaa5167516de4e3fd">dosum</a>(minr, minc, maxr, maxc, e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right);
<a name="l00846"></a>00846                     <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a6fb685ced489c960ab8a71e915f72539">PROD</a>:
<a name="l00847"></a>00847                         <span class="keywordflow">return</span> <a class="code" href="interp_8c.html#aea381023ebf9f5a5564965d11d93b648">doprod</a>(minr, minc, maxr, maxc, e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right);
<a name="l00848"></a>00848                     <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ac377db81b810bff5ff74221befd2ccc0">AVG</a>:
<a name="l00849"></a>00849                         <span class="keywordflow">return</span> <a class="code" href="interp_8c.html#a8972e4ae6890f6eedbe4a3bc29a9f78f">doavg</a>(minr, minc, maxr, maxc, e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right);
<a name="l00850"></a>00850                     <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a698c124f1c293f98840449d6c5b9d984">COUNT</a>:
<a name="l00851"></a>00851                         <span class="keywordflow">return</span> <a class="code" href="interp_8c.html#ad7a8d2e1871740e53e41e45f0208c705">docount</a>(minr, minc, maxr, maxc, e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right);
<a name="l00852"></a>00852                     <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a87244bd2adfc822019823add7aa42514">STDDEV</a>:
<a name="l00853"></a>00853                         <span class="keywordflow">return</span> <a class="code" href="interp_8c.html#a0728581cbbe4bd0605ca8b1a3252c658">dostddev</a>(minr, minc, maxr, maxc, e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right);
<a name="l00854"></a>00854                     <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a392fb874e547e582e9c66a08a1f23326">MAX</a>:
<a name="l00855"></a>00855                         <span class="keywordflow">return</span> <a class="code" href="interp_8c.html#a2f74f447a71beea6dac5fd93573bb882">domax</a>(minr, minc, maxr, maxc, e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right);
<a name="l00856"></a>00856                     <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#adbd5cbe76e047a39e0a34f085cdae6fe">MIN</a>:
<a name="l00857"></a>00857                         <span class="keywordflow">return</span> <a class="code" href="interp_8c.html#a66be3be1c0dcff44041d9cbaaf7a22f8">domin</a>(minr, minc, maxr, maxc, e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right);
<a name="l00858"></a>00858                 }
<a name="l00859"></a>00859         }
<a name="l00860"></a>00860         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a76c64ace77ce430c5f0b1e614914825c">REDUCE</a> | <span class="charliteral">&#39;R&#39;</span>:
<a name="l00861"></a>00861         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a76c64ace77ce430c5f0b1e614914825c">REDUCE</a> | <span class="charliteral">&#39;C&#39;</span>:
<a name="l00862"></a>00862             {   <span class="keywordtype">int</span> r, c;
<a name="l00863"></a>00863                 <span class="keywordtype">int</span> maxr, maxc;
<a name="l00864"></a>00864                 <span class="keywordtype">int</span> minr, minc;
<a name="l00865"></a>00865                 maxr = e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#a665ccff1d13c8ee142d2278af000dfc9">r</a>.<a class="code" href="structrange__s.html#a86bf9abc26c383ebf69070b07a9d3375">right</a>.<a class="code" href="structent__ptr.html#abdf28c3ec0c48cd52cafbcd2825ae50b">vp</a>-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>;
<a name="l00866"></a>00866                 maxc = e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#a665ccff1d13c8ee142d2278af000dfc9">r</a>.<a class="code" href="structrange__s.html#a86bf9abc26c383ebf69070b07a9d3375">right</a>.<a class="code" href="structent__ptr.html#abdf28c3ec0c48cd52cafbcd2825ae50b">vp</a>-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>;
<a name="l00867"></a>00867                 minr = e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#a665ccff1d13c8ee142d2278af000dfc9">r</a>.left.vp-&gt;row;
<a name="l00868"></a>00868                 minc = e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#a665ccff1d13c8ee142d2278af000dfc9">r</a>.left.vp-&gt;col;
<a name="l00869"></a>00869                 <span class="keywordflow">if</span> (minr&gt;maxr) r = maxr, maxr = minr, minr = r;
<a name="l00870"></a>00870                 <span class="keywordflow">if</span> (minc&gt;maxc) c = maxc, maxc = minc, minc = c;
<a name="l00871"></a>00871                 <span class="keywordflow">switch</span> (e-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a>) {
<a name="l00872"></a>00872                     <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a76c64ace77ce430c5f0b1e614914825c">REDUCE</a> | <span class="charliteral">&#39;R&#39;</span>: <span class="keywordflow">return</span> (maxr - minr + 1);
<a name="l00873"></a>00873                     <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a76c64ace77ce430c5f0b1e614914825c">REDUCE</a> | <span class="charliteral">&#39;C&#39;</span>: <span class="keywordflow">return</span> (maxc - minc + 1);
<a name="l00874"></a>00874                 }
<a name="l00875"></a>00875             }
<a name="l00876"></a>00876         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a26e668489fb528456f4bc54ba908d5b4">ABS</a>:        <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#ac3d45fb773fc23770d0e7261c9f32bb7">fn1_eval</a>( fabs, <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left)));
<a name="l00877"></a>00877         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ac0968392c2b2fc716807863a5fa7d5f1">ACOS</a>:       <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#ac3d45fb773fc23770d0e7261c9f32bb7">fn1_eval</a>( acos, <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left)));
<a name="l00878"></a>00878         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a2fefd27702dc315df5aa8418055b9576">ASIN</a>:       <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#ac3d45fb773fc23770d0e7261c9f32bb7">fn1_eval</a>( asin, <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left)));
<a name="l00879"></a>00879         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a417dfa30ded09b26e9d0216adccab21e">ATAN</a>:       <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#ac3d45fb773fc23770d0e7261c9f32bb7">fn1_eval</a>( atan, <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left)));
<a name="l00880"></a>00880         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ac0c1f033adeb97850cce1712ad1b09e2">ATAN2</a>:      <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#aeb980433772df4965a55ee593d200ea0">fn2_eval</a>( atan2, <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left), <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right)));
<a name="l00881"></a>00881         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ae942a914db9767fa4fde805a268004e0">CEIL</a>:       <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#ac3d45fb773fc23770d0e7261c9f32bb7">fn1_eval</a>( ceil, <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left)));
<a name="l00882"></a>00882         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#af1af2de870caad797b91210f0fc6fe78">COS</a>:        <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#ac3d45fb773fc23770d0e7261c9f32bb7">fn1_eval</a>( cos, <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left)));
<a name="l00883"></a>00883         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a84db90500a1f9527c04e28817d9f60a1">EXP</a>:        <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#ac3d45fb773fc23770d0e7261c9f32bb7">fn1_eval</a>( exp, <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left)));
<a name="l00884"></a>00884         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#af0175ba905b01f1a4ba753b6961473c5">FABS</a>:       <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#ac3d45fb773fc23770d0e7261c9f32bb7">fn1_eval</a>( fabs, <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left)));
<a name="l00885"></a>00885         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a1082f0d0b3b2f687958ea044cb0cd306">FLOOR</a>:      <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#ac3d45fb773fc23770d0e7261c9f32bb7">fn1_eval</a>( floor, <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left)));
<a name="l00886"></a>00886         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a3c7ad9d42d16f4b60697ceec2034c2f1">HYPOT</a>:      <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#aeb980433772df4965a55ee593d200ea0">fn2_eval</a>( hypot, <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left), <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right)));
<a name="l00887"></a>00887         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a159ca84d25a5487d8e81e4438725df19">LOG</a>:        <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#ac3d45fb773fc23770d0e7261c9f32bb7">fn1_eval</a>( log, <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left)));
<a name="l00888"></a>00888         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a386bc1bec332d5809e3c5e5be1f47a5d">LOG10</a>:      <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#ac3d45fb773fc23770d0e7261c9f32bb7">fn1_eval</a>( log10, <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left)));
<a name="l00889"></a>00889         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a7d36eb793ee8943f856044317659fbf1">POW</a>:        <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#aeb980433772df4965a55ee593d200ea0">fn2_eval</a>( pow, <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left), <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right)));
<a name="l00890"></a>00890         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ac80ce9955a1af2ab7aa3a67251ec9f5c">SIN</a>:        <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#ac3d45fb773fc23770d0e7261c9f32bb7">fn1_eval</a>( sin, <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left)));
<a name="l00891"></a>00891         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a095e93222540fb38e433670cf08b5a46">SQRT</a>:       <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#ac3d45fb773fc23770d0e7261c9f32bb7">fn1_eval</a>( sqrt, <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left)));
<a name="l00892"></a>00892         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a3f6118fca436bd2827d5fd0f998f665d">TAN</a>:        <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#ac3d45fb773fc23770d0e7261c9f32bb7">fn1_eval</a>( tan, <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left)));
<a name="l00893"></a>00893         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a67198df5376db153ccd642a81d2623ad">DTR</a>:        <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#a8fb4cc3e5aa102c0e7060aa55d462a7a">dtr</a>(<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left)));
<a name="l00894"></a>00894         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ab6b71477e5e01a9588d5176b73bc346e">RTD</a>:        <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#a50eeee859bc3dae436a4fc61be76ca0e">rtd</a>(<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left)));
<a name="l00895"></a>00895         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a64d6f5c8106c7e39c1cc3b5d2b9699af">RND</a>:
<a name="l00896"></a>00896             <span class="keywordflow">if</span> (<a class="code" href="sc_8c.html#a54c0c7b8208fbf6dd0144473ee1650cd">rndtoeven</a>)
<a name="l00897"></a>00897                 <span class="keywordflow">return</span> <a class="code" href="interp_8c.html#a1da8e5cf1e1a1d41c1a030f094c44a03">rint</a>(<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left));
<a name="l00898"></a>00898             <span class="keywordflow">else</span> {
<a name="l00899"></a>00899                 <span class="keywordtype">double</span> temp = <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left);
<a name="l00900"></a>00900                 <span class="keywordflow">return</span> (temp - floor(temp) &lt; 0.5 ? floor(temp) : ceil(temp));
<a name="l00901"></a>00901             }
<a name="l00902"></a>00902         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#af144c56be720021d0c3a8075b87ff9b5">ROUND</a>:
<a name="l00903"></a>00903             {   <span class="keywordtype">int</span> <a class="code" href="psc_8c.html#ad8f226cf2051ad5bdb9658f3d2a41253">precision</a> = (int) <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right);
<a name="l00904"></a>00904                 <span class="keywordtype">double</span> scale = 1;
<a name="l00905"></a>00905                 <span class="keywordflow">if</span> (0 &lt; precision)
<a name="l00906"></a>00906                     <span class="keywordflow">do</span> scale *= 10; <span class="keywordflow">while</span> (0 &lt; --precision);
<a name="l00907"></a>00907                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (precision &lt; 0)
<a name="l00908"></a>00908                     <span class="keywordflow">do</span> scale /= 10; <span class="keywordflow">while</span> (++precision &lt; 0);
<a name="l00909"></a>00909 
<a name="l00910"></a>00910                 <span class="keywordflow">if</span> (<a class="code" href="sc_8c.html#a54c0c7b8208fbf6dd0144473ee1650cd">rndtoeven</a>)
<a name="l00911"></a>00911                     <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#a1da8e5cf1e1a1d41c1a030f094c44a03">rint</a>(<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left) * scale) / scale);
<a name="l00912"></a>00912                 <span class="keywordflow">else</span> {
<a name="l00913"></a>00913                     <span class="keywordtype">double</span> temp = <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left);
<a name="l00914"></a>00914                     temp *= scale;
<a name="l00915"></a>00915                     <span class="comment">/* xxx */</span>
<a name="l00916"></a>00916                     <span class="comment">/*</span>
<a name="l00917"></a>00917 <span class="comment">                    temp = (temp &gt; 0.0 ? floor(temp + 0.5) : ceil(temp - 0.5));</span>
<a name="l00918"></a>00918 <span class="comment">                    */</span>
<a name="l00919"></a>00919                     temp = ((temp - floor(temp)) &lt; 0.5 ?
<a name="l00920"></a>00920                             floor(temp) : ceil(temp));
<a name="l00921"></a>00921                     <span class="keywordflow">return</span> (temp / scale);
<a name="l00922"></a>00922                 }
<a name="l00923"></a>00923             }
<a name="l00924"></a>00924         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a2493b51e5d7913035483d04f68c57cec">FV</a>:
<a name="l00925"></a>00925         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a46b90e99485a21a2150e424cc2a4afba">PV</a>:
<a name="l00926"></a>00926         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a18dbd798cee76f2edc7b877b4c0fb400">PMT</a>:       <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#a68a2c34d08bab76e7ce896e577986867">finfunc</a>(e-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a>, <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left),
<a name="l00927"></a>00927                                     <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right-&gt;e.o.left),
<a name="l00928"></a>00928                                     <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right-&gt;e.o.right)));
<a name="l00929"></a>00929         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a4698ae12cf6a8acb5886fffd0ec897e6">HOUR</a>:      <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#a47d1a9a224fcab44f7c15f5a3db557c6">dotime</a>(<a class="code" href="sc_8h.html#a4698ae12cf6a8acb5886fffd0ec897e6">HOUR</a>, <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left)));
<a name="l00930"></a>00930         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ac1454fa04f41c693f39425697a137d82">MINUTE</a>:    <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#a47d1a9a224fcab44f7c15f5a3db557c6">dotime</a>(<a class="code" href="sc_8h.html#ac1454fa04f41c693f39425697a137d82">MINUTE</a>, <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left)));
<a name="l00931"></a>00931         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a94212be2394d2d37d9dfd33d07d82dba">SECOND</a>:    <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#a47d1a9a224fcab44f7c15f5a3db557c6">dotime</a>(<a class="code" href="sc_8h.html#a94212be2394d2d37d9dfd33d07d82dba">SECOND</a>, <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left)));
<a name="l00932"></a>00932         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a3729d06495d9713592f79f3122c9e677">MONTH</a>:     <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#a47d1a9a224fcab44f7c15f5a3db557c6">dotime</a>(<a class="code" href="sc_8h.html#a3729d06495d9713592f79f3122c9e677">MONTH</a>, <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left)));
<a name="l00933"></a>00933         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a509a01c55cbe47386fe24602b7c7fda1">DAY</a>:       <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#a47d1a9a224fcab44f7c15f5a3db557c6">dotime</a>(<a class="code" href="sc_8h.html#a509a01c55cbe47386fe24602b7c7fda1">DAY</a>, <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left)));
<a name="l00934"></a>00934         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a5871356500f559add06ea81d60331b1b">YEAR</a>:      <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#a47d1a9a224fcab44f7c15f5a3db557c6">dotime</a>(<a class="code" href="sc_8h.html#a5871356500f559add06ea81d60331b1b">YEAR</a>, <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left)));
<a name="l00935"></a>00935         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#acc4a9ad83f9350a588d117e0c8916d45">NOW</a>:       <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#a47d1a9a224fcab44f7c15f5a3db557c6">dotime</a>(<a class="code" href="sc_8h.html#acc4a9ad83f9350a588d117e0c8916d45">NOW</a>, (<span class="keywordtype">double</span>)0.0));
<a name="l00936"></a>00936         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a68a1aa466b92d843627484fe6757cac7">DTS</a>:       <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#ae3fa8e5dbfbbb5274b75d23799d8aa3c">dodts</a>((<span class="keywordtype">int</span>)<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left),
<a name="l00937"></a>00937                                     (<span class="keywordtype">int</span>)<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right-&gt;e.o.left),
<a name="l00938"></a>00938                                     (<span class="keywordtype">int</span>)<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right-&gt;e.o.right)));
<a name="l00939"></a>00939         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a201ee32eb38067857d67c95585041983">TTS</a>:       <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#a0eaa04f2b2e3b9e4002d84720b427691">dotts</a>((<span class="keywordtype">int</span>)<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left),
<a name="l00940"></a>00940                                     (<span class="keywordtype">int</span>)<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right-&gt;e.o.left),
<a name="l00941"></a>00941                                     (<span class="keywordtype">int</span>)<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right-&gt;e.o.right)));
<a name="l00942"></a>00942         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a06c35b4920003c4ec3a2309f810f25b2">STON</a>:      <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#a5282ee558e5fa91a8769f179eecef7cc">doston</a>(<a class="code" href="interp_8c.html#a08452d640cd2db36eb97e3979d6df576">seval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left)));
<a name="l00943"></a>00943         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a1b96fad41423e3cf4555538bb18d8257">EQS</a>:       <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#a59c95b70f40a33a7a54416c1d8b4e985">doeqs</a>(<a class="code" href="interp_8c.html#a08452d640cd2db36eb97e3979d6df576">seval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right), <a class="code" href="interp_8c.html#a08452d640cd2db36eb97e3979d6df576">seval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left)));
<a name="l00944"></a>00944         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a5b086514f6963b35ee29bc954fc9b0f3">LMAX</a>:      <span class="keywordflow">return</span> <a class="code" href="interp_8c.html#af08728eb47fdd28f5c16e33c1f72f077">dolmax</a>(e);
<a name="l00945"></a>00945         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ad4719e154547547a009bed475dc2083c">LMIN</a>:      <span class="keywordflow">return</span> <a class="code" href="interp_8c.html#adb343f5ed626f2b0457b8e45994558a1">dolmin</a>(e);
<a name="l00946"></a>00946         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#aad0629d32299aee19cd8666a8e24a295">NVAL</a>:      <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#ac611ad3038e00a4dff365658866c7745">donval</a>(<a class="code" href="interp_8c.html#a08452d640cd2db36eb97e3979d6df576">seval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left),<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right)));
<a name="l00947"></a>00947         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a1301b2df65d4e84eb11eaf30c001058e">MYROW</a>:     <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>) (<a class="code" href="interp_8c.html#acb0cfad15ab1d25aabd8bf11950f787b">gmyrow</a> + <a class="code" href="interp_8c.html#a4405c775bda3aee041f992bdf4dc7792">rowoffset</a>));
<a name="l00948"></a>00948         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a326b65bcb34b827fb4a7d812e42106c3">MYCOL</a>:     <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>) (<a class="code" href="interp_8c.html#a4f852dc743977df0268fcdbec84353a2">gmycol</a> + <a class="code" href="interp_8c.html#af99a356889e60bd714423c716a090b0c">coloffset</a>));
<a name="l00949"></a>00949         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a609deb5c57a8c9851fdd62aa309f0291">LASTROW</a>:   <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>) <a class="code" href="sc_8c.html#ad692516c5ad5adc8f9f75c558f0138a0">maxrow</a>);
<a name="l00950"></a>00950         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a4571689acd41027b957b3a09fed31d8f">LASTCOL</a>:   <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>) <a class="code" href="sc_8c.html#a81ef4758a949baa6a6f8355f0e4d3280">maxcol</a>);
<a name="l00951"></a>00951         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a4f642f93c8f1598b0be986e84b7cf168">NUMITER</a>:   <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>) <a class="code" href="interp_8c.html#a97a3479da7464543c903d2072d0ffa91">repct</a>);
<a name="l00952"></a>00952         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a2e5646da89a3a7fc37c028da6af601b8">ERR_</a>:      cellerror = <a class="code" href="sc_8h.html#a21246343b17f2039f546f18e0e72cff6">CELLERROR</a>;
<a name="l00953"></a>00953                         <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>) 0);
<a name="l00954"></a>00954         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a564ffe67519ca25bde88566eac3c698a">PI_</a>:       <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>) <a class="code" href="interp_8c.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a>);
<a name="l00955"></a>00955         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a7b3b25cba33b07c303f3060fe41887f6">BLACK</a>:     <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>) COLOR_BLACK);
<a name="l00956"></a>00956         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a8d23feea868a983c8c2b661e1e16972f">RED</a>:       <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>) COLOR_RED);
<a name="l00957"></a>00957         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#acfbc006ea433ad708fdee3e82996e721">GREEN</a>:     <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>) COLOR_GREEN);
<a name="l00958"></a>00958         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#abf681265909adf3d3e8116c93c0ba179">YELLOW</a>:    <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>) COLOR_YELLOW);
<a name="l00959"></a>00959         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a79d10e672abb49ad63eeaa8aaef57c38">BLUE</a>:      <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>) COLOR_BLUE);
<a name="l00960"></a>00960         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a6f699060902f800f12aaae150f3a708e">MAGENTA</a>:   <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>) COLOR_MAGENTA);
<a name="l00961"></a>00961         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ad243f93c16bc4c1d3e0a13b84421d760">CYAN</a>:      <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>) COLOR_CYAN);
<a name="l00962"></a>00962         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a87b537f5fa5c109d3c05c13d6b18f382">WHITE</a>:     <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>) COLOR_WHITE);
<a name="l00963"></a>00963         <span class="keywordflow">default</span>:        <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a> (<span class="stringliteral">&quot;Illegal numeric expression&quot;</span>);
<a name="l00964"></a>00964                         <a class="code" href="interp_8c.html#a158d9d755a3b4e8262cc8e9ff1592b44">exprerr</a> = 1;
<a name="l00965"></a>00965     }
<a name="l00966"></a>00966     cellerror = <a class="code" href="sc_8h.html#a21246343b17f2039f546f18e0e72cff6">CELLERROR</a>;
<a name="l00967"></a>00967     <span class="keywordflow">return</span> ((<span class="keywordtype">double</span>)0.0);
<a name="l00968"></a>00968 }
<a name="l00969"></a>00969 
<a name="l00970"></a>00970 <span class="preprocessor">#ifdef SIGVOID</span>
<a name="l00971"></a>00971 <span class="preprocessor"></span><span class="keywordtype">void</span>
<a name="l00972"></a>00972 <span class="preprocessor">#else</span>
<a name="l00973"></a>00973 <span class="preprocessor"></span><span class="keywordtype">int</span>
<a name="l00974"></a>00974 <span class="preprocessor">#endif</span>
<a name="l00975"></a><a class="code" href="interp_8c.html#ad192e48d7fbfd4d91bf0e323834044cb">00975</a> <span class="preprocessor"></span><a class="code" href="interp_8c.html#ad192e48d7fbfd4d91bf0e323834044cb">eval_fpe</a>() <span class="comment">/* Trap for FPE errors in eval */</span>
<a name="l00976"></a>00976 {
<a name="l00977"></a>00977 <span class="preprocessor">#if defined(i386) &amp;&amp; !defined(M_XENIX)</span>
<a name="l00978"></a>00978 <span class="preprocessor"></span>    <span class="keyword">asm</span>(<span class="stringliteral">&quot;       fnclex&quot;</span>);
<a name="l00979"></a>00979     <span class="keyword">asm</span>(<span class="stringliteral">&quot;       fwait&quot;</span>);
<a name="l00980"></a>00980 <span class="preprocessor">#else</span>
<a name="l00981"></a>00981 <span class="preprocessor"></span><span class="preprocessor">#ifdef IEEE_MATH</span>
<a name="l00982"></a>00982 <span class="preprocessor"></span>    (void)fpsetsticky((fp_except)0);    <span class="comment">/* Clear exception */</span>
<a name="l00983"></a>00983 <span class="preprocessor">#endif </span><span class="comment">/* IEEE_MATH */</span>
<a name="l00984"></a>00984 <span class="preprocessor">#ifdef PC</span>
<a name="l00985"></a>00985 <span class="preprocessor"></span>    _fpreset();
<a name="l00986"></a>00986 <span class="preprocessor">#endif</span>
<a name="l00987"></a>00987 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00988"></a>00988 <span class="preprocessor"></span>    <span class="comment">/* re-establish signal handler for next time */</span>
<a name="l00989"></a>00989     (void) signal(SIGFPE, <a class="code" href="interp_8c.html#ad192e48d7fbfd4d91bf0e323834044cb">eval_fpe</a>);
<a name="l00990"></a>00990     longjmp(<a class="code" href="interp_8c.html#a32f86b7c541e3f352078b7a2bfa115cb">fpe_save</a>, 1);
<a name="l00991"></a>00991 }
<a name="l00992"></a>00992 
<a name="l00993"></a>00993 <span class="keywordtype">double</span>
<a name="l00994"></a><a class="code" href="interp_8c.html#ac3d45fb773fc23770d0e7261c9f32bb7">00994</a> <a class="code" href="interp_8c.html#ac3d45fb773fc23770d0e7261c9f32bb7">fn1_eval</a>(<span class="keywordtype">double</span> (*fn)(), <span class="keywordtype">double</span> <a class="code" href="sc_8c.html#af09bff4320de23f28f0d261c3b124d6b">arg</a>)
<a name="l00995"></a>00995 {
<a name="l00996"></a>00996     <span class="keywordtype">double</span> res;
<a name="l00997"></a>00997     errno = 0;
<a name="l00998"></a>00998     res = (*fn)(<a class="code" href="sc_8c.html#af09bff4320de23f28f0d261c3b124d6b">arg</a>);
<a name="l00999"></a>00999     <span class="keywordflow">if</span> (errno)
<a name="l01000"></a>01000         cellerror = <a class="code" href="sc_8h.html#a21246343b17f2039f546f18e0e72cff6">CELLERROR</a>;
<a name="l01001"></a>01001 
<a name="l01002"></a>01002     <span class="keywordflow">return</span> res;
<a name="l01003"></a>01003 }
<a name="l01004"></a>01004 
<a name="l01005"></a>01005 <span class="keywordtype">double</span>
<a name="l01006"></a><a class="code" href="interp_8c.html#aeb980433772df4965a55ee593d200ea0">01006</a> <a class="code" href="interp_8c.html#aeb980433772df4965a55ee593d200ea0">fn2_eval</a>(<span class="keywordtype">double</span> (*fn)(), <span class="keywordtype">double</span> arg1, <span class="keywordtype">double</span> arg2)
<a name="l01007"></a>01007 {
<a name="l01008"></a>01008     <span class="keywordtype">double</span> res;
<a name="l01009"></a>01009     errno = 0;
<a name="l01010"></a>01010     res = (*fn)(arg1, arg2);
<a name="l01011"></a>01011     <span class="keywordflow">if</span> (errno)
<a name="l01012"></a>01012         cellerror = <a class="code" href="sc_8h.html#a21246343b17f2039f546f18e0e72cff6">CELLERROR</a>;
<a name="l01013"></a>01013 
<a name="l01014"></a>01014     <span class="keywordflow">return</span> res;
<a name="l01015"></a>01015 }
<a name="l01016"></a>01016 
<a name="l01017"></a>01017 <span class="comment">/* </span>
<a name="l01018"></a>01018 <span class="comment"> * Rules for string functions:</span>
<a name="l01019"></a>01019 <span class="comment"> * Take string arguments which they scxfree.</span>
<a name="l01020"></a>01020 <span class="comment"> * All returned strings are assumed to be xalloced.</span>
<a name="l01021"></a>01021 <span class="comment"> */</span>
<a name="l01022"></a>01022 
<a name="l01023"></a>01023 <span class="keywordtype">char</span> *
<a name="l01024"></a><a class="code" href="interp_8c.html#a23144a8dba658141a83f929f25281582">01024</a> <a class="code" href="interp_8c.html#a23144a8dba658141a83f929f25281582">docat</a>(<span class="keyword">register</span> <span class="keywordtype">char</span> *s1, <span class="keyword">register</span> <span class="keywordtype">char</span> *s2)
<a name="l01025"></a>01025 {
<a name="l01026"></a>01026     <span class="keyword">register</span> <span class="keywordtype">char</span> *p;
<a name="l01027"></a>01027     <span class="keywordtype">char</span> *arg1, *arg2;
<a name="l01028"></a>01028 
<a name="l01029"></a>01029     <span class="keywordflow">if</span> (!s1 &amp;&amp; !s2)
<a name="l01030"></a>01030         <span class="keywordflow">return</span> ((<span class="keywordtype">char</span> *)0);
<a name="l01031"></a>01031     arg1 = s1 ? s1 : <span class="stringliteral">&quot;&quot;</span>;
<a name="l01032"></a>01032     arg2 = s2 ? s2 : <span class="stringliteral">&quot;&quot;</span>;
<a name="l01033"></a>01033     p = <a class="code" href="pxmalloc_8c.html#a7119be33744c04e41b75e9edc14a3a46">scxmalloc</a>((<span class="keywordtype">size_t</span>)(strlen(arg1)+strlen(arg2)+1));
<a name="l01034"></a>01034     (void) strcpy(p, arg1);
<a name="l01035"></a>01035     (void) strcat(p, arg2);
<a name="l01036"></a>01036     <span class="keywordflow">if</span> (s1)
<a name="l01037"></a>01037         <a class="code" href="pxmalloc_8c.html#a319bd47b6e3c09b65d3d666d7007bdc3">scxfree</a>(s1);
<a name="l01038"></a>01038     <span class="keywordflow">if</span> (s2)
<a name="l01039"></a>01039         <a class="code" href="pxmalloc_8c.html#a319bd47b6e3c09b65d3d666d7007bdc3">scxfree</a>(s2);
<a name="l01040"></a>01040     <span class="keywordflow">return</span> (p);
<a name="l01041"></a>01041 }
<a name="l01042"></a>01042 
<a name="l01043"></a>01043 <span class="keywordtype">char</span> *
<a name="l01044"></a><a class="code" href="interp_8c.html#a574b075333345b42609501bea960cd92">01044</a> <a class="code" href="interp_8c.html#a574b075333345b42609501bea960cd92">dodate</a>(time_t tloc, <span class="keywordtype">char</span> *fmtstr)
<a name="l01045"></a>01045 {
<a name="l01046"></a>01046     <span class="keywordtype">char</span> buff[<a class="code" href="sc_8h.html#aef520e00f11331d7f27efc0be0707a5e">FBUFLEN</a>];
<a name="l01047"></a>01047     <span class="keywordtype">char</span> *p;
<a name="l01048"></a>01048 
<a name="l01049"></a>01049     <span class="keywordflow">if</span> (!fmtstr)
<a name="l01050"></a>01050         fmtstr = <span class="stringliteral">&quot;%a %b %d %H:%M:%S %Y&quot;</span>;
<a name="l01051"></a>01051     strftime(buff, <a class="code" href="sc_8h.html#aef520e00f11331d7f27efc0be0707a5e">FBUFLEN</a>, fmtstr, localtime(&amp;tloc));
<a name="l01052"></a>01052     p = <a class="code" href="pxmalloc_8c.html#a7119be33744c04e41b75e9edc14a3a46">scxmalloc</a>((<span class="keywordtype">size_t</span>)(strlen(buff)+1));
<a name="l01053"></a>01053     (void) strcpy(p, buff);
<a name="l01054"></a>01054     <span class="keywordflow">return</span> (p);
<a name="l01055"></a>01055 }
<a name="l01056"></a>01056 
<a name="l01057"></a>01057 
<a name="l01058"></a>01058 <span class="keywordtype">char</span> *
<a name="l01059"></a><a class="code" href="interp_8c.html#af8111a4f6b3e57fcc9d473ced0ef387f">01059</a> <a class="code" href="interp_8c.html#af8111a4f6b3e57fcc9d473ced0ef387f">dofmt</a>(<span class="keywordtype">char</span> *fmtstr, <span class="keywordtype">double</span> <a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>)
<a name="l01060"></a>01060 {
<a name="l01061"></a>01061     <span class="keywordtype">char</span> buff[<a class="code" href="sc_8h.html#aef520e00f11331d7f27efc0be0707a5e">FBUFLEN</a>];
<a name="l01062"></a>01062     <span class="keywordtype">char</span> *p;
<a name="l01063"></a>01063 
<a name="l01064"></a>01064     <span class="keywordflow">if</span> (!fmtstr)
<a name="l01065"></a>01065         <span class="keywordflow">return</span> ((<span class="keywordtype">char</span> *)0);
<a name="l01066"></a>01066     (void) snprintf(buff, <a class="code" href="sc_8h.html#aef520e00f11331d7f27efc0be0707a5e">FBUFLEN</a>, fmtstr, v);
<a name="l01067"></a>01067     p = <a class="code" href="pxmalloc_8c.html#a7119be33744c04e41b75e9edc14a3a46">scxmalloc</a>((<span class="keywordtype">size_t</span>)(strlen(buff)+1));
<a name="l01068"></a>01068     (void) strcpy(p, buff);
<a name="l01069"></a>01069     <a class="code" href="pxmalloc_8c.html#a319bd47b6e3c09b65d3d666d7007bdc3">scxfree</a>(fmtstr);
<a name="l01070"></a>01070     <span class="keywordflow">return</span> (p);
<a name="l01071"></a>01071 }
<a name="l01072"></a>01072 
<a name="l01073"></a>01073 
<a name="l01074"></a>01074 <span class="comment">/*</span>
<a name="l01075"></a>01075 <span class="comment"> * Given a command name and a value, run the command with the given value and</span>
<a name="l01076"></a>01076 <span class="comment"> * read and return its first output line (only) as an allocated string, always</span>
<a name="l01077"></a>01077 <span class="comment"> * a copy of se-&gt;e.o.s, which is set appropriately first unless external</span>
<a name="l01078"></a>01078 <span class="comment"> * functions are disabled, in which case the previous value is used.  The</span>
<a name="l01079"></a>01079 <span class="comment"> * handling of se-&gt;e.o.s and freeing of command is tricky.  Returning an</span>
<a name="l01080"></a>01080 <span class="comment"> * allocated string in all cases, even if null, insures cell expressions are</span>
<a name="l01081"></a>01081 <span class="comment"> * written to files, etc.</span>
<a name="l01082"></a>01082 <span class="comment"> */</span>
<a name="l01083"></a>01083 
<a name="l01084"></a>01084 <span class="preprocessor">#if defined(VMS) || defined(MSDOS)</span>
<a name="l01085"></a>01085 <span class="preprocessor"></span><span class="keywordtype">char</span> *
<a name="l01086"></a>01086 <a class="code" href="interp_8c.html#a26d3b167fc4c3fc33a2a04977fd8e353">doext</a>(<span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *se)
<a name="l01087"></a>01087 {
<a name="l01088"></a>01088     <span class="keywordtype">char</span> *command = <a class="code" href="interp_8c.html#a08452d640cd2db36eb97e3979d6df576">seval</a>(se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left);
<a name="l01089"></a>01089     <span class="keywordtype">double</span> value = <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right);
<a name="l01090"></a>01090 
<a name="l01091"></a>01091     <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot;Warning: External functions unavailable on VMS&quot;</span>);
<a name="l01092"></a>01092     cellerror = <a class="code" href="sc_8h.html#a21246343b17f2039f546f18e0e72cff6">CELLERROR</a>;      <span class="comment">/* not sure if this should be a cellerror */</span>
<a name="l01093"></a>01093     <span class="keywordflow">if</span> (command)
<a name="l01094"></a>01094         <a class="code" href="pxmalloc_8c.html#a319bd47b6e3c09b65d3d666d7007bdc3">scxfree</a>(command);
<a name="l01095"></a>01095     <span class="keywordflow">return</span> (strcpy(<a class="code" href="pxmalloc_8c.html#a7119be33744c04e41b75e9edc14a3a46">scxmalloc</a>((<span class="keywordtype">size_t</span>) 1), <span class="stringliteral">&quot;\0&quot;</span>));
<a name="l01096"></a>01096 }
<a name="l01097"></a>01097 
<a name="l01098"></a>01098 <span class="preprocessor">#else </span><span class="comment">/* VMS */</span>
<a name="l01099"></a>01099 
<a name="l01100"></a>01100 <span class="keywordtype">char</span> *
<a name="l01101"></a><a class="code" href="interp_8c.html#a26d3b167fc4c3fc33a2a04977fd8e353">01101</a> <a class="code" href="interp_8c.html#a26d3b167fc4c3fc33a2a04977fd8e353">doext</a>(<span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *se)
<a name="l01102"></a>01102 {
<a name="l01103"></a>01103     <span class="keywordtype">char</span> buff[<a class="code" href="sc_8h.html#aef520e00f11331d7f27efc0be0707a5e">FBUFLEN</a>];         <span class="comment">/* command line/return, not permanently alloc */</span>
<a name="l01104"></a>01104     <span class="keywordtype">char</span> *command;
<a name="l01105"></a>01105     <span class="keywordtype">double</span> value;
<a name="l01106"></a>01106 
<a name="l01107"></a>01107     command = <a class="code" href="interp_8c.html#a08452d640cd2db36eb97e3979d6df576">seval</a>(se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left);
<a name="l01108"></a>01108     value = <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right);
<a name="l01109"></a>01109     <span class="keywordflow">if</span> (!<a class="code" href="interp_8c.html#a570a6d0484a98c1b413f297d6afc738e">extfunc</a>) {
<a name="l01110"></a>01110         <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot;Warning: external functions disabled; using %s value&quot;</span>,
<a name="l01111"></a>01111                 (se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.s &amp;&amp; *se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.s) ? <span class="stringliteral">&quot;previous&quot;</span> : <span class="stringliteral">&quot;null&quot;</span>);
<a name="l01112"></a>01112 
<a name="l01113"></a>01113         <span class="keywordflow">if</span> (command) <a class="code" href="pxmalloc_8c.html#a319bd47b6e3c09b65d3d666d7007bdc3">scxfree</a>(command);
<a name="l01114"></a>01114     } <span class="keywordflow">else</span> {
<a name="l01115"></a>01115         <span class="keywordflow">if</span> ((! command) || (! *command)) {
<a name="l01116"></a>01116             <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a> (<span class="stringliteral">&quot;Warning: external function given null command name&quot;</span>);
<a name="l01117"></a>01117             cellerror = <a class="code" href="sc_8h.html#a21246343b17f2039f546f18e0e72cff6">CELLERROR</a>;
<a name="l01118"></a>01118             <span class="keywordflow">if</span> (command) <a class="code" href="pxmalloc_8c.html#a319bd47b6e3c09b65d3d666d7007bdc3">scxfree</a>(command);
<a name="l01119"></a>01119         } <span class="keywordflow">else</span> {
<a name="l01120"></a>01120             FILE *pp;
<a name="l01121"></a>01121 
<a name="l01122"></a>01122             (void) sprintf(buff, <span class="stringliteral">&quot;%s %g&quot;</span>, command, value); <span class="comment">/* build cmd line */</span>
<a name="l01123"></a>01123             <a class="code" href="pxmalloc_8c.html#a319bd47b6e3c09b65d3d666d7007bdc3">scxfree</a>(command);
<a name="l01124"></a>01124 
<a name="l01125"></a>01125             <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot;Running external function...&quot;</span>);
<a name="l01126"></a>01126             (void) refresh();
<a name="l01127"></a>01127 
<a name="l01128"></a>01128             <span class="keywordflow">if</span> ((pp = popen(buff, <span class="stringliteral">&quot;r&quot;</span>)) == (FILE *) NULL) {     <span class="comment">/* run it */</span>
<a name="l01129"></a>01129                 <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot;Warning: running \&quot;%s\&quot; failed&quot;</span>, buff);
<a name="l01130"></a>01130                 cellerror = <a class="code" href="sc_8h.html#a21246343b17f2039f546f18e0e72cff6">CELLERROR</a>;
<a name="l01131"></a>01131             } <span class="keywordflow">else</span> {
<a name="l01132"></a>01132                 <span class="keywordflow">if</span> (fgets(buff, <span class="keyword">sizeof</span>(buff)-1, pp) == NULL)    <span class="comment">/* one line */</span>
<a name="l01133"></a>01133                     <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot;Warning: external function returned nothing&quot;</span>);
<a name="l01134"></a>01134                 <span class="keywordflow">else</span> {
<a name="l01135"></a>01135                     <span class="keywordtype">char</span> *cp;
<a name="l01136"></a>01136 
<a name="l01137"></a>01137                     <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot;&quot;</span>);                          <span class="comment">/* erase notice */</span>
<a name="l01138"></a>01138                     buff[<span class="keyword">sizeof</span>(buff)-1] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l01139"></a>01139 
<a name="l01140"></a>01140                     <span class="keywordflow">if</span> ((cp = strchr(buff, <span class="charliteral">&#39;\n&#39;</span>)))      <span class="comment">/* contains newline */</span>
<a name="l01141"></a>01141                         *cp = <span class="charliteral">&#39;\0&#39;</span>;                     <span class="comment">/* end string there */</span>
<a name="l01142"></a>01142 
<a name="l01143"></a>01143                     <span class="keywordflow">if</span> (!se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.s || strlen(buff) != strlen(se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.s))
<a name="l01144"></a>01144                         se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.s = <a class="code" href="pxmalloc_8c.html#aa07d01895f9f3e60109884504729a590">scxrealloc</a>(se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.s, strlen(buff));
<a name="l01145"></a>01145                     (void) strcpy (se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.s, buff);
<a name="l01146"></a>01146                          <span class="comment">/* save alloc&#39;d copy */</span>
<a name="l01147"></a>01147                 }
<a name="l01148"></a>01148                 (void) pclose(pp);
<a name="l01149"></a>01149 
<a name="l01150"></a>01150             } <span class="comment">/* else */</span>
<a name="l01151"></a>01151         } <span class="comment">/* else */</span>
<a name="l01152"></a>01152     } <span class="comment">/* else */</span>
<a name="l01153"></a>01153     <span class="keywordflow">if</span> (se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.s)
<a name="l01154"></a>01154         <span class="keywordflow">return</span> (strcpy(<a class="code" href="pxmalloc_8c.html#a7119be33744c04e41b75e9edc14a3a46">scxmalloc</a>((<span class="keywordtype">size_t</span>) (strlen(se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.s)+1)), se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.s));
<a name="l01155"></a>01155     <span class="keywordflow">else</span>
<a name="l01156"></a>01156         <span class="keywordflow">return</span> (strcpy(<a class="code" href="pxmalloc_8c.html#a7119be33744c04e41b75e9edc14a3a46">scxmalloc</a>((<span class="keywordtype">size_t</span>)1), <span class="stringliteral">&quot;&quot;</span>));
<a name="l01157"></a>01157 }
<a name="l01158"></a>01158 
<a name="l01159"></a>01159 <span class="preprocessor">#endif </span><span class="comment">/* VMS */</span>
<a name="l01160"></a>01160 
<a name="l01161"></a>01161 
<a name="l01162"></a>01162 <span class="comment">/*</span>
<a name="l01163"></a>01163 <span class="comment"> * Given a string representing a column name and a value which is a column</span>
<a name="l01164"></a>01164 <span class="comment"> * number, return the selected cell&#39;s string value, if any.  Even if none,</span>
<a name="l01165"></a>01165 <span class="comment"> * still allocate and return a null string so the cell has a label value so</span>
<a name="l01166"></a>01166 <span class="comment"> * the expression is saved in a file, etc.</span>
<a name="l01167"></a>01167 <span class="comment"> */</span>
<a name="l01168"></a>01168 
<a name="l01169"></a>01169 <span class="keywordtype">char</span> *
<a name="l01170"></a><a class="code" href="interp_8c.html#aeb4956b9601164b7ccb7e36d7d29c291">01170</a> <a class="code" href="interp_8c.html#aeb4956b9601164b7ccb7e36d7d29c291">dosval</a>(<span class="keywordtype">char</span> *colstr, <span class="keywordtype">double</span> rowdoub)
<a name="l01171"></a>01171 {
<a name="l01172"></a>01172     <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *ep;
<a name="l01173"></a>01173     <span class="keywordtype">char</span> *llabel;
<a name="l01174"></a>01174 
<a name="l01175"></a>01175     llabel = (ep = <a class="code" href="interp_8c.html#a9c976c6025f769e23a865fac48cc8955">getent</a>(colstr, rowdoub)) ? (ep -&gt; <a class="code" href="interp_8c.html#a6d4c5de1bc33dd46b15352c75255dff0">label</a>) : <span class="stringliteral">&quot;&quot;</span>;
<a name="l01176"></a>01176     <span class="keywordflow">return</span> (strcpy(<a class="code" href="pxmalloc_8c.html#a7119be33744c04e41b75e9edc14a3a46">scxmalloc</a>((<span class="keywordtype">size_t</span>) (strlen(llabel) + 1)), llabel));
<a name="l01177"></a>01177 }
<a name="l01178"></a>01178 
<a name="l01179"></a>01179 
<a name="l01180"></a>01180 <span class="comment">/*</span>
<a name="l01181"></a>01181 <span class="comment"> * Substring:  Note that v1 and v2 are one-based to users, but zero-based</span>
<a name="l01182"></a>01182 <span class="comment"> * when calling this routine.</span>
<a name="l01183"></a>01183 <span class="comment"> */</span>
<a name="l01184"></a>01184 
<a name="l01185"></a>01185 <span class="keywordtype">char</span> *
<a name="l01186"></a><a class="code" href="interp_8c.html#a69b9456f83a5ac4a589de08e288245cd">01186</a> <a class="code" href="interp_8c.html#a69b9456f83a5ac4a589de08e288245cd">dosubstr</a>(<span class="keywordtype">char</span> *s, <span class="keyword">register</span> <span class="keywordtype">int</span> v1, <span class="keyword">register</span> <span class="keywordtype">int</span> v2)
<a name="l01187"></a>01187 {
<a name="l01188"></a>01188     <span class="keyword">register</span> <span class="keywordtype">char</span> *s1, *s2;
<a name="l01189"></a>01189     <span class="keywordtype">char</span> *p;
<a name="l01190"></a>01190 
<a name="l01191"></a>01191     <span class="keywordflow">if</span> (!s)
<a name="l01192"></a>01192         <span class="keywordflow">return</span> ((<span class="keywordtype">char</span> *)0);
<a name="l01193"></a>01193 
<a name="l01194"></a>01194     <span class="keywordflow">if</span> (v2 &gt;= strlen(s))                <span class="comment">/* past end */</span>
<a name="l01195"></a>01195         v2 =  strlen(s) - 1;            <span class="comment">/* to end   */</span>
<a name="l01196"></a>01196 
<a name="l01197"></a>01197     <span class="keywordflow">if</span> (v1 &lt; 0 || v1 &gt; v2) {            <span class="comment">/* out of range, return null string */</span>
<a name="l01198"></a>01198         <a class="code" href="pxmalloc_8c.html#a319bd47b6e3c09b65d3d666d7007bdc3">scxfree</a>(s);
<a name="l01199"></a>01199         p = <a class="code" href="pxmalloc_8c.html#a7119be33744c04e41b75e9edc14a3a46">scxmalloc</a>((<span class="keywordtype">size_t</span>)1);
<a name="l01200"></a>01200         p[0] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l01201"></a>01201         <span class="keywordflow">return</span> (p);
<a name="l01202"></a>01202     }
<a name="l01203"></a>01203     s2 = p = <a class="code" href="pxmalloc_8c.html#a7119be33744c04e41b75e9edc14a3a46">scxmalloc</a>((<span class="keywordtype">size_t</span>)(v2-v1+2));
<a name="l01204"></a>01204     s1 = &amp;s[v1];
<a name="l01205"></a>01205     <span class="keywordflow">for</span> (; v1 &lt;= v2; s1++, s2++, v1++)
<a name="l01206"></a>01206         *s2 = *s1;
<a name="l01207"></a>01207     *s2 = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l01208"></a>01208     <a class="code" href="pxmalloc_8c.html#a319bd47b6e3c09b65d3d666d7007bdc3">scxfree</a>(s);
<a name="l01209"></a>01209     <span class="keywordflow">return</span>(p);
<a name="l01210"></a>01210 }
<a name="l01211"></a>01211 
<a name="l01212"></a>01212 <span class="comment">/*</span>
<a name="l01213"></a>01213 <span class="comment"> * character casing: make upper case, make lower case</span>
<a name="l01214"></a>01214 <span class="comment"> */</span>
<a name="l01215"></a>01215 
<a name="l01216"></a>01216 <span class="keywordtype">char</span> *
<a name="l01217"></a><a class="code" href="interp_8c.html#afed7d13d0a43dabbe96f1b99194d4713">01217</a> <a class="code" href="interp_8c.html#afed7d13d0a43dabbe96f1b99194d4713">docase</a>(<span class="keywordtype">int</span> acase, <span class="keywordtype">char</span> *s)
<a name="l01218"></a>01218 {
<a name="l01219"></a>01219     <span class="keywordtype">char</span> *p = s;
<a name="l01220"></a>01220 
<a name="l01221"></a>01221     <span class="keywordflow">if</span> (s == NULL)
<a name="l01222"></a>01222         <span class="keywordflow">return</span>(NULL);
<a name="l01223"></a>01223 
<a name="l01224"></a>01224     <span class="keywordflow">if</span>( acase == <a class="code" href="sc_8h.html#ab7a309e1cb06fb6bcbd4314371443416">UPPER</a> ) {
<a name="l01225"></a>01225         <span class="keywordflow">while</span>( *p != <span class="charliteral">&#39;\0&#39;</span> ) {
<a name="l01226"></a>01226            <span class="keywordflow">if</span>( islower(*p) )
<a name="l01227"></a>01227                 *p = toupper(*p);
<a name="l01228"></a>01228            p++;
<a name="l01229"></a>01229         }
<a name="l01230"></a>01230     }
<a name="l01231"></a>01231     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (acase == <a class="code" href="sc_8h.html#aaa9295df3f8f6033cae4b89cc7e5ff29">LOWER</a>) {
<a name="l01232"></a>01232         <span class="keywordflow">while</span> (*p != <span class="charliteral">&#39;\0&#39;</span>) {
<a name="l01233"></a>01233             <span class="keywordflow">if</span> (isupper(*p))
<a name="l01234"></a>01234                 *p = tolower(*p);
<a name="l01235"></a>01235             p++;
<a name="l01236"></a>01236         }
<a name="l01237"></a>01237     }
<a name="l01238"></a>01238     <span class="keywordflow">return</span> (s);
<a name="l01239"></a>01239 }
<a name="l01240"></a>01240 
<a name="l01241"></a>01241 <span class="comment">/*</span>
<a name="l01242"></a>01242 <span class="comment"> * make proper capitals of every word in a string</span>
<a name="l01243"></a>01243 <span class="comment"> * if the string has mixed case we say the string is lower</span>
<a name="l01244"></a>01244 <span class="comment"> *      and we will upcase only first letters of words</span>
<a name="l01245"></a>01245 <span class="comment"> * if the string is all upper we will lower rest of words.</span>
<a name="l01246"></a>01246 <span class="comment"> */</span>
<a name="l01247"></a>01247 
<a name="l01248"></a>01248 <span class="keywordtype">char</span> *
<a name="l01249"></a><a class="code" href="interp_8c.html#a86697536a1eeafa8d182866a963a7f03">01249</a> <a class="code" href="interp_8c.html#a86697536a1eeafa8d182866a963a7f03">docapital</a>(<span class="keywordtype">char</span> *s)
<a name="l01250"></a>01250 {
<a name="l01251"></a>01251     <span class="keywordtype">char</span> *p;
<a name="l01252"></a>01252     <span class="keywordtype">int</span> skip = 1;
<a name="l01253"></a>01253     <span class="keywordtype">int</span> AllUpper = 1;
<a name="l01254"></a>01254 
<a name="l01255"></a>01255     <span class="keywordflow">if</span> (s == NULL)
<a name="l01256"></a>01256         <span class="keywordflow">return</span> (NULL);
<a name="l01257"></a>01257     <span class="keywordflow">for</span> (p = s; *p != <span class="charliteral">&#39;\0&#39;</span> &amp;&amp; AllUpper != 0; p++)
<a name="l01258"></a>01258         <span class="keywordflow">if</span> (isalpha(*p) &amp;&amp; islower(*p))  AllUpper = 0;
<a name="l01259"></a>01259     <span class="keywordflow">for</span> (p = s; *p != <span class="charliteral">&#39;\0&#39;</span>; p++) {
<a name="l01260"></a>01260         <span class="keywordflow">if</span> (!isalnum(*p))
<a name="l01261"></a>01261                 skip = 1;
<a name="l01262"></a>01262         <span class="keywordflow">else</span>
<a name="l01263"></a>01263         <span class="keywordflow">if</span> (skip == 1) {
<a name="l01264"></a>01264             skip = 0;
<a name="l01265"></a>01265             <span class="keywordflow">if</span> (islower(*p))
<a name="l01266"></a>01266                 *p = toupper(*p);
<a name="l01267"></a>01267         }
<a name="l01268"></a>01268         <span class="keywordflow">else</span>    <span class="comment">/* if the string was all upper before */</span>
<a name="l01269"></a>01269         <span class="keywordflow">if</span> (isupper(*p) &amp;&amp; AllUpper != 0)
<a name="l01270"></a>01270             *p = tolower(*p);
<a name="l01271"></a>01271     }
<a name="l01272"></a>01272     <span class="keywordflow">return</span> (s);
<a name="l01273"></a>01273 }
<a name="l01274"></a>01274 
<a name="l01275"></a>01275 <span class="keywordtype">char</span> *
<a name="l01276"></a><a class="code" href="sc_8h.html#a08452d640cd2db36eb97e3979d6df576">01276</a> <a class="code" href="interp_8c.html#a08452d640cd2db36eb97e3979d6df576">seval</a>(<span class="keyword">register</span> <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *se)
<a name="l01277"></a>01277 {
<a name="l01278"></a>01278     <span class="keyword">register</span> <span class="keywordtype">char</span> *p;
<a name="l01279"></a>01279 
<a name="l01280"></a>01280     <span class="keywordflow">if</span> (se == (<span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *)0) <span class="keywordflow">return</span> (<span class="keywordtype">char</span> *)0;
<a name="l01281"></a>01281     <span class="keywordflow">switch</span> (se-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a>) {
<a name="l01282"></a>01282         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#aacd5f942bdb7e1615d7caca29545ee86">O_SCONST</a>: p = <a class="code" href="pxmalloc_8c.html#a7119be33744c04e41b75e9edc14a3a46">scxmalloc</a>((<span class="keywordtype">size_t</span>)(strlen(se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#a993db5ac323e22de8928bead6adf0ecd">s</a>)+1));
<a name="l01283"></a>01283                      (void) strcpy(p, se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#a993db5ac323e22de8928bead6adf0ecd">s</a>);
<a name="l01284"></a>01284                      <span class="keywordflow">return</span> (p);
<a name="l01285"></a>01285         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ab7c61d0445730f55373808a31e3b9575">O_VAR</a>:    {
<a name="l01286"></a>01286                         <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *vp = se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#af1d02090ec11bc269254d33a72506419">v</a>.<a class="code" href="structent__ptr.html#abdf28c3ec0c48cd52cafbcd2825ae50b">vp</a>;
<a name="l01287"></a>01287                         <span class="keywordtype">int</span> <a class="code" href="help_8c.html#a3a974d15c9cde2c3be4c2ad715920fc1">row</a>, <a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>;
<a name="l01288"></a>01288                         <span class="keywordflow">if</span> (vp &amp;&amp; (<a class="code" href="interp_8c.html#a4405c775bda3aee041f992bdf4dc7792">rowoffset</a> || <a class="code" href="interp_8c.html#af99a356889e60bd714423c716a090b0c">coloffset</a>)) {
<a name="l01289"></a>01289                             row = se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#af1d02090ec11bc269254d33a72506419">v</a>.<a class="code" href="structent__ptr.html#a68b964980232d5b93da66ade646b6448">vf</a> &amp; <a class="code" href="sc_8h.html#a51d798b195d3e22ca7665e2ebf81539b">FIX_ROW</a> ? vp-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>
<a name="l01290"></a>01290                                                        : vp-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a> + <a class="code" href="interp_8c.html#a4405c775bda3aee041f992bdf4dc7792">rowoffset</a>;
<a name="l01291"></a>01291                             col = se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#af1d02090ec11bc269254d33a72506419">v</a>.<a class="code" href="structent__ptr.html#a68b964980232d5b93da66ade646b6448">vf</a> &amp; <a class="code" href="sc_8h.html#a7a89e20080d3b56d96740b913c84163e">FIX_COL</a> ? vp-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>
<a name="l01292"></a>01292                                                        : vp-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a> + <a class="code" href="interp_8c.html#af99a356889e60bd714423c716a090b0c">coloffset</a>;
<a name="l01293"></a>01293                             <a class="code" href="pvmtbl_8c.html#aed91143b6917f518cec727e37c387590">checkbounds</a>(&amp;row, &amp;col);
<a name="l01294"></a>01294                             vp = *<a class="code" href="sc_8h.html#a2288f3ade588c7240beef3b7a301051b">ATBL</a>(<a class="code" href="sc_8c.html#ab1cc8ce06f419cceb40acdf03a6bb4fc">tbl</a>, row, col);
<a name="l01295"></a>01295                         }
<a name="l01296"></a>01296                         <span class="keywordflow">if</span> (!vp || !vp-&gt;<a class="code" href="structent.html#a5346704737f8bf536f566804d95d9a02">label</a>)
<a name="l01297"></a>01297                             <span class="keywordflow">return</span> (NULL);
<a name="l01298"></a>01298                         p = <a class="code" href="pxmalloc_8c.html#a7119be33744c04e41b75e9edc14a3a46">scxmalloc</a>((<span class="keywordtype">size_t</span>)(strlen(vp-&gt;<a class="code" href="structent.html#a5346704737f8bf536f566804d95d9a02">label</a>)+1));
<a name="l01299"></a>01299                         (void) strcpy(p, vp-&gt;<a class="code" href="structent.html#a5346704737f8bf536f566804d95d9a02">label</a>);
<a name="l01300"></a>01300                         <span class="keywordflow">return</span> (p);
<a name="l01301"></a>01301         }
<a name="l01302"></a>01302         <span class="keywordflow">case</span> <span class="charliteral">&#39;#&#39;</span>:    <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#a23144a8dba658141a83f929f25281582">docat</a>(<a class="code" href="interp_8c.html#a08452d640cd2db36eb97e3979d6df576">seval</a>(se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left), <a class="code" href="interp_8c.html#a08452d640cd2db36eb97e3979d6df576">seval</a>(se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right)));
<a name="l01303"></a>01303         <span class="keywordflow">case</span> <span class="charliteral">&#39;f&#39;</span>:    {
<a name="l01304"></a>01304                      <span class="keywordtype">int</span> rtmp = <a class="code" href="interp_8c.html#a4405c775bda3aee041f992bdf4dc7792">rowoffset</a>;
<a name="l01305"></a>01305                      <span class="keywordtype">int</span> ctmp = <a class="code" href="interp_8c.html#af99a356889e60bd714423c716a090b0c">coloffset</a>;
<a name="l01306"></a>01306                      <span class="keywordtype">char</span> *ret;
<a name="l01307"></a>01307                      <a class="code" href="interp_8c.html#a4405c775bda3aee041f992bdf4dc7792">rowoffset</a> = <a class="code" href="interp_8c.html#af99a356889e60bd714423c716a090b0c">coloffset</a> = 0;
<a name="l01308"></a>01308                      ret = <a class="code" href="interp_8c.html#a08452d640cd2db36eb97e3979d6df576">seval</a>(se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left);
<a name="l01309"></a>01309                      <a class="code" href="interp_8c.html#a4405c775bda3aee041f992bdf4dc7792">rowoffset</a> = rtmp;
<a name="l01310"></a>01310                      <a class="code" href="interp_8c.html#af99a356889e60bd714423c716a090b0c">coloffset</a> = ctmp;
<a name="l01311"></a>01311                      <span class="keywordflow">return</span> (ret);
<a name="l01312"></a>01312                      }
<a name="l01313"></a>01313         <span class="keywordflow">case</span> <span class="charliteral">&#39;F&#39;</span>:    <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#a08452d640cd2db36eb97e3979d6df576">seval</a>(se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left));
<a name="l01314"></a>01314         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ac138c68a0709c57bc5f7567abc1558eb">IF</a>:
<a name="l01315"></a>01315         <span class="keywordflow">case</span> <span class="charliteral">&#39;?&#39;</span>:    <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left) ? <a class="code" href="interp_8c.html#a08452d640cd2db36eb97e3979d6df576">seval</a>(se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right-&gt;e.o.left)
<a name="l01316"></a>01316                                              : <a class="code" href="interp_8c.html#a08452d640cd2db36eb97e3979d6df576">seval</a>(se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right-&gt;e.o.right));
<a name="l01317"></a>01317         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a30b328ca499f27b3d0f8111b495834ca">DATE</a>:   <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#a574b075333345b42609501bea960cd92">dodate</a>((time_t)(<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left)),
<a name="l01318"></a>01318                                  <a class="code" href="interp_8c.html#a08452d640cd2db36eb97e3979d6df576">seval</a>(se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right)));
<a name="l01319"></a>01319         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a3dfb8ef0d04e938194da60b4420c7517">FMT</a>:    <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#af8111a4f6b3e57fcc9d473ced0ef387f">dofmt</a>(<a class="code" href="interp_8c.html#a08452d640cd2db36eb97e3979d6df576">seval</a>(se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left), <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right)));
<a name="l01320"></a>01320         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ab7a309e1cb06fb6bcbd4314371443416">UPPER</a>:  <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#afed7d13d0a43dabbe96f1b99194d4713">docase</a>(<a class="code" href="sc_8h.html#ab7a309e1cb06fb6bcbd4314371443416">UPPER</a>, <a class="code" href="interp_8c.html#a08452d640cd2db36eb97e3979d6df576">seval</a>(se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left)));
<a name="l01321"></a>01321         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#aaa9295df3f8f6033cae4b89cc7e5ff29">LOWER</a>:  <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#afed7d13d0a43dabbe96f1b99194d4713">docase</a>(<a class="code" href="sc_8h.html#aaa9295df3f8f6033cae4b89cc7e5ff29">LOWER</a>, <a class="code" href="interp_8c.html#a08452d640cd2db36eb97e3979d6df576">seval</a>(se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left)));
<a name="l01322"></a>01322         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a9e86bb407a3bf01b7ce8bc9745cca8a8">CAPITAL</a>:<span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#a86697536a1eeafa8d182866a963a7f03">docapital</a>(<a class="code" href="interp_8c.html#a08452d640cd2db36eb97e3979d6df576">seval</a>(se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left)));
<a name="l01323"></a>01323         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#aa5e896999b4b983ad5b24e479d343ec0">STINDEX</a>: {
<a name="l01324"></a>01324             <span class="keywordtype">int</span> r, c;
<a name="l01325"></a>01325             <span class="keywordtype">int</span> maxr, maxc;
<a name="l01326"></a>01326             <span class="keywordtype">int</span> minr, minc;
<a name="l01327"></a>01327             maxr = se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left-&gt;e.r.right.vp-&gt;row;
<a name="l01328"></a>01328             maxc = se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left-&gt;e.r.right.vp-&gt;col;
<a name="l01329"></a>01329             minr = se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left-&gt;e.r.left.vp-&gt;row;
<a name="l01330"></a>01330             minc = se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left-&gt;e.r.left.vp-&gt;col;
<a name="l01331"></a>01331             <span class="keywordflow">if</span> (minr&gt;maxr) r = maxr, maxr = minr, minr = r;
<a name="l01332"></a>01332             <span class="keywordflow">if</span> (minc&gt;maxc) c = maxc, maxc = minc, minc = c;
<a name="l01333"></a>01333             <span class="keywordflow">return</span> <a class="code" href="interp_8c.html#a2141ab079a1035de07c54ed25cc38855">dostindex</a>(minr, minc, maxr, maxc, se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right);
<a name="l01334"></a>01334         }
<a name="l01335"></a>01335         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a0aac6c68a5a4eb4d5dbf7f94919de21c">EXT</a>:    <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#a26d3b167fc4c3fc33a2a04977fd8e353">doext</a>(se));
<a name="l01336"></a>01336         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a79fcb75e4cf7ae537a9fc8ca9d693d40">SVAL</a>:   <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#aeb4956b9601164b7ccb7e36d7d29c291">dosval</a>(<a class="code" href="interp_8c.html#a08452d640cd2db36eb97e3979d6df576">seval</a>(se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left), <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right)));
<a name="l01337"></a>01337         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a6df32afef4252c11e71b3d9598624690">SUBSTR</a>: <span class="keywordflow">return</span> (<a class="code" href="interp_8c.html#a69b9456f83a5ac4a589de08e288245cd">dosubstr</a>(<a class="code" href="interp_8c.html#a08452d640cd2db36eb97e3979d6df576">seval</a>(se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left),
<a name="l01338"></a>01338                             (<span class="keywordtype">int</span>)<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right-&gt;e.o.left) - 1,
<a name="l01339"></a>01339                             (<span class="keywordtype">int</span>)<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right-&gt;e.o.right) - 1));
<a name="l01340"></a>01340         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a1e839fcdc337fa2c35b325d0c4cd6887">COLTOA</a>: <span class="keywordflow">return</span> (strcpy(<a class="code" href="pxmalloc_8c.html#a7119be33744c04e41b75e9edc14a3a46">scxmalloc</a>((<span class="keywordtype">size_t</span>)10),
<a name="l01341"></a>01341                                    <a class="code" href="interp_8c.html#a8e7c5b7d4aaadab7aa4bed05ea1f2be8">coltoa</a>((<span class="keywordtype">int</span>)<a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left))));
<a name="l01342"></a>01342         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a8de29f7c8bbf1a81cc6e71ac602032d3">FILENAME</a>: {
<a name="l01343"></a>01343                      <span class="keywordtype">int</span> n = <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(se-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left);
<a name="l01344"></a>01344                      <span class="keywordtype">char</span> *s = strrchr(<a class="code" href="sc_8c.html#a55f3842294ec0222be8a768ed616a469">curfile</a>, <span class="charliteral">&#39;/&#39;</span>);
<a name="l01345"></a>01345 
<a name="l01346"></a>01346                      <span class="keywordflow">if</span> (n || s++ == NULL) s = <a class="code" href="sc_8c.html#a55f3842294ec0222be8a768ed616a469">curfile</a>;
<a name="l01347"></a>01347                      p = <a class="code" href="pxmalloc_8c.html#a7119be33744c04e41b75e9edc14a3a46">scxmalloc</a>((<span class="keywordtype">size_t</span>)(strlen(s)+1));
<a name="l01348"></a>01348                      (void) strcpy(p, s);
<a name="l01349"></a>01349                      <span class="keywordflow">return</span> (p);
<a name="l01350"></a>01350         }
<a name="l01351"></a>01351         <span class="keywordflow">default</span>:
<a name="l01352"></a>01352                      <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot;Illegal string expression&quot;</span>);
<a name="l01353"></a>01353                      <a class="code" href="interp_8c.html#a158d9d755a3b4e8262cc8e9ff1592b44">exprerr</a> = 1;
<a name="l01354"></a>01354                      <span class="keywordflow">return</span> (NULL);
<a name="l01355"></a>01355     }
<a name="l01356"></a>01356 }
<a name="l01357"></a>01357 
<a name="l01358"></a>01358 <span class="comment">/*</span>
<a name="l01359"></a>01359 <span class="comment"> * The graph formed by cell expressions which use other cells&#39;s values is not</span>
<a name="l01360"></a>01360 <span class="comment"> * evaluated &quot;bottom up&quot;.  The whole table is merely re-evaluated cell by cell,</span>
<a name="l01361"></a>01361 <span class="comment"> * top to bottom, left to right, in RealEvalAll().  Each cell&#39;s expression uses</span>
<a name="l01362"></a>01362 <span class="comment"> * constants in other cells.  However, RealEvalAll() notices when a cell gets a</span>
<a name="l01363"></a>01363 <span class="comment"> * new numeric or string value, and reports if this happens for any cell.</span>
<a name="l01364"></a>01364 <span class="comment"> * EvalAll() repeats calling RealEvalAll() until there are no changes or the</span>
<a name="l01365"></a>01365 <span class="comment"> * evaluation count expires.</span>
<a name="l01366"></a>01366 <span class="comment"> */</span>
<a name="l01367"></a>01367 
<a name="l01368"></a><a class="code" href="sc_8h.html#acfe12e32168d2fafcda833773c986659">01368</a> <span class="keywordtype">int</span> <a class="code" href="interp_8c.html#acfe12e32168d2fafcda833773c986659">propagation</a> = 10;   <span class="comment">/* max number of times to try calculation */</span>
<a name="l01369"></a><a class="code" href="sc_8h.html#a97a3479da7464543c903d2072d0ffa91">01369</a> <span class="keywordtype">int</span> <a class="code" href="interp_8c.html#a97a3479da7464543c903d2072d0ffa91">repct</a> = 1;          <span class="comment">/* Make repct a global variable so that the </span>
<a name="l01370"></a>01370 <span class="comment">                                function @numiter can access it */</span>
<a name="l01371"></a>01371 
<a name="l01372"></a>01372 <span class="keywordtype">void</span>
<a name="l01373"></a><a class="code" href="sc_8h.html#a5021b9e3d5903371c581abc2cfea9687">01373</a> <a class="code" href="interp_8c.html#a5021b9e3d5903371c581abc2cfea9687">setiterations</a>(<span class="keywordtype">int</span> i)
<a name="l01374"></a>01374 {
<a name="l01375"></a>01375     <span class="keywordflow">if</span> (i &lt; 1) {
<a name="l01376"></a>01376         <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot;iteration count must be at least 1&quot;</span>);
<a name="l01377"></a>01377         propagation = 1;
<a name="l01378"></a>01378     } <span class="keywordflow">else</span>
<a name="l01379"></a>01379         propagation = i;
<a name="l01380"></a>01380 }
<a name="l01381"></a>01381 
<a name="l01382"></a>01382 <span class="keywordtype">void</span>
<a name="l01383"></a><a class="code" href="sc_8h.html#ab3c8daebfcbee5183db148eea94e9a3c">01383</a> <a class="code" href="interp_8c.html#ab3c8daebfcbee5183db148eea94e9a3c">EvalAll</a>()
<a name="l01384"></a>01384 {
<a name="l01385"></a>01385     <span class="keywordtype">int</span> lastcnt, pair, <a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>;
<a name="l01386"></a>01386   
<a name="l01387"></a>01387     repct = 1;
<a name="l01388"></a>01388     (void) signal(SIGFPE, <a class="code" href="interp_8c.html#ad192e48d7fbfd4d91bf0e323834044cb">eval_fpe</a>);
<a name="l01389"></a>01389 
<a name="l01390"></a>01390     <span class="keywordflow">while</span> ((lastcnt = <a class="code" href="interp_8c.html#a1d5cdbd505340af3043fd032c380c0de">RealEvalAll</a>()) &amp;&amp; (++repct &lt;= <a class="code" href="interp_8c.html#acfe12e32168d2fafcda833773c986659">propagation</a>));
<a name="l01391"></a>01391     <span class="keywordflow">if</span> ((propagation &gt; 1) &amp;&amp; (lastcnt &gt; 0))
<a name="l01392"></a>01392         <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot;Still changing after %d iterations&quot;</span>, repct - 1);
<a name="l01393"></a>01393 
<a name="l01394"></a>01394     <span class="keywordflow">if</span> (<a class="code" href="sc_8c.html#ae4fc097b13e41e0c5137faa24ed2e1cc">usecurses</a> &amp;&amp; <a class="code" href="sc_8c.html#a0fd02fb9277ffcb35a75066ffe95e8c7">color</a> &amp;&amp; has_colors()) {
<a name="l01395"></a>01395         <span class="keywordflow">for</span> (pair = 0; pair &lt; 8; pair++) {
<a name="l01396"></a>01396             cellerror = <a class="code" href="sc_8h.html#a0a47a7c621688cb5e5dd3b35954cdad2">CELLOK</a>;
<a name="l01397"></a>01397             <span class="keywordflow">if</span> (<a class="code" href="color_8c.html#ab36daaec5ed9237f8a6e75e9d9fe4859">cpairs</a>[pair] &amp;&amp; <a class="code" href="color_8c.html#ab36daaec5ed9237f8a6e75e9d9fe4859">cpairs</a>[pair]-&gt;<a class="code" href="structent.html#a6689c3abcaf3ef54fa0318a5be81b85d">expr</a>) {
<a name="l01398"></a>01398                 v = (int) <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(<a class="code" href="color_8c.html#ab36daaec5ed9237f8a6e75e9d9fe4859">cpairs</a>[pair]-&gt;<a class="code" href="structent.html#a6689c3abcaf3ef54fa0318a5be81b85d">expr</a>);
<a name="l01399"></a>01399                 <a class="code" href="color_8c.html#ab36daaec5ed9237f8a6e75e9d9fe4859">cpairs</a>[pair]-&gt;<a class="code" href="structcolorpair.html#a1c2d0deb149ec7d55fbe4cda42fef032">fg</a> = v &amp; 7;
<a name="l01400"></a>01400                 <a class="code" href="color_8c.html#ab36daaec5ed9237f8a6e75e9d9fe4859">cpairs</a>[pair]-&gt;<a class="code" href="structcolorpair.html#af172f79ff0076017173e214cfb5e3a5f">bg</a> = (v &gt;&gt; 3) &amp; 7;
<a name="l01401"></a>01401                 init_pair(pair + 1, <a class="code" href="color_8c.html#ab36daaec5ed9237f8a6e75e9d9fe4859">cpairs</a>[pair]-&gt;fg, <a class="code" href="color_8c.html#ab36daaec5ed9237f8a6e75e9d9fe4859">cpairs</a>[pair]-&gt;bg);
<a name="l01402"></a>01402             }
<a name="l01403"></a>01403             <span class="comment">/* Can&#39;t see to fix the problem if color 1 has an error, so</span>
<a name="l01404"></a>01404 <span class="comment">             * turn off color in that case.</span>
<a name="l01405"></a>01405 <span class="comment">             */</span>
<a name="l01406"></a>01406             <span class="keywordflow">if</span> (pair == 0 &amp;&amp; cellerror) {
<a name="l01407"></a>01407                 <a class="code" href="sc_8c.html#a0fd02fb9277ffcb35a75066ffe95e8c7">color</a> = 0;
<a name="l01408"></a>01408                 attron(COLOR_PAIR(0));
<a name="l01409"></a>01409                 color_set(0, NULL);
<a name="l01410"></a>01410                 <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot;Error in color 1: color turned off&quot;</span>);
<a name="l01411"></a>01411             }
<a name="l01412"></a>01412         }
<a name="l01413"></a>01413     }
<a name="l01414"></a>01414 
<a name="l01415"></a>01415     (void) signal(SIGFPE, <a class="code" href="interp_8c.html#ab5032b2f1718f2505efc7a82fbc6ae30">doquit</a>);
<a name="l01416"></a>01416 }
<a name="l01417"></a>01417 
<a name="l01418"></a>01418 <span class="comment">/*</span>
<a name="l01419"></a>01419 <span class="comment"> * Evaluate all cells which have expressions and alter their numeric or string</span>
<a name="l01420"></a>01420 <span class="comment"> * values.  Return the number of cells which changed.</span>
<a name="l01421"></a>01421 <span class="comment"> */</span>
<a name="l01422"></a>01422 
<a name="l01423"></a>01423 <span class="keywordtype">int</span> 
<a name="l01424"></a><a class="code" href="interp_8c.html#a1d5cdbd505340af3043fd032c380c0de">01424</a> <a class="code" href="interp_8c.html#a1d5cdbd505340af3043fd032c380c0de">RealEvalAll</a>()
<a name="l01425"></a>01425 {
<a name="l01426"></a>01426     <span class="keyword">register</span> <span class="keywordtype">int</span> i,j;
<a name="l01427"></a>01427     <span class="keywordtype">int</span> chgct = 0;
<a name="l01428"></a>01428     <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *p;
<a name="l01429"></a>01429 
<a name="l01430"></a>01430     <span class="keywordflow">if</span> (<a class="code" href="sc_8c.html#a874a35249fb6ae568098ba9a3e9dabe3">calc_order</a> == <a class="code" href="sc_8h.html#a781b3b06c024fd41e20e83f60be77dbf">BYROWS</a>) {
<a name="l01431"></a>01431         <span class="keywordflow">for</span> (i=0; i&lt;=<a class="code" href="sc_8c.html#ad692516c5ad5adc8f9f75c558f0138a0">maxrow</a>; i++)
<a name="l01432"></a>01432             <span class="keywordflow">for</span> (j=0; j&lt;=<a class="code" href="sc_8c.html#a81ef4758a949baa6a6f8355f0e4d3280">maxcol</a>; j++)
<a name="l01433"></a>01433                 <span class="keywordflow">if</span> ((p = *<a class="code" href="sc_8h.html#a2288f3ade588c7240beef3b7a301051b">ATBL</a>(<a class="code" href="sc_8c.html#ab1cc8ce06f419cceb40acdf03a6bb4fc">tbl</a>,i,j)) &amp;&amp; p-&gt;<a class="code" href="structent.html#a6689c3abcaf3ef54fa0318a5be81b85d">expr</a>)
<a name="l01434"></a>01434                     <a class="code" href="interp_8c.html#a4583387a8c7d750c737ed8193d216f12">RealEvalOne</a>(p,i,j,&amp;chgct);
<a name="l01435"></a>01435     }
<a name="l01436"></a>01436     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="sc_8c.html#a874a35249fb6ae568098ba9a3e9dabe3">calc_order</a> == <a class="code" href="sc_8h.html#accc5c262511ae8218630af08ecf99d18">BYCOLS</a>) {
<a name="l01437"></a>01437         <span class="keywordflow">for</span> (j=0; j&lt;=<a class="code" href="sc_8c.html#a81ef4758a949baa6a6f8355f0e4d3280">maxcol</a>; j++) {
<a name="l01438"></a>01438             <span class="keywordflow">for</span> (i=0; i&lt;=<a class="code" href="sc_8c.html#ad692516c5ad5adc8f9f75c558f0138a0">maxrow</a>; i++)
<a name="l01439"></a>01439                 <span class="keywordflow">if</span> ((p = *<a class="code" href="sc_8h.html#a2288f3ade588c7240beef3b7a301051b">ATBL</a>(<a class="code" href="sc_8c.html#ab1cc8ce06f419cceb40acdf03a6bb4fc">tbl</a>,i,j)) &amp;&amp; p-&gt;<a class="code" href="structent.html#a6689c3abcaf3ef54fa0318a5be81b85d">expr</a>)
<a name="l01440"></a>01440                     <a class="code" href="interp_8c.html#a4583387a8c7d750c737ed8193d216f12">RealEvalOne</a>(p,i,j,&amp;chgct);
<a name="l01441"></a>01441         }
<a name="l01442"></a>01442     }
<a name="l01443"></a>01443     <span class="keywordflow">else</span> <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot;Internal error calc_order&quot;</span>);
<a name="l01444"></a>01444  
<a name="l01445"></a>01445     <span class="keywordflow">return</span> (chgct);
<a name="l01446"></a>01446 }
<a name="l01447"></a>01447 
<a name="l01448"></a>01448 <span class="keywordtype">void</span>
<a name="l01449"></a><a class="code" href="interp_8c.html#a4583387a8c7d750c737ed8193d216f12">01449</a> <a class="code" href="interp_8c.html#a4583387a8c7d750c737ed8193d216f12">RealEvalOne</a>(<span class="keyword">register</span> <span class="keyword">struct</span> <a class="code" href="structent.html">ent</a> *p, <span class="keywordtype">int</span> i, <span class="keywordtype">int</span> j, <span class="keywordtype">int</span> *chgct)
<a name="l01450"></a>01450 {
<a name="l01451"></a>01451     <a class="code" href="interp_8c.html#acb0cfad15ab1d25aabd8bf11950f787b">gmyrow</a>=i; <a class="code" href="interp_8c.html#a4f852dc743977df0268fcdbec84353a2">gmycol</a>=j;
<a name="l01452"></a>01452 
<a name="l01453"></a>01453     <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> &amp; <a class="code" href="sc_8h.html#a13693a07927c228618ada130ce373acd">is_strexpr</a>) {
<a name="l01454"></a>01454         <span class="keywordtype">char</span> *<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>;
<a name="l01455"></a>01455         <span class="keywordflow">if</span> (setjmp(<a class="code" href="interp_8c.html#a32f86b7c541e3f352078b7a2bfa115cb">fpe_save</a>)) {
<a name="l01456"></a>01456             <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot;Floating point exception %s&quot;</span>, <a class="code" href="range_8c.html#a9248e2ed2edf876ebd286ab6262e80f3">v_name</a>(i, j));
<a name="l01457"></a>01457             cellerror = <a class="code" href="sc_8h.html#a21246343b17f2039f546f18e0e72cff6">CELLERROR</a>;
<a name="l01458"></a>01458             v = <span class="stringliteral">&quot;&quot;</span>;
<a name="l01459"></a>01459         } <span class="keywordflow">else</span> {
<a name="l01460"></a>01460             cellerror = <a class="code" href="sc_8h.html#a0a47a7c621688cb5e5dd3b35954cdad2">CELLOK</a>;
<a name="l01461"></a>01461             v = <a class="code" href="interp_8c.html#a08452d640cd2db36eb97e3979d6df576">seval</a>(p-&gt;<a class="code" href="structent.html#a6689c3abcaf3ef54fa0318a5be81b85d">expr</a>);
<a name="l01462"></a>01462         }
<a name="l01463"></a>01463         p-&gt;<a class="code" href="structent.html#ab08000c5e4f50af3a8f55684f634ca7e">cellerror</a> = <a class="code" href="interp_8c.html#a274198a92f8aa92468c7ed3a62c8e7eb">cellerror</a>;
<a name="l01464"></a>01464         <span class="keywordflow">if</span> (!v &amp;&amp; !p-&gt;<a class="code" href="structent.html#a5346704737f8bf536f566804d95d9a02">label</a>) <span class="comment">/* Everything&#39;s fine */</span>
<a name="l01465"></a>01465             <span class="keywordflow">return</span>;
<a name="l01466"></a>01466         <span class="keywordflow">if</span> (!p-&gt;<a class="code" href="structent.html#a5346704737f8bf536f566804d95d9a02">label</a> || !v || strcmp(v, p-&gt;<a class="code" href="structent.html#a5346704737f8bf536f566804d95d9a02">label</a>) != 0 || cellerror) {
<a name="l01467"></a>01467             (*chgct)++;
<a name="l01468"></a>01468             p-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> |= <a class="code" href="sc_8h.html#a66019db02c7b646c7afc1f8bf9bcbefc">is_changed</a>;
<a name="l01469"></a>01469             <a class="code" href="sc_8c.html#aaece488ae3f9f67f9991b0c90fd12369">changed</a>++;
<a name="l01470"></a>01470         }
<a name="l01471"></a>01471         <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structent.html#a5346704737f8bf536f566804d95d9a02">label</a>)
<a name="l01472"></a>01472             <a class="code" href="pxmalloc_8c.html#a319bd47b6e3c09b65d3d666d7007bdc3">scxfree</a>(p-&gt;<a class="code" href="structent.html#a5346704737f8bf536f566804d95d9a02">label</a>);
<a name="l01473"></a>01473         p-&gt;<a class="code" href="structent.html#a5346704737f8bf536f566804d95d9a02">label</a> = <a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>;
<a name="l01474"></a>01474     } <span class="keywordflow">else</span> {
<a name="l01475"></a>01475         <span class="keywordtype">double</span> <a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>;
<a name="l01476"></a>01476         <span class="keywordflow">if</span> (setjmp(<a class="code" href="interp_8c.html#a32f86b7c541e3f352078b7a2bfa115cb">fpe_save</a>)) {
<a name="l01477"></a>01477             <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot;Floating point exception %s&quot;</span>, <a class="code" href="range_8c.html#a9248e2ed2edf876ebd286ab6262e80f3">v_name</a>(i, j));
<a name="l01478"></a>01478             cellerror = <a class="code" href="sc_8h.html#a21246343b17f2039f546f18e0e72cff6">CELLERROR</a>;
<a name="l01479"></a>01479             v = (double)0.0;
<a name="l01480"></a>01480         } <span class="keywordflow">else</span> {
<a name="l01481"></a>01481             cellerror = <a class="code" href="sc_8h.html#a0a47a7c621688cb5e5dd3b35954cdad2">CELLOK</a>;
<a name="l01482"></a>01482             v = <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(p-&gt;<a class="code" href="structent.html#a6689c3abcaf3ef54fa0318a5be81b85d">expr</a>);
<a name="l01483"></a>01483             <span class="keywordflow">if</span> (cellerror == <a class="code" href="sc_8h.html#a0a47a7c621688cb5e5dd3b35954cdad2">CELLOK</a> &amp;&amp; !finite(v))
<a name="l01484"></a>01484                 cellerror = <a class="code" href="sc_8h.html#a21246343b17f2039f546f18e0e72cff6">CELLERROR</a>;
<a name="l01485"></a>01485         }
<a name="l01486"></a>01486         <span class="keywordflow">if</span> ((cellerror != p-&gt;<a class="code" href="structent.html#ab08000c5e4f50af3a8f55684f634ca7e">cellerror</a>) || (v != p-&gt;<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>)) {
<a name="l01487"></a>01487             p-&gt;<a class="code" href="structent.html#ab08000c5e4f50af3a8f55684f634ca7e">cellerror</a> = <a class="code" href="interp_8c.html#a274198a92f8aa92468c7ed3a62c8e7eb">cellerror</a>;
<a name="l01488"></a>01488             p-&gt;<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a> = <a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>;
<a name="l01489"></a>01489             <span class="keywordflow">if</span> (!cellerror)     <span class="comment">/* don&#39;t keep eval&#39;ing an error */</span>
<a name="l01490"></a>01490                 (*chgct)++;
<a name="l01491"></a>01491             p-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> |= <a class="code" href="sc_8h.html#a66019db02c7b646c7afc1f8bf9bcbefc">is_changed</a>|<a class="code" href="sc_8h.html#a242aaa897b3487fbbae12bf4b297ad1b">is_valid</a>;
<a name="l01492"></a>01492             <a class="code" href="sc_8c.html#aaece488ae3f9f67f9991b0c90fd12369">changed</a>++;
<a name="l01493"></a>01493         }
<a name="l01494"></a>01494     }
<a name="l01495"></a>01495 }
<a name="l01496"></a>01496 
<a name="l01497"></a>01497 <span class="keyword">struct </span><a class="code" href="structenode.html">enode</a> *
<a name="l01498"></a><a class="code" href="sc_8h.html#a9e42fd9c8477cd7355a08c2423a46b72">01498</a> <span class="keyword">new</span>(<span class="keywordtype">int</span> <a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a>, <span class="keyword">struct </span><a class="code" href="structenode.html">enode</a> *a1, <span class="keyword">struct </span><a class="code" href="structenode.html">enode</a> *a2)
<a name="l01499"></a>01499 {
<a name="l01500"></a>01500     <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structenode.html">enode</a> *p;
<a name="l01501"></a>01501     <span class="keywordflow">if</span> (freeenodes) {
<a name="l01502"></a>01502         p = <a class="code" href="cmds_8c.html#a286e9016810cd4415bb921296a15d769">freeenodes</a>;
<a name="l01503"></a>01503         freeenodes = p-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left;
<a name="l01504"></a>01504     } <span class="keywordflow">else</span>
<a name="l01505"></a>01505         p = (<span class="keyword">struct </span><a class="code" href="structenode.html">enode</a> *) <a class="code" href="pxmalloc_8c.html#a7119be33744c04e41b75e9edc14a3a46">scxmalloc</a>((<span class="keywordtype">size_t</span>)<span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structenode.html">enode</a>));
<a name="l01506"></a>01506     p-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a> = <a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a>;
<a name="l01507"></a>01507     p-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left = a1;
<a name="l01508"></a>01508     p-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right = a2;
<a name="l01509"></a>01509     p-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.s = NULL;
<a name="l01510"></a>01510     <span class="keywordflow">return</span> p;
<a name="l01511"></a>01511 }
<a name="l01512"></a>01512 
<a name="l01513"></a>01513 <span class="keyword">struct </span><a class="code" href="structenode.html">enode</a> *
<a name="l01514"></a><a class="code" href="sc_8h.html#a6d17c4ae1645e62a45f1dd2423525d26">01514</a> <a class="code" href="interp_8c.html#a6d17c4ae1645e62a45f1dd2423525d26">new_var</a>(<span class="keywordtype">int</span> op, <span class="keyword">struct</span> <a class="code" href="structent__ptr.html">ent_ptr</a> a1)
<a name="l01515"></a>01515 {
<a name="l01516"></a>01516     <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structenode.html">enode</a> *p;
<a name="l01517"></a>01517     <span class="keywordflow">if</span> (freeenodes) {
<a name="l01518"></a>01518         p = <a class="code" href="cmds_8c.html#a286e9016810cd4415bb921296a15d769">freeenodes</a>;
<a name="l01519"></a>01519         freeenodes = p-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left;
<a name="l01520"></a>01520     } <span class="keywordflow">else</span>
<a name="l01521"></a>01521         p = (<span class="keyword">struct </span><a class="code" href="structenode.html">enode</a> *) <a class="code" href="pxmalloc_8c.html#a7119be33744c04e41b75e9edc14a3a46">scxmalloc</a>((<span class="keywordtype">size_t</span>)<span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structenode.html">enode</a>));
<a name="l01522"></a>01522     p-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a> = <a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a>;
<a name="l01523"></a>01523     p-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#af1d02090ec11bc269254d33a72506419">v</a> = a1;
<a name="l01524"></a>01524     <span class="keywordflow">return</span> p;
<a name="l01525"></a>01525 }
<a name="l01526"></a>01526 
<a name="l01527"></a>01527 <span class="keyword">struct </span><a class="code" href="structenode.html">enode</a> *
<a name="l01528"></a><a class="code" href="sc_8h.html#a54115f0e6aa3b9475db210eac1d849e3">01528</a> <a class="code" href="interp_8c.html#a54115f0e6aa3b9475db210eac1d849e3">new_range</a>(<span class="keywordtype">int</span> op, <span class="keyword">struct</span> <a class="code" href="structrange__s.html">range_s</a> a1)
<a name="l01529"></a>01529 {
<a name="l01530"></a>01530     <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structenode.html">enode</a> *p;
<a name="l01531"></a>01531     <span class="keywordflow">if</span> (freeenodes)
<a name="l01532"></a>01532     {   p = <a class="code" href="cmds_8c.html#a286e9016810cd4415bb921296a15d769">freeenodes</a>;
<a name="l01533"></a>01533         freeenodes = p-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left;
<a name="l01534"></a>01534     }
<a name="l01535"></a>01535     <span class="keywordflow">else</span>
<a name="l01536"></a>01536         p = (<span class="keyword">struct </span><a class="code" href="structenode.html">enode</a> *) <a class="code" href="pxmalloc_8c.html#a7119be33744c04e41b75e9edc14a3a46">scxmalloc</a>((<span class="keywordtype">size_t</span>)<span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structenode.html">enode</a>));
<a name="l01537"></a>01537     p-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a> = <a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a>;
<a name="l01538"></a>01538     p-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#a665ccff1d13c8ee142d2278af000dfc9">r</a> = a1;
<a name="l01539"></a>01539     <span class="keywordflow">return</span> p;
<a name="l01540"></a>01540 }
<a name="l01541"></a>01541 
<a name="l01542"></a>01542 <span class="keyword">struct </span><a class="code" href="structenode.html">enode</a> *
<a name="l01543"></a><a class="code" href="sc_8h.html#ad9b402eb876c3447ce42f4adbbad1fee">01543</a> <a class="code" href="interp_8c.html#ad9b402eb876c3447ce42f4adbbad1fee">new_const</a>(<span class="keywordtype">int</span> op, <span class="keywordtype">double</span> a1)
<a name="l01544"></a>01544 {
<a name="l01545"></a>01545     <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structenode.html">enode</a> *p;
<a name="l01546"></a>01546     <span class="keywordflow">if</span> (freeenodes) {   <span class="comment">/* reuse an already free&#39;d enode */</span>
<a name="l01547"></a>01547         p = <a class="code" href="cmds_8c.html#a286e9016810cd4415bb921296a15d769">freeenodes</a>;
<a name="l01548"></a>01548         freeenodes = p-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left;
<a name="l01549"></a>01549     } <span class="keywordflow">else</span>
<a name="l01550"></a>01550         p = (<span class="keyword">struct </span><a class="code" href="structenode.html">enode</a> *) <a class="code" href="pxmalloc_8c.html#a7119be33744c04e41b75e9edc14a3a46">scxmalloc</a>((<span class="keywordtype">size_t</span>)<span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structenode.html">enode</a>));
<a name="l01551"></a>01551     p-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a> = <a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a>;
<a name="l01552"></a>01552     p-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ad6e4e48660754be5ffc0583c15716ac0">k</a> = a1;
<a name="l01553"></a>01553     <span class="keywordflow">return</span> p;
<a name="l01554"></a>01554 }
<a name="l01555"></a>01555 
<a name="l01556"></a>01556 <span class="keyword">struct </span><a class="code" href="structenode.html">enode</a> *
<a name="l01557"></a><a class="code" href="sc_8h.html#a8c2310399ac6b4a8ae9ba9bfe78afe4d">01557</a> <a class="code" href="interp_8c.html#a8c2310399ac6b4a8ae9ba9bfe78afe4d">new_str</a>(<span class="keywordtype">char</span> *<a class="code" href="structenode.html#a993db5ac323e22de8928bead6adf0ecd">s</a>)
<a name="l01558"></a>01558 {
<a name="l01559"></a>01559     <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structenode.html">enode</a> *p;
<a name="l01560"></a>01560 
<a name="l01561"></a>01561     <span class="keywordflow">if</span> (freeenodes) {   <span class="comment">/* reuse an already free&#39;d enode */</span>
<a name="l01562"></a>01562         p = <a class="code" href="cmds_8c.html#a286e9016810cd4415bb921296a15d769">freeenodes</a>;
<a name="l01563"></a>01563         freeenodes = p-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left;
<a name="l01564"></a>01564     } <span class="keywordflow">else</span>
<a name="l01565"></a>01565         p = (<span class="keyword">struct </span><a class="code" href="structenode.html">enode</a> *) <a class="code" href="pxmalloc_8c.html#a7119be33744c04e41b75e9edc14a3a46">scxmalloc</a>((<span class="keywordtype">size_t</span>)<span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="structenode.html">enode</a>));
<a name="l01566"></a>01566     p-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a> = <a class="code" href="sc_8h.html#aacd5f942bdb7e1615d7caca29545ee86">O_SCONST</a>;
<a name="l01567"></a>01567     p-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#a993db5ac323e22de8928bead6adf0ecd">s</a> = <a class="code" href="structenode.html#a993db5ac323e22de8928bead6adf0ecd">s</a>;
<a name="l01568"></a>01568     <span class="keywordflow">return</span> (p);
<a name="l01569"></a>01569 }
<a name="l01570"></a>01570 
<a name="l01571"></a>01571 <span class="keywordtype">void</span>
<a name="l01572"></a><a class="code" href="sc_8h.html#a294abab4f688efd87f557d76ada65484">01572</a> <a class="code" href="interp_8c.html#a294abab4f688efd87f557d76ada65484">copy</a>(<span class="keyword">struct</span> <a class="code" href="structent.html">ent</a> *dv1, <span class="keyword">struct</span> <a class="code" href="structent.html">ent</a> *dv2, <span class="keyword">struct</span> <a class="code" href="structent.html">ent</a> *v1, <span class="keyword">struct</span> <a class="code" href="structent.html">ent</a> *v2)
<a name="l01573"></a>01573 {
<a name="l01574"></a>01574     <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *p;
<a name="l01575"></a>01575 <span class="comment">/*    struct ent *n;*/</span>
<a name="l01576"></a>01576     <span class="keyword">static</span> <span class="keywordtype">int</span> minsr = -1, minsc = -1;
<a name="l01577"></a>01577     <span class="keyword">static</span> <span class="keywordtype">int</span> maxsr = -1, maxsc = -1;
<a name="l01578"></a>01578     <span class="keywordtype">int</span> mindr, mindc;
<a name="l01579"></a>01579     <span class="keywordtype">int</span> maxdr, maxdc;
<a name="l01580"></a>01580 <span class="comment">/*    int vr, vc;*/</span>
<a name="l01581"></a>01581     <span class="keywordtype">int</span> r, c;
<a name="l01582"></a>01582     <span class="keywordtype">int</span> deltar, deltac;
<a name="l01583"></a>01583 
<a name="l01584"></a>01584     <span class="keywordflow">if</span> (dv1) {
<a name="l01585"></a>01585         mindr = dv1-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>;
<a name="l01586"></a>01586         mindc = dv1-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>;
<a name="l01587"></a>01587         maxdr = dv2-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>;
<a name="l01588"></a>01588         maxdc = dv2-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>;
<a name="l01589"></a>01589         <span class="keywordflow">if</span> (mindr &gt; maxdr) r = maxdr, maxdr = mindr, mindr = r;
<a name="l01590"></a>01590         <span class="keywordflow">if</span> (mindc &gt; maxdc) c = maxdc, maxdc = mindc, mindc = c;
<a name="l01591"></a>01591     } <span class="keywordflow">else</span> {
<a name="l01592"></a>01592         <span class="keywordflow">if</span> (<a class="code" href="sc_8c.html#a7e42b4925943637fee5f7e9fa63c1515">showrange</a>) {
<a name="l01593"></a>01593             <a class="code" href="sc_8c.html#a7e42b4925943637fee5f7e9fa63c1515">showrange</a> = 0;
<a name="l01594"></a>01594             mindr = <a class="code" href="sc_8c.html#a5f19f0f312bc40e2e713eba525adcb72">showsr</a> &lt; <a class="code" href="psc_8c.html#aa05918833f3a8b7fef91e11a4da20603">currow</a> ? <a class="code" href="sc_8c.html#a5f19f0f312bc40e2e713eba525adcb72">showsr</a> : <a class="code" href="psc_8c.html#aa05918833f3a8b7fef91e11a4da20603">currow</a>;
<a name="l01595"></a>01595             mindc = <a class="code" href="sc_8c.html#ac547c6e527b5ea4b50113d0319c5b746">showsc</a> &lt; <a class="code" href="psc_8c.html#a32e89ea1aab32cbb2b59ef4274b0f610">curcol</a> ? <a class="code" href="sc_8c.html#ac547c6e527b5ea4b50113d0319c5b746">showsc</a> : <a class="code" href="psc_8c.html#a32e89ea1aab32cbb2b59ef4274b0f610">curcol</a>;
<a name="l01596"></a>01596             maxdr = <a class="code" href="sc_8c.html#a5f19f0f312bc40e2e713eba525adcb72">showsr</a> &gt; <a class="code" href="psc_8c.html#aa05918833f3a8b7fef91e11a4da20603">currow</a> ? <a class="code" href="sc_8c.html#a5f19f0f312bc40e2e713eba525adcb72">showsr</a> : <a class="code" href="psc_8c.html#aa05918833f3a8b7fef91e11a4da20603">currow</a>;
<a name="l01597"></a>01597             maxdc = <a class="code" href="sc_8c.html#ac547c6e527b5ea4b50113d0319c5b746">showsc</a> &gt; <a class="code" href="psc_8c.html#a32e89ea1aab32cbb2b59ef4274b0f610">curcol</a> ? <a class="code" href="sc_8c.html#ac547c6e527b5ea4b50113d0319c5b746">showsc</a> : <a class="code" href="psc_8c.html#a32e89ea1aab32cbb2b59ef4274b0f610">curcol</a>;
<a name="l01598"></a>01598         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (v1) {
<a name="l01599"></a>01599             <span class="comment">/* Set up the default source range for the &quot;c.&quot; command. */</span>
<a name="l01600"></a>01600             minsr = maxsr = v1-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>;
<a name="l01601"></a>01601             minsc = maxsc = v1-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>;
<a name="l01602"></a>01602             <span class="keywordflow">return</span>;
<a name="l01603"></a>01603         } <span class="keywordflow">else</span> {
<a name="l01604"></a>01604             mindr = maxdr = <a class="code" href="psc_8c.html#aa05918833f3a8b7fef91e11a4da20603">currow</a>;
<a name="l01605"></a>01605             mindc = maxdc = <a class="code" href="psc_8c.html#a32e89ea1aab32cbb2b59ef4274b0f610">curcol</a>;
<a name="l01606"></a>01606         }
<a name="l01607"></a>01607     }
<a name="l01608"></a>01608 
<a name="l01609"></a>01609     <span class="keywordflow">if</span> (v1) {
<a name="l01610"></a>01610         minsr = v1-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>;
<a name="l01611"></a>01611         minsc = v1-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>;
<a name="l01612"></a>01612         maxsr = v2-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>;
<a name="l01613"></a>01613         maxsc = v2-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>;
<a name="l01614"></a>01614         <span class="keywordflow">if</span> (minsr &gt; maxsr) r = maxsr, maxsr = minsr, minsr = r;
<a name="l01615"></a>01615         <span class="keywordflow">if</span> (minsc &gt; maxsc) c = maxsc, maxsc = minsc, minsc = c;
<a name="l01616"></a>01616     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dv1 == NULL || v2 != NULL) {
<a name="l01617"></a>01617         <span class="keywordflow">if</span> (<a class="code" href="sc_8c.html#abe99be93a37f35fc61676cefb0386a8f">qbuf</a> &amp;&amp; <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[<a class="code" href="sc_8c.html#abe99be93a37f35fc61676cefb0386a8f">qbuf</a>]) {
<a name="l01618"></a>01618             <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[++<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>] = <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[<a class="code" href="sc_8c.html#abe99be93a37f35fc61676cefb0386a8f">qbuf</a>];
<a name="l01619"></a>01619             <a class="code" href="sc_8c.html#af0604f74020ff209d6d2769eb5cf5cb4">delbuffmt</a>[<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>] = <a class="code" href="sc_8c.html#af0604f74020ff209d6d2769eb5cf5cb4">delbuffmt</a>[<a class="code" href="sc_8c.html#abe99be93a37f35fc61676cefb0386a8f">qbuf</a>];
<a name="l01620"></a>01620         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a> &lt; 0) <span class="keywordflow">return</span>;
<a name="l01621"></a>01621         minsr = <a class="code" href="sc_8c.html#ad692516c5ad5adc8f9f75c558f0138a0">maxrow</a>;
<a name="l01622"></a>01622         minsc = <a class="code" href="sc_8c.html#a81ef4758a949baa6a6f8355f0e4d3280">maxcol</a>;
<a name="l01623"></a>01623         maxsr = 0;
<a name="l01624"></a>01624         maxsc = 0;
<a name="l01625"></a>01625         <span class="keywordflow">for</span> (p = <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>]; p; p = p-&gt;<a class="code" href="structent.html#a043cc4f35d88b90312ecfc23aa411391">next</a>) {
<a name="l01626"></a>01626             <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a> &lt; minsr) minsr = p-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>;
<a name="l01627"></a>01627             <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a> &gt; maxsr) maxsr = p-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>;
<a name="l01628"></a>01628             <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a> &lt; minsc) minsc = p-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>;
<a name="l01629"></a>01629             <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a> &gt; maxsc) maxsc = p-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>;
<a name="l01630"></a>01630         }
<a name="l01631"></a>01631     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="sc_8c.html#a7e42b4925943637fee5f7e9fa63c1515">showrange</a> &amp;&amp; !(<a class="code" href="sc_8c.html#a5f19f0f312bc40e2e713eba525adcb72">showsr</a> == <a class="code" href="psc_8c.html#aa05918833f3a8b7fef91e11a4da20603">currow</a> &amp;&amp; <a class="code" href="sc_8c.html#ac547c6e527b5ea4b50113d0319c5b746">showsc</a> == <a class="code" href="psc_8c.html#a32e89ea1aab32cbb2b59ef4274b0f610">curcol</a> &amp;&amp;
<a name="l01632"></a>01632             mindr == <a class="code" href="psc_8c.html#aa05918833f3a8b7fef91e11a4da20603">currow</a> &amp;&amp; mindc == <a class="code" href="psc_8c.html#a32e89ea1aab32cbb2b59ef4274b0f610">curcol</a> &amp;&amp;
<a name="l01633"></a>01633             maxdr == <a class="code" href="psc_8c.html#aa05918833f3a8b7fef91e11a4da20603">currow</a> &amp;&amp; maxdc == <a class="code" href="psc_8c.html#a32e89ea1aab32cbb2b59ef4274b0f610">curcol</a>)) {
<a name="l01634"></a>01634         minsr = <a class="code" href="sc_8c.html#a5f19f0f312bc40e2e713eba525adcb72">showsr</a> &lt; <a class="code" href="psc_8c.html#aa05918833f3a8b7fef91e11a4da20603">currow</a> ? <a class="code" href="sc_8c.html#a5f19f0f312bc40e2e713eba525adcb72">showsr</a> : <a class="code" href="psc_8c.html#aa05918833f3a8b7fef91e11a4da20603">currow</a>;
<a name="l01635"></a>01635         minsc = <a class="code" href="sc_8c.html#ac547c6e527b5ea4b50113d0319c5b746">showsc</a> &lt; <a class="code" href="psc_8c.html#a32e89ea1aab32cbb2b59ef4274b0f610">curcol</a> ? <a class="code" href="sc_8c.html#ac547c6e527b5ea4b50113d0319c5b746">showsc</a> : <a class="code" href="psc_8c.html#a32e89ea1aab32cbb2b59ef4274b0f610">curcol</a>;
<a name="l01636"></a>01636         maxsr = <a class="code" href="sc_8c.html#a5f19f0f312bc40e2e713eba525adcb72">showsr</a> &gt; <a class="code" href="psc_8c.html#aa05918833f3a8b7fef91e11a4da20603">currow</a> ? <a class="code" href="sc_8c.html#a5f19f0f312bc40e2e713eba525adcb72">showsr</a> : <a class="code" href="psc_8c.html#aa05918833f3a8b7fef91e11a4da20603">currow</a>;
<a name="l01637"></a>01637         maxsc = <a class="code" href="sc_8c.html#ac547c6e527b5ea4b50113d0319c5b746">showsc</a> &gt; <a class="code" href="psc_8c.html#a32e89ea1aab32cbb2b59ef4274b0f610">curcol</a> ? <a class="code" href="sc_8c.html#ac547c6e527b5ea4b50113d0319c5b746">showsc</a> : <a class="code" href="psc_8c.html#a32e89ea1aab32cbb2b59ef4274b0f610">curcol</a>;
<a name="l01638"></a>01638     } <span class="keywordflow">else</span>
<a name="l01639"></a>01639         <span class="keywordflow">if</span> (minsr == -1) <span class="keywordflow">return</span>;
<a name="l01640"></a>01640 
<a name="l01641"></a>01641     <a class="code" href="pvmtbl_8c.html#aed91143b6917f518cec727e37c387590">checkbounds</a>(&amp;maxdr, &amp;maxdc);
<a name="l01642"></a>01642 
<a name="l01643"></a>01643     <span class="keywordflow">if</span> (maxdr - mindr &lt; maxsr - minsr) maxdr = mindr + (maxsr - minsr);
<a name="l01644"></a>01644     <span class="keywordflow">if</span> (maxdc - mindc &lt; maxsc - minsc) maxdc = mindc + (maxsc - minsc);
<a name="l01645"></a>01645     <span class="keywordflow">if</span> (dv1 &amp;&amp; (v1 || !v2))
<a name="l01646"></a>01646         <a class="code" href="cmds_8c.html#aba30a6b27a9a1d41b27e71f9e5b50d27">yank_area</a>(minsr, minsc, maxsr, maxsc);
<a name="l01647"></a>01647     <a class="code" href="cmds_8c.html#a47c5eba6403f5ce3fcc50acae7e2ff7e">erase_area</a>(mindr, mindc, maxdr, maxdc, 0);
<a name="l01648"></a>01648     <a class="code" href="cmds_8c.html#aed866429b052eec13ebdc458e74fb7ae">sync_refs</a>();
<a name="l01649"></a>01649     <a class="code" href="sc_8c.html#a27f3cb42a5bc682e79e5da91f8592a9f">flush_saved</a>();
<a name="l01650"></a>01650 
<a name="l01651"></a>01651     <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot;Copying...&quot;</span>);
<a name="l01652"></a>01652     <span class="keywordflow">if</span> (!<a class="code" href="interp_8c.html#a6825c9e12c2d5353c1741e71fbe29fc0">loading</a>)
<a name="l01653"></a>01653         refresh();
<a name="l01654"></a>01654     p = <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>];
<a name="l01655"></a>01655     <span class="keywordflow">if</span> (minsr == maxsr &amp;&amp; minsc == maxsc) {
<a name="l01656"></a>01656         <span class="comment">/* Source is a single cell */</span>
<a name="l01657"></a>01657         <span class="keywordflow">for</span> (deltar = mindr - p-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>; deltar &lt;= maxdr - p-&gt;<a class="code" href="help_8c.html#a3a974d15c9cde2c3be4c2ad715920fc1">row</a>; deltar++)
<a name="l01658"></a>01658             <span class="keywordflow">for</span> (deltac = mindc - p-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>; deltac &lt;= maxdc - p-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>; deltac++)
<a name="l01659"></a>01659                 <a class="code" href="interp_8c.html#a55fffd29e22d23bbd91f6784c4ec27e0">copydbuf</a>(deltar, deltac);
<a name="l01660"></a>01660     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (minsr == maxsr) {
<a name="l01661"></a>01661         <span class="comment">/* Source is a single row */</span>
<a name="l01662"></a>01662         deltac = mindc - p-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>;
<a name="l01663"></a>01663         <span class="keywordflow">for</span> (deltar = mindr - p-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>; deltar &lt;= maxdr - p-&gt;<a class="code" href="help_8c.html#a3a974d15c9cde2c3be4c2ad715920fc1">row</a>; deltar++)
<a name="l01664"></a>01664             <a class="code" href="interp_8c.html#a55fffd29e22d23bbd91f6784c4ec27e0">copydbuf</a>(deltar, deltac);
<a name="l01665"></a>01665     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (minsc == maxsc) {
<a name="l01666"></a>01666         <span class="comment">/* Source is a single column */</span>
<a name="l01667"></a>01667         deltar = mindr - p-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>;
<a name="l01668"></a>01668         <span class="keywordflow">for</span> (deltac = mindc - p-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>; deltac &lt;= maxdc - p-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>; deltac++)
<a name="l01669"></a>01669             <a class="code" href="interp_8c.html#a55fffd29e22d23bbd91f6784c4ec27e0">copydbuf</a>(deltar, deltac);
<a name="l01670"></a>01670     } <span class="keywordflow">else</span> {
<a name="l01671"></a>01671         <span class="comment">/* Everything else */</span>
<a name="l01672"></a>01672         deltar = mindr - p-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>;
<a name="l01673"></a>01673         deltac = mindc - p-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>;
<a name="l01674"></a>01674         <a class="code" href="interp_8c.html#a55fffd29e22d23bbd91f6784c4ec27e0">copydbuf</a>(deltar, deltac);
<a name="l01675"></a>01675     }
<a name="l01676"></a>01676 
<a name="l01677"></a>01677     <span class="keywordflow">if</span> (dv1 &amp;&amp; (v1 || !v2)) {
<a name="l01678"></a>01678         <a class="code" href="cmds_8c.html#aed866429b052eec13ebdc458e74fb7ae">sync_refs</a>();
<a name="l01679"></a>01679         <a class="code" href="sc_8c.html#a27f3cb42a5bc682e79e5da91f8592a9f">flush_saved</a>();
<a name="l01680"></a>01680     }
<a name="l01681"></a>01681 
<a name="l01682"></a>01682     <span class="keywordflow">if</span> (dv1 == NULL) {
<a name="l01683"></a>01683         <span class="keywordflow">if</span> (<a class="code" href="sc_8c.html#abe99be93a37f35fc61676cefb0386a8f">qbuf</a> &amp;&amp; <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[<a class="code" href="sc_8c.html#abe99be93a37f35fc61676cefb0386a8f">qbuf</a>]) {
<a name="l01684"></a>01684             <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>] = NULL;
<a name="l01685"></a>01685             <a class="code" href="sc_8c.html#af0604f74020ff209d6d2769eb5cf5cb4">delbuffmt</a>[<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>--] = NULL;
<a name="l01686"></a>01686         }
<a name="l01687"></a>01687         qbuf = 0;
<a name="l01688"></a>01688     }
<a name="l01689"></a>01689     <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot;Copy done.&quot;</span>);
<a name="l01690"></a>01690 }
<a name="l01691"></a>01691 
<a name="l01692"></a>01692 <span class="keywordtype">void</span>
<a name="l01693"></a><a class="code" href="interp_8c.html#a55fffd29e22d23bbd91f6784c4ec27e0">01693</a> <a class="code" href="interp_8c.html#a55fffd29e22d23bbd91f6784c4ec27e0">copydbuf</a>(<span class="keywordtype">int</span> deltar, <span class="keywordtype">int</span> deltac)
<a name="l01694"></a>01694 {
<a name="l01695"></a>01695     <span class="keywordtype">int</span> vr, vc;
<a name="l01696"></a>01696     <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *p = <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>];
<a name="l01697"></a>01697     <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *n;
<a name="l01698"></a>01698 
<a name="l01699"></a>01699     <span class="keywordflow">while</span> (p) {
<a name="l01700"></a>01700         vr = p-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a> + deltar;
<a name="l01701"></a>01701         vc = p-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a> + deltac;
<a name="l01702"></a>01702         n = <a class="code" href="sc_8c.html#a119a206e8bc414b4c30942f4ff8b2b6c">lookat</a>(vr, vc);
<a name="l01703"></a>01703         <span class="keywordflow">if</span> (n-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a>&amp;<a class="code" href="sc_8h.html#ab7711cca790f4954262812032305a3ee">is_locked</a>) <span class="keywordflow">continue</span>;
<a name="l01704"></a>01704         <a class="code" href="cmds_8c.html#a669a9234e84f65738404e297d8b4ee3b">copyent</a>(n, p, deltar, deltac, 0, 0, <a class="code" href="sc_8c.html#ad692516c5ad5adc8f9f75c558f0138a0">maxrow</a>, <a class="code" href="sc_8c.html#a81ef4758a949baa6a6f8355f0e4d3280">maxcol</a>, 0);
<a name="l01705"></a>01705         p = p-&gt;<a class="code" href="structent.html#a043cc4f35d88b90312ecfc23aa411391">next</a>;
<a name="l01706"></a>01706     }
<a name="l01707"></a>01707 }
<a name="l01708"></a>01708 
<a name="l01709"></a>01709 <span class="comment">/* ERASE a Range of cells */</span>
<a name="l01710"></a>01710 <span class="keywordtype">void</span>
<a name="l01711"></a><a class="code" href="sc_8h.html#a3b12174d65c3a7ef35f53320c5917657">01711</a> <a class="code" href="interp_8c.html#a3b12174d65c3a7ef35f53320c5917657">eraser</a>(<span class="keyword">struct</span> <a class="code" href="structent.html">ent</a> *v1, <span class="keyword">struct</span> <a class="code" href="structent.html">ent</a> *v2)
<a name="l01712"></a>01712 {
<a name="l01713"></a>01713     <span class="keywordtype">int</span> i;
<a name="l01714"></a>01714     <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *obuf = NULL;
<a name="l01715"></a>01715 
<a name="l01716"></a>01716     <span class="keywordflow">if</span> (<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a> &lt; 0) <a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>++;
<a name="l01717"></a>01717     <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>] = <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[<a class="code" href="sc_8h.html#a9b31f162cba2e89384217d9d8346b8f4">DELBUFSIZE</a> - 1];
<a name="l01718"></a>01718     <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[<a class="code" href="sc_8h.html#a9b31f162cba2e89384217d9d8346b8f4">DELBUFSIZE</a> - 1] = NULL;
<a name="l01719"></a>01719     <a class="code" href="sc_8c.html#af0604f74020ff209d6d2769eb5cf5cb4">delbuffmt</a>[<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>] = <a class="code" href="sc_8c.html#af0604f74020ff209d6d2769eb5cf5cb4">delbuffmt</a>[<a class="code" href="sc_8h.html#a9b31f162cba2e89384217d9d8346b8f4">DELBUFSIZE</a> - 1];
<a name="l01720"></a>01720     <a class="code" href="sc_8c.html#af0604f74020ff209d6d2769eb5cf5cb4">delbuffmt</a>[<a class="code" href="sc_8h.html#a9b31f162cba2e89384217d9d8346b8f4">DELBUFSIZE</a> - 1] = NULL;
<a name="l01721"></a>01721     <span class="keywordflow">for</span> (i = <a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a> + 1; i &lt; <a class="code" href="sc_8h.html#a9b31f162cba2e89384217d9d8346b8f4">DELBUFSIZE</a>; i++) {
<a name="l01722"></a>01722         <span class="keywordflow">if</span> (<a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[i] == <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>]) {
<a name="l01723"></a>01723             <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>] = NULL;
<a name="l01724"></a>01724             <a class="code" href="sc_8c.html#af0604f74020ff209d6d2769eb5cf5cb4">delbuffmt</a>[<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>] = NULL;
<a name="l01725"></a>01725             <span class="keywordflow">break</span>;
<a name="l01726"></a>01726         }
<a name="l01727"></a>01727     }
<a name="l01728"></a>01728     <a class="code" href="sc_8c.html#a27f3cb42a5bc682e79e5da91f8592a9f">flush_saved</a>();
<a name="l01729"></a>01729     <span class="keywordflow">if</span> (<a class="code" href="sc_8c.html#abe99be93a37f35fc61676cefb0386a8f">qbuf</a>) {
<a name="l01730"></a>01730         <span class="keywordflow">if</span> (<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a> &lt; 0) <a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>++;
<a name="l01731"></a>01731         <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>] = <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[<a class="code" href="sc_8c.html#abe99be93a37f35fc61676cefb0386a8f">qbuf</a>];
<a name="l01732"></a>01732         <a class="code" href="sc_8c.html#af0604f74020ff209d6d2769eb5cf5cb4">delbuffmt</a>[<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>] = <a class="code" href="sc_8c.html#af0604f74020ff209d6d2769eb5cf5cb4">delbuffmt</a>[<a class="code" href="sc_8c.html#abe99be93a37f35fc61676cefb0386a8f">qbuf</a>];
<a name="l01733"></a>01733         <a class="code" href="sc_8c.html#a27f3cb42a5bc682e79e5da91f8592a9f">flush_saved</a>();
<a name="l01734"></a>01734         obuf = <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[<a class="code" href="sc_8c.html#abe99be93a37f35fc61676cefb0386a8f">qbuf</a>];    <span class="comment">/* orig. contents of the del. buffer */</span>
<a name="l01735"></a>01735     }
<a name="l01736"></a>01736     <a class="code" href="cmds_8c.html#a47c5eba6403f5ce3fcc50acae7e2ff7e">erase_area</a>(v1-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>, v1-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>, v2-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>, v2-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>, 0);
<a name="l01737"></a>01737     <a class="code" href="cmds_8c.html#aed866429b052eec13ebdc458e74fb7ae">sync_refs</a>();
<a name="l01738"></a>01738     <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="sc_8h.html#a9b31f162cba2e89384217d9d8346b8f4">DELBUFSIZE</a>; i++)
<a name="l01739"></a>01739         <span class="keywordflow">if</span> ((obuf &amp;&amp; <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[i] == obuf) || (<a class="code" href="sc_8c.html#abe99be93a37f35fc61676cefb0386a8f">qbuf</a> &amp;&amp; i == <a class="code" href="sc_8c.html#abe99be93a37f35fc61676cefb0386a8f">qbuf</a>)) {
<a name="l01740"></a>01740             <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[i] = <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>];
<a name="l01741"></a>01741             <a class="code" href="sc_8c.html#af0604f74020ff209d6d2769eb5cf5cb4">delbuffmt</a>[i] = <a class="code" href="sc_8c.html#af0604f74020ff209d6d2769eb5cf5cb4">delbuffmt</a>[<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>];
<a name="l01742"></a>01742         }
<a name="l01743"></a>01743     <a class="code" href="sc_8c.html#abe99be93a37f35fc61676cefb0386a8f">qbuf</a> = 0;
<a name="l01744"></a>01744     <span class="keywordflow">for</span> (i = DELBUFSIZE - 1; i &gt; DELBUFSIZE - 9; i--) {
<a name="l01745"></a>01745         <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[i] = <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[i-1];
<a name="l01746"></a>01746         <a class="code" href="sc_8c.html#af0604f74020ff209d6d2769eb5cf5cb4">delbuffmt</a>[i] = <a class="code" href="sc_8c.html#af0604f74020ff209d6d2769eb5cf5cb4">delbuffmt</a>[i-1];
<a name="l01747"></a>01747     }
<a name="l01748"></a>01748     <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[DELBUFSIZE - 9] = <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>];
<a name="l01749"></a>01749     <a class="code" href="sc_8c.html#af0604f74020ff209d6d2769eb5cf5cb4">delbuffmt</a>[DELBUFSIZE - 9] = <a class="code" href="sc_8c.html#af0604f74020ff209d6d2769eb5cf5cb4">delbuffmt</a>[<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>];
<a name="l01750"></a>01750     <a class="code" href="sc_8c.html#a097b228db628667b011ac79ea89ba080">FullUpdate</a>++;
<a name="l01751"></a>01751     <a class="code" href="sc_8c.html#a5da08c7117ad335645302cccb2b68e59">modflg</a>++;
<a name="l01752"></a>01752 }
<a name="l01753"></a>01753 
<a name="l01754"></a>01754 <span class="comment">/* YANK a Range of cells */</span>
<a name="l01755"></a>01755 <span class="keywordtype">void</span>
<a name="l01756"></a><a class="code" href="sc_8h.html#a41e40c636fe9a53c635bf31149ae356e">01756</a> <a class="code" href="interp_8c.html#a41e40c636fe9a53c635bf31149ae356e">yankr</a>(<span class="keyword">struct</span> <a class="code" href="structent.html">ent</a> *v1, <span class="keyword">struct</span> <a class="code" href="structent.html">ent</a> *v2)
<a name="l01757"></a>01757 {
<a name="l01758"></a>01758     <span class="keywordtype">int</span> i, qtmp;
<a name="l01759"></a>01759     <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *obuf = NULL;
<a name="l01760"></a>01760 
<a name="l01761"></a>01761     <span class="keywordflow">if</span> (<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a> &lt; 0) <a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>++;
<a name="l01762"></a>01762     <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>] = <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[<a class="code" href="sc_8h.html#a9b31f162cba2e89384217d9d8346b8f4">DELBUFSIZE</a> - 10];
<a name="l01763"></a>01763     <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[<a class="code" href="sc_8h.html#a9b31f162cba2e89384217d9d8346b8f4">DELBUFSIZE</a> - 10] = NULL;
<a name="l01764"></a>01764     <a class="code" href="sc_8c.html#af0604f74020ff209d6d2769eb5cf5cb4">delbuffmt</a>[<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>] = <a class="code" href="sc_8c.html#af0604f74020ff209d6d2769eb5cf5cb4">delbuffmt</a>[<a class="code" href="sc_8h.html#a9b31f162cba2e89384217d9d8346b8f4">DELBUFSIZE</a> - 10];
<a name="l01765"></a>01765     <a class="code" href="sc_8c.html#af0604f74020ff209d6d2769eb5cf5cb4">delbuffmt</a>[<a class="code" href="sc_8h.html#a9b31f162cba2e89384217d9d8346b8f4">DELBUFSIZE</a> - 10] = NULL;
<a name="l01766"></a>01766     <span class="keywordflow">for</span> (i = <a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a> + 1; i &lt; <a class="code" href="sc_8h.html#a9b31f162cba2e89384217d9d8346b8f4">DELBUFSIZE</a>; i++) {
<a name="l01767"></a>01767         <span class="keywordflow">if</span> (<a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[i] == <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>]) {
<a name="l01768"></a>01768             <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>] = NULL;
<a name="l01769"></a>01769             <a class="code" href="sc_8c.html#af0604f74020ff209d6d2769eb5cf5cb4">delbuffmt</a>[<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>] = NULL;
<a name="l01770"></a>01770             <span class="keywordflow">break</span>;
<a name="l01771"></a>01771         }
<a name="l01772"></a>01772     }
<a name="l01773"></a>01773     <a class="code" href="sc_8c.html#a27f3cb42a5bc682e79e5da91f8592a9f">flush_saved</a>();
<a name="l01774"></a>01774     <span class="keywordflow">if</span> (<a class="code" href="sc_8c.html#abe99be93a37f35fc61676cefb0386a8f">qbuf</a>) {
<a name="l01775"></a>01775         <span class="keywordflow">if</span> (<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a> &lt; 0) <a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>++;
<a name="l01776"></a>01776         <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>] = <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[<a class="code" href="sc_8c.html#abe99be93a37f35fc61676cefb0386a8f">qbuf</a>];
<a name="l01777"></a>01777         <a class="code" href="sc_8c.html#af0604f74020ff209d6d2769eb5cf5cb4">delbuffmt</a>[<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>] = <a class="code" href="sc_8c.html#af0604f74020ff209d6d2769eb5cf5cb4">delbuffmt</a>[<a class="code" href="sc_8c.html#abe99be93a37f35fc61676cefb0386a8f">qbuf</a>];
<a name="l01778"></a>01778         <a class="code" href="sc_8c.html#a27f3cb42a5bc682e79e5da91f8592a9f">flush_saved</a>();
<a name="l01779"></a>01779         obuf = <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[<a class="code" href="sc_8c.html#abe99be93a37f35fc61676cefb0386a8f">qbuf</a>];    <span class="comment">/* orig. contents of the del. buffer */</span>
<a name="l01780"></a>01780     }
<a name="l01781"></a>01781     qtmp = <a class="code" href="sc_8c.html#abe99be93a37f35fc61676cefb0386a8f">qbuf</a>;
<a name="l01782"></a>01782     <a class="code" href="sc_8c.html#abe99be93a37f35fc61676cefb0386a8f">qbuf</a> = 0;
<a name="l01783"></a>01783     <a class="code" href="cmds_8c.html#aba30a6b27a9a1d41b27e71f9e5b50d27">yank_area</a>(v1-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>, v1-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>, v2-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>, v2-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>);
<a name="l01784"></a>01784     <a class="code" href="sc_8c.html#abe99be93a37f35fc61676cefb0386a8f">qbuf</a> = qtmp;
<a name="l01785"></a>01785     <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="sc_8h.html#a9b31f162cba2e89384217d9d8346b8f4">DELBUFSIZE</a>; i++)
<a name="l01786"></a>01786         <span class="keywordflow">if</span> ((obuf &amp;&amp; <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[i] == obuf) || (<a class="code" href="sc_8c.html#abe99be93a37f35fc61676cefb0386a8f">qbuf</a> &amp;&amp; i == <a class="code" href="sc_8c.html#abe99be93a37f35fc61676cefb0386a8f">qbuf</a>)) {
<a name="l01787"></a>01787             <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[i] = <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>];
<a name="l01788"></a>01788             <a class="code" href="sc_8c.html#af0604f74020ff209d6d2769eb5cf5cb4">delbuffmt</a>[i] = <a class="code" href="sc_8c.html#af0604f74020ff209d6d2769eb5cf5cb4">delbuffmt</a>[<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>];
<a name="l01789"></a>01789         }
<a name="l01790"></a>01790     <a class="code" href="sc_8c.html#abe99be93a37f35fc61676cefb0386a8f">qbuf</a> = 0;
<a name="l01791"></a>01791     <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[DELBUFSIZE - 10] = <a class="code" href="sc_8c.html#a2b97f7a43723fa86e338fcccf7c1014d">delbuf</a>[<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>];
<a name="l01792"></a>01792     <a class="code" href="sc_8c.html#af0604f74020ff209d6d2769eb5cf5cb4">delbuffmt</a>[DELBUFSIZE - 10] = <a class="code" href="sc_8c.html#af0604f74020ff209d6d2769eb5cf5cb4">delbuffmt</a>[<a class="code" href="sc_8c.html#a1f12f8959111d861064697a84496a984">dbidx</a>];
<a name="l01793"></a>01793 }
<a name="l01794"></a>01794 
<a name="l01795"></a>01795 <span class="comment">/* MOVE a Range of cells */</span>
<a name="l01796"></a>01796 <span class="keywordtype">void</span>
<a name="l01797"></a><a class="code" href="sc_8h.html#aa3069babe8a2d629bb71b713b834fa00">01797</a> <a class="code" href="interp_8c.html#aa3069babe8a2d629bb71b713b834fa00">mover</a>(<span class="keyword">struct</span> <a class="code" href="structent.html">ent</a> *d, <span class="keyword">struct</span> <a class="code" href="structent.html">ent</a> *v1, <span class="keyword">struct</span> <a class="code" href="structent.html">ent</a> *v2)
<a name="l01798"></a>01798 {
<a name="l01799"></a>01799     <a class="code" href="cmds_8c.html#a824784b28df3d60bb5a89e61bbdb4df8">move_area</a>(d-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>, d-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>, v1-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>, v1-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>, v2-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>, v2-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>);
<a name="l01800"></a>01800     <a class="code" href="cmds_8c.html#aed866429b052eec13ebdc458e74fb7ae">sync_refs</a>();
<a name="l01801"></a>01801     <a class="code" href="sc_8c.html#a097b228db628667b011ac79ea89ba080">FullUpdate</a>++;
<a name="l01802"></a>01802 }
<a name="l01803"></a>01803 
<a name="l01804"></a>01804 <span class="comment">/* Goto subroutines */</span>
<a name="l01805"></a>01805 
<a name="l01806"></a>01806 <span class="keywordtype">void</span>
<a name="l01807"></a><a class="code" href="interp_8c.html#ab6370bb4927c40caf8560fd816563236">01807</a> <a class="code" href="interp_8c.html#ab6370bb4927c40caf8560fd816563236">g_free</a>()
<a name="l01808"></a>01808 {
<a name="l01809"></a>01809     <span class="keywordflow">switch</span> (<a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#ac5e5668040857907701f5dc0bcf4da2f">g_type</a>) {
<a name="l01810"></a>01810         <span class="keywordflow">case</span> <a class="code" href="interp_8c.html#a8c071082596007b19b854975272b73bd">G_STR</a>:
<a name="l01811"></a>01811         <span class="keywordflow">case</span> <a class="code" href="interp_8c.html#aa9aa1c757d3baad975fe85af45624d15">G_NSTR</a>: <a class="code" href="pxmalloc_8c.html#a319bd47b6e3c09b65d3d666d7007bdc3">scxfree</a>(<a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#a7b974c6d9cd2e7d0ffc26b72cd06db7c">g_s</a>); <span class="keywordflow">break</span>;
<a name="l01812"></a>01812         <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;
<a name="l01813"></a>01813     }
<a name="l01814"></a>01814     <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#ac5e5668040857907701f5dc0bcf4da2f">g_type</a> = <a class="code" href="interp_8c.html#a8a014a87901d1d2fff9c30f54d7ec8ac">G_NONE</a>;
<a name="l01815"></a>01815     <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#ac6fece5f1d148ca3805561e023969d74">errsearch</a> = 0;
<a name="l01816"></a>01816 }
<a name="l01817"></a>01817 
<a name="l01818"></a>01818 <span class="comment">/* repeat the last goto command */</span>
<a name="l01819"></a>01819 <span class="keywordtype">void</span>
<a name="l01820"></a><a class="code" href="sc_8h.html#afe15c3ec1efcd7976af04ae975025dd9">01820</a> <a class="code" href="interp_8c.html#afe15c3ec1efcd7976af04ae975025dd9">go_last</a>()
<a name="l01821"></a>01821 {
<a name="l01822"></a>01822     <span class="keywordtype">int</span> num = 0;
<a name="l01823"></a>01823 
<a name="l01824"></a>01824     <span class="keywordflow">switch</span> (<a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#ac5e5668040857907701f5dc0bcf4da2f">g_type</a>) {
<a name="l01825"></a>01825         <span class="keywordflow">case</span> <a class="code" href="interp_8c.html#a8a014a87901d1d2fff9c30f54d7ec8ac">G_NONE</a>:
<a name="l01826"></a>01826             <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot;Nothing to repeat&quot;</span>); <span class="keywordflow">break</span>;
<a name="l01827"></a>01827         <span class="keywordflow">case</span> <a class="code" href="interp_8c.html#a9da532e1aa41d1d3bb8f88e96aa41ca5">G_NUM</a>:
<a name="l01828"></a>01828             <a class="code" href="interp_8c.html#a50011b6d1c80523e4133c25286842891">num_search</a>(<a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#a0bc63d27e7018cd7905e57e75691831d">g_n</a>, <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#aa0aa256db57743313635e3e710f264bc">g_row</a>, <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#a240ac3bac7b6989d36c98174f971d644">g_col</a>,
<a name="l01829"></a>01829                 <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#ab3464409ef2e726b274b0f5865a7f449">g_lastrow</a>, <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#af00d3784621aaf55e960e2fb2167701f">g_lastcol</a>, <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#ac6fece5f1d148ca3805561e023969d74">errsearch</a>);
<a name="l01830"></a>01830             <span class="keywordflow">break</span>;
<a name="l01831"></a>01831         <span class="keywordflow">case</span> <a class="code" href="interp_8c.html#a9ed9f31a26d542df88331116511098ca">G_CELL</a>:
<a name="l01832"></a>01832             <a class="code" href="interp_8c.html#a9f04ba82da310bdcc3be9b80f772bfea">moveto</a>(<a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#aa0aa256db57743313635e3e710f264bc">g_row</a>, <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#a240ac3bac7b6989d36c98174f971d644">g_col</a>, <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#ab3464409ef2e726b274b0f5865a7f449">g_lastrow</a>, <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#af00d3784621aaf55e960e2fb2167701f">g_lastcol</a>,
<a name="l01833"></a>01833                 <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#a4bbee01e713ca87eb201d3706c56b309">strow</a>, <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#a9cd53a4e086a6014ccc1d23e3fbb7a71">stcol</a>);
<a name="l01834"></a>01834             <span class="keywordflow">break</span>;
<a name="l01835"></a>01835         <span class="keywordflow">case</span> <a class="code" href="interp_8c.html#adf4f0280a0c65f6879059eb789731eb8">G_XSTR</a>: 
<a name="l01836"></a>01836             num++;
<a name="l01837"></a>01837         <span class="keywordflow">case</span> <a class="code" href="interp_8c.html#aa9aa1c757d3baad975fe85af45624d15">G_NSTR</a>: 
<a name="l01838"></a>01838             num++;
<a name="l01839"></a>01839         <span class="keywordflow">case</span> <a class="code" href="interp_8c.html#a8c071082596007b19b854975272b73bd">G_STR</a>: 
<a name="l01840"></a>01840             <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#ac5e5668040857907701f5dc0bcf4da2f">g_type</a> = <a class="code" href="interp_8c.html#a8a014a87901d1d2fff9c30f54d7ec8ac">G_NONE</a>; <span class="comment">/* Don&#39;t free the string */</span>
<a name="l01841"></a>01841             <a class="code" href="interp_8c.html#a23862a0de8c1a9fc01cd28fc74e3a0f5">str_search</a>(<a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#a7b974c6d9cd2e7d0ffc26b72cd06db7c">g_s</a>, <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#aa0aa256db57743313635e3e710f264bc">g_row</a>, <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#a240ac3bac7b6989d36c98174f971d644">g_col</a>, <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#ab3464409ef2e726b274b0f5865a7f449">g_lastrow</a>, <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#af00d3784621aaf55e960e2fb2167701f">g_lastcol</a>,
<a name="l01842"></a>01842                     num); 
<a name="l01843"></a>01843             <span class="keywordflow">break</span>;
<a name="l01844"></a>01844 
<a name="l01845"></a>01845         <span class="keywordflow">default</span>: <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot;go_last: internal error&quot;</span>);
<a name="l01846"></a>01846     }
<a name="l01847"></a>01847 }
<a name="l01848"></a>01848 
<a name="l01849"></a>01849 <span class="comment">/* Place the cursor on a given cell.  If cornerrow &gt;= 0, place the cell</span>
<a name="l01850"></a>01850 <span class="comment"> * at row cornerrow and column cornercol in the upper left corner of the</span>
<a name="l01851"></a>01851 <span class="comment"> * screen if possible.</span>
<a name="l01852"></a>01852 <span class="comment"> */</span>
<a name="l01853"></a>01853 <span class="keywordtype">void</span>
<a name="l01854"></a><a class="code" href="sc_8h.html#a44965f8851b1e228ea4e5f0c4783da2b">01854</a> <a class="code" href="interp_8c.html#a9f04ba82da310bdcc3be9b80f772bfea">moveto</a>(<span class="keywordtype">int</span> <a class="code" href="help_8c.html#a3a974d15c9cde2c3be4c2ad715920fc1">row</a>, <span class="keywordtype">int</span> <a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>, <span class="keywordtype">int</span> <a class="code" href="screen_8c.html#a47871bc65fa6b49d78379e94a4f17616">lastrow</a>, <span class="keywordtype">int</span> <a class="code" href="sc_8c.html#a6fc2d90004d9b8943013c1aac621ff86">lastcol</a>, <span class="keywordtype">int</span> cornerrow,
<a name="l01855"></a>01855     <span class="keywordtype">int</span> cornercol)
<a name="l01856"></a>01856 {
<a name="l01857"></a>01857     <span class="keyword">register</span> <span class="keywordtype">int</span> i;
<a name="l01858"></a>01858 
<a name="l01859"></a>01859     <span class="keywordflow">if</span> (!<a class="code" href="interp_8c.html#a6825c9e12c2d5353c1741e71fbe29fc0">loading</a> &amp;&amp; row != -1 &amp;&amp; (row != <a class="code" href="psc_8c.html#aa05918833f3a8b7fef91e11a4da20603">currow</a> || col != <a class="code" href="psc_8c.html#a32e89ea1aab32cbb2b59ef4274b0f610">curcol</a>))
<a name="l01860"></a>01860         <a class="code" href="sc_8h.html#a6952e86fc1b1fb65d18dd0cd44ca7f8c">remember</a>(0);
<a name="l01861"></a>01861 
<a name="l01862"></a>01862     <a class="code" href="psc_8c.html#aa05918833f3a8b7fef91e11a4da20603">currow</a> = <a class="code" href="help_8c.html#a3a974d15c9cde2c3be4c2ad715920fc1">row</a>;
<a name="l01863"></a>01863     <a class="code" href="psc_8c.html#a32e89ea1aab32cbb2b59ef4274b0f610">curcol</a> = <a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>;
<a name="l01864"></a>01864     <a class="code" href="interp_8c.html#ab6370bb4927c40caf8560fd816563236">g_free</a>();
<a name="l01865"></a>01865     <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#ac5e5668040857907701f5dc0bcf4da2f">g_type</a> = <a class="code" href="interp_8c.html#a9ed9f31a26d542df88331116511098ca">G_CELL</a>;
<a name="l01866"></a>01866     <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#aa0aa256db57743313635e3e710f264bc">g_row</a> = <a class="code" href="psc_8c.html#aa05918833f3a8b7fef91e11a4da20603">currow</a>;
<a name="l01867"></a>01867     <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#a240ac3bac7b6989d36c98174f971d644">g_col</a> = <a class="code" href="psc_8c.html#a32e89ea1aab32cbb2b59ef4274b0f610">curcol</a>;
<a name="l01868"></a>01868     <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#ab3464409ef2e726b274b0f5865a7f449">g_lastrow</a> = <a class="code" href="screen_8c.html#a47871bc65fa6b49d78379e94a4f17616">lastrow</a>;
<a name="l01869"></a>01869     <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#af00d3784621aaf55e960e2fb2167701f">g_lastcol</a> = <a class="code" href="sc_8c.html#a6fc2d90004d9b8943013c1aac621ff86">lastcol</a>;
<a name="l01870"></a>01870     <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#a4bbee01e713ca87eb201d3706c56b309">strow</a> = cornerrow;
<a name="l01871"></a>01871     <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#a9cd53a4e086a6014ccc1d23e3fbb7a71">stcol</a> = cornercol;
<a name="l01872"></a>01872     <span class="keywordflow">if</span> (cornerrow &gt;= 0) {
<a name="l01873"></a>01873         <a class="code" href="sc_8c.html#a6e024dcb91dad2af334489509c9cca40">strow</a> = cornerrow;
<a name="l01874"></a>01874         <a class="code" href="sc_8c.html#a5730feb7ee0c6253a7144429fe9238de">stcol</a> = cornercol;
<a name="l01875"></a>01875         <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#a3a2c68bbbe12ea9bb3f384b39abeeb59">stflag</a> = 1;
<a name="l01876"></a>01876     } <span class="keywordflow">else</span>
<a name="l01877"></a>01877         <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#a3a2c68bbbe12ea9bb3f384b39abeeb59">stflag</a> = 0;
<a name="l01878"></a>01878     <span class="keywordflow">for</span> (<a class="code" href="sc_8c.html#a5fbb0d87dafab6069be59becba1bc506">rowsinrange</a> = 0, i = row; i &lt;= <a class="code" href="screen_8c.html#a47871bc65fa6b49d78379e94a4f17616">lastrow</a>; i++) {
<a name="l01879"></a>01879         <span class="keywordflow">if</span> (<a class="code" href="sc_8c.html#a3c86d4e1ef623cd7e974c6974dc47542">row_hidden</a>[i])
<a name="l01880"></a>01880             <span class="keywordflow">continue</span>;
<a name="l01881"></a>01881         <a class="code" href="sc_8c.html#a5fbb0d87dafab6069be59becba1bc506">rowsinrange</a>++;
<a name="l01882"></a>01882     }
<a name="l01883"></a>01883     <span class="keywordflow">for</span> (<a class="code" href="sc_8c.html#a1ab65195b09be19b606459489c260b86">colsinrange</a> = 0, i = col; i &lt;= <a class="code" href="sc_8c.html#a6fc2d90004d9b8943013c1aac621ff86">lastcol</a>; i++) {
<a name="l01884"></a>01884         <span class="keywordflow">if</span> (<a class="code" href="sc_8c.html#a835f456ca402ce6970a27111b1328bf8">col_hidden</a>[i])
<a name="l01885"></a>01885             <span class="keywordflow">continue</span>;
<a name="l01886"></a>01886         <a class="code" href="sc_8c.html#a1ab65195b09be19b606459489c260b86">colsinrange</a> += <a class="code" href="psc_8c.html#a380deb5bf2969f013bb9b5f197d1ea8f">fwidth</a>[i];
<a name="l01887"></a>01887     }
<a name="l01888"></a>01888     <a class="code" href="sc_8c.html#a097b228db628667b011ac79ea89ba080">FullUpdate</a>++;
<a name="l01889"></a>01889     <span class="keywordflow">if</span> (<a class="code" href="interp_8c.html#a6825c9e12c2d5353c1741e71fbe29fc0">loading</a>) {
<a name="l01890"></a>01890         <a class="code" href="sc_8c.html#ac5c54df7ed3b930268c8d7752c101725">update</a>(1);
<a name="l01891"></a>01891         <a class="code" href="sc_8c.html#aaece488ae3f9f67f9991b0c90fd12369">changed</a> = 0;
<a name="l01892"></a>01892     } <span class="keywordflow">else</span>
<a name="l01893"></a>01893         <a class="code" href="sc_8h.html#a6952e86fc1b1fb65d18dd0cd44ca7f8c">remember</a>(1);
<a name="l01894"></a>01894 }
<a name="l01895"></a>01895 
<a name="l01896"></a>01896 <span class="comment">/*</span>
<a name="l01897"></a>01897 <span class="comment"> * &#39;goto&#39; either a given number,&#39;error&#39;, or &#39;invalid&#39; starting at currow,curcol</span>
<a name="l01898"></a>01898 <span class="comment"> */</span>
<a name="l01899"></a>01899 <span class="keywordtype">void</span>
<a name="l01900"></a><a class="code" href="sc_8h.html#a50011b6d1c80523e4133c25286842891">01900</a> <a class="code" href="interp_8c.html#a50011b6d1c80523e4133c25286842891">num_search</a>(<span class="keywordtype">double</span> n, <span class="keywordtype">int</span> firstrow, <span class="keywordtype">int</span> firstcol, <span class="keywordtype">int</span> <a class="code" href="screen_8c.html#a47871bc65fa6b49d78379e94a4f17616">lastrow</a>,
<a name="l01901"></a>01901     <span class="keywordtype">int</span> <a class="code" href="sc_8c.html#a6fc2d90004d9b8943013c1aac621ff86">lastcol</a>, <span class="keywordtype">int</span> errsearch)
<a name="l01902"></a>01902 {
<a name="l01903"></a>01903     <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *p;
<a name="l01904"></a>01904     <span class="keyword">register</span> <span class="keywordtype">int</span> r,c;
<a name="l01905"></a>01905     <span class="keywordtype">int</span> endr, endc;
<a name="l01906"></a>01906 
<a name="l01907"></a>01907     <span class="keywordflow">if</span> (!<a class="code" href="interp_8c.html#a6825c9e12c2d5353c1741e71fbe29fc0">loading</a>)
<a name="l01908"></a>01908         <a class="code" href="sc_8h.html#a6952e86fc1b1fb65d18dd0cd44ca7f8c">remember</a>(0);
<a name="l01909"></a>01909 
<a name="l01910"></a>01910     <a class="code" href="interp_8c.html#ab6370bb4927c40caf8560fd816563236">g_free</a>();
<a name="l01911"></a>01911     <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#ac5e5668040857907701f5dc0bcf4da2f">g_type</a> = <a class="code" href="interp_8c.html#a9da532e1aa41d1d3bb8f88e96aa41ca5">G_NUM</a>;
<a name="l01912"></a>01912     <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#a0bc63d27e7018cd7905e57e75691831d">g_n</a> = n;
<a name="l01913"></a>01913     <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#aa0aa256db57743313635e3e710f264bc">g_row</a> = firstrow;
<a name="l01914"></a>01914     <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#a240ac3bac7b6989d36c98174f971d644">g_col</a> = firstcol;
<a name="l01915"></a>01915     <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#ab3464409ef2e726b274b0f5865a7f449">g_lastrow</a> = <a class="code" href="screen_8c.html#a47871bc65fa6b49d78379e94a4f17616">lastrow</a>;
<a name="l01916"></a>01916     <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#af00d3784621aaf55e960e2fb2167701f">g_lastcol</a> = <a class="code" href="sc_8c.html#a6fc2d90004d9b8943013c1aac621ff86">lastcol</a>;
<a name="l01917"></a>01917     <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#ac6fece5f1d148ca3805561e023969d74">errsearch</a> = errsearch;
<a name="l01918"></a>01918 
<a name="l01919"></a>01919     <span class="keywordflow">if</span> (<a class="code" href="psc_8c.html#aa05918833f3a8b7fef91e11a4da20603">currow</a> &gt;= firstrow &amp;&amp; <a class="code" href="psc_8c.html#aa05918833f3a8b7fef91e11a4da20603">currow</a> &lt;= lastrow &amp;&amp;
<a name="l01920"></a>01920             <a class="code" href="psc_8c.html#a32e89ea1aab32cbb2b59ef4274b0f610">curcol</a> &gt;= firstcol &amp;&amp; <a class="code" href="psc_8c.html#a32e89ea1aab32cbb2b59ef4274b0f610">curcol</a> &lt;= lastcol) {
<a name="l01921"></a>01921         endr = <a class="code" href="psc_8c.html#aa05918833f3a8b7fef91e11a4da20603">currow</a>;
<a name="l01922"></a>01922         endc = <a class="code" href="psc_8c.html#a32e89ea1aab32cbb2b59ef4274b0f610">curcol</a>;
<a name="l01923"></a>01923     } <span class="keywordflow">else</span> {
<a name="l01924"></a>01924         endr = <a class="code" href="screen_8c.html#a47871bc65fa6b49d78379e94a4f17616">lastrow</a>;
<a name="l01925"></a>01925         endc = <a class="code" href="sc_8c.html#a6fc2d90004d9b8943013c1aac621ff86">lastcol</a>;
<a name="l01926"></a>01926     }
<a name="l01927"></a>01927     r = endr;
<a name="l01928"></a>01928     c = endc;
<a name="l01929"></a>01929     <span class="keywordflow">while</span> (1) {
<a name="l01930"></a>01930         <span class="keywordflow">if</span> (c &lt; lastcol)
<a name="l01931"></a>01931             c++;
<a name="l01932"></a>01932         <span class="keywordflow">else</span> {
<a name="l01933"></a>01933             <span class="keywordflow">if</span> (r &lt; lastrow) {
<a name="l01934"></a>01934                 <span class="keywordflow">while</span> (++r &lt; lastrow &amp;&amp; <a class="code" href="sc_8c.html#a3c86d4e1ef623cd7e974c6974dc47542">row_hidden</a>[r]) <span class="comment">/* */</span>;
<a name="l01935"></a>01935                 c = firstcol;
<a name="l01936"></a>01936             } <span class="keywordflow">else</span> {
<a name="l01937"></a>01937                 r = firstrow;
<a name="l01938"></a>01938                 c = firstcol;
<a name="l01939"></a>01939             }
<a name="l01940"></a>01940         }
<a name="l01941"></a>01941         p = *<a class="code" href="sc_8h.html#a2288f3ade588c7240beef3b7a301051b">ATBL</a>(<a class="code" href="sc_8c.html#ab1cc8ce06f419cceb40acdf03a6bb4fc">tbl</a>, r, c);
<a name="l01942"></a>01942         <span class="keywordflow">if</span> (!<a class="code" href="sc_8c.html#a835f456ca402ce6970a27111b1328bf8">col_hidden</a>[c] &amp;&amp; p &amp;&amp; (p-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> &amp; <a class="code" href="sc_8h.html#a242aaa897b3487fbbae12bf4b297ad1b">is_valid</a>) &amp;&amp;
<a name="l01943"></a>01943                 (errsearch || (p-&gt;<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a> == n)) &amp;&amp; (!errsearch ||
<a name="l01944"></a>01944                 (p-&gt;<a class="code" href="structent.html#ab08000c5e4f50af3a8f55684f634ca7e">cellerror</a> == errsearch)))   <span class="comment">/* CELLERROR vs CELLINVALID */</span>
<a name="l01945"></a>01945             <span class="keywordflow">break</span>;
<a name="l01946"></a>01946         <span class="keywordflow">if</span> (r == endr &amp;&amp; c == endc) {
<a name="l01947"></a>01947             <span class="keywordflow">if</span> (errsearch)
<a name="l01948"></a>01948                 <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot;no %s cell found&quot;</span>, errsearch == <a class="code" href="sc_8h.html#a21246343b17f2039f546f18e0e72cff6">CELLERROR</a> ? <span class="stringliteral">&quot;ERROR&quot;</span> :
<a name="l01949"></a>01949                       <span class="stringliteral">&quot;INVALID&quot;</span>);
<a name="l01950"></a>01950             <span class="keywordflow">else</span>
<a name="l01951"></a>01951                 <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot;Number not found&quot;</span>);
<a name="l01952"></a>01952             <span class="keywordflow">return</span>;
<a name="l01953"></a>01953         }
<a name="l01954"></a>01954     }
<a name="l01955"></a>01955                 
<a name="l01956"></a>01956     <a class="code" href="psc_8c.html#aa05918833f3a8b7fef91e11a4da20603">currow</a> = r;
<a name="l01957"></a>01957     <a class="code" href="psc_8c.html#a32e89ea1aab32cbb2b59ef4274b0f610">curcol</a> = c;
<a name="l01958"></a>01958     <a class="code" href="sc_8c.html#a5fbb0d87dafab6069be59becba1bc506">rowsinrange</a> = 1;
<a name="l01959"></a>01959     <a class="code" href="sc_8c.html#a1ab65195b09be19b606459489c260b86">colsinrange</a> = <a class="code" href="psc_8c.html#a380deb5bf2969f013bb9b5f197d1ea8f">fwidth</a>[<a class="code" href="psc_8c.html#a32e89ea1aab32cbb2b59ef4274b0f610">curcol</a>];
<a name="l01960"></a>01960     <span class="keywordflow">if</span> (<a class="code" href="interp_8c.html#a6825c9e12c2d5353c1741e71fbe29fc0">loading</a>) {
<a name="l01961"></a>01961         <a class="code" href="sc_8c.html#ac5c54df7ed3b930268c8d7752c101725">update</a>(1);
<a name="l01962"></a>01962         <a class="code" href="sc_8c.html#aaece488ae3f9f67f9991b0c90fd12369">changed</a> = 0;
<a name="l01963"></a>01963     } <span class="keywordflow">else</span>
<a name="l01964"></a>01964         <a class="code" href="sc_8h.html#a6952e86fc1b1fb65d18dd0cd44ca7f8c">remember</a>(1);
<a name="l01965"></a>01965 }
<a name="l01966"></a>01966 
<a name="l01967"></a>01967 <span class="comment">/* &#39;goto&#39; a cell containing a matching string */</span>
<a name="l01968"></a>01968 <span class="keywordtype">void</span>
<a name="l01969"></a><a class="code" href="sc_8h.html#a23862a0de8c1a9fc01cd28fc74e3a0f5">01969</a> <a class="code" href="interp_8c.html#a23862a0de8c1a9fc01cd28fc74e3a0f5">str_search</a>(<span class="keywordtype">char</span> *s, <span class="keywordtype">int</span> firstrow, <span class="keywordtype">int</span> firstcol, <span class="keywordtype">int</span> <a class="code" href="screen_8c.html#a47871bc65fa6b49d78379e94a4f17616">lastrow</a>, <span class="keywordtype">int</span> <a class="code" href="sc_8c.html#a6fc2d90004d9b8943013c1aac621ff86">lastcol</a>,
<a name="l01970"></a>01970         <span class="keywordtype">int</span> num)
<a name="l01971"></a>01971 {
<a name="l01972"></a>01972     <span class="keyword">struct </span><a class="code" href="structent.html">ent</a>  *p;
<a name="l01973"></a>01973     <span class="keywordtype">int</span>         r, c;
<a name="l01974"></a>01974     <span class="keywordtype">int</span>         endr, endc;
<a name="l01975"></a>01975     <span class="keywordtype">char</span>        *tmp;
<a name="l01976"></a>01976 <span class="preprocessor">#if defined(REGCOMP)</span>
<a name="l01977"></a>01977 <span class="preprocessor"></span>    regex_t     preg;
<a name="l01978"></a>01978     <span class="keywordtype">int</span>         errcode;
<a name="l01979"></a>01979 <span class="preprocessor">#endif</span>
<a name="l01980"></a>01980 <span class="preprocessor"></span>
<a name="l01981"></a>01981     <span class="keywordflow">if</span> (!<a class="code" href="interp_8c.html#a6825c9e12c2d5353c1741e71fbe29fc0">loading</a>)
<a name="l01982"></a>01982         <a class="code" href="sc_8h.html#a6952e86fc1b1fb65d18dd0cd44ca7f8c">remember</a>(0);
<a name="l01983"></a>01983 
<a name="l01984"></a>01984 <span class="preprocessor">#if defined(REGCOMP)</span>
<a name="l01985"></a>01985 <span class="preprocessor"></span>    <span class="keywordflow">if</span> ((errcode = regcomp(&amp;preg, s, REG_EXTENDED))) {
<a name="l01986"></a>01986         <a class="code" href="pxmalloc_8c.html#a319bd47b6e3c09b65d3d666d7007bdc3">scxfree</a>(s);
<a name="l01987"></a>01987         tmp = <a class="code" href="pxmalloc_8c.html#a7119be33744c04e41b75e9edc14a3a46">scxmalloc</a>((<span class="keywordtype">size_t</span>)160);
<a name="l01988"></a>01988         regerror(errcode, &amp;preg, tmp, <span class="keyword">sizeof</span>(tmp));
<a name="l01989"></a>01989         <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(tmp);
<a name="l01990"></a>01990         <a class="code" href="pxmalloc_8c.html#a319bd47b6e3c09b65d3d666d7007bdc3">scxfree</a>(tmp);
<a name="l01991"></a>01991         <span class="keywordflow">return</span>;
<a name="l01992"></a>01992     }
<a name="l01993"></a>01993 <span class="preprocessor">#endif</span>
<a name="l01994"></a>01994 <span class="preprocessor"></span><span class="preprocessor">#if defined(RE_COMP)</span>
<a name="l01995"></a>01995 <span class="preprocessor"></span>    <span class="keywordflow">if</span> ((tmp = re_comp(s)) != NULL) {
<a name="l01996"></a>01996         <a class="code" href="pxmalloc_8c.html#a319bd47b6e3c09b65d3d666d7007bdc3">scxfree</a>(s);
<a name="l01997"></a>01997         <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(tmp);
<a name="l01998"></a>01998         <span class="keywordflow">return</span>;
<a name="l01999"></a>01999     }
<a name="l02000"></a>02000 <span class="preprocessor">#endif</span>
<a name="l02001"></a>02001 <span class="preprocessor"></span><span class="preprocessor">#if defined(REGCMP)</span>
<a name="l02002"></a>02002 <span class="preprocessor"></span>    <span class="keywordflow">if</span> ((tmp = regcmp(s, NULL)) == NULL) {
<a name="l02003"></a>02003         <a class="code" href="pxmalloc_8c.html#a319bd47b6e3c09b65d3d666d7007bdc3">scxfree</a>(s);
<a name="l02004"></a>02004         cellerror = <a class="code" href="sc_8h.html#a21246343b17f2039f546f18e0e72cff6">CELLERROR</a>;
<a name="l02005"></a>02005         <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot;Invalid search string&quot;</span>);
<a name="l02006"></a>02006         <span class="keywordflow">return</span>;
<a name="l02007"></a>02007     }
<a name="l02008"></a>02008 <span class="preprocessor">#endif</span>
<a name="l02009"></a>02009 <span class="preprocessor"></span>    <a class="code" href="interp_8c.html#ab6370bb4927c40caf8560fd816563236">g_free</a>();
<a name="l02010"></a>02010     <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#ac5e5668040857907701f5dc0bcf4da2f">g_type</a> = <a class="code" href="interp_8c.html#a8c071082596007b19b854975272b73bd">G_STR</a> + num;
<a name="l02011"></a>02011     <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#a7b974c6d9cd2e7d0ffc26b72cd06db7c">g_s</a> = s;
<a name="l02012"></a>02012     <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#aa0aa256db57743313635e3e710f264bc">g_row</a> = firstrow;
<a name="l02013"></a>02013     <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#a240ac3bac7b6989d36c98174f971d644">g_col</a> = firstcol;
<a name="l02014"></a>02014     <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#ab3464409ef2e726b274b0f5865a7f449">g_lastrow</a> = <a class="code" href="screen_8c.html#a47871bc65fa6b49d78379e94a4f17616">lastrow</a>;
<a name="l02015"></a>02015     <a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#af00d3784621aaf55e960e2fb2167701f">g_lastcol</a> = <a class="code" href="sc_8c.html#a6fc2d90004d9b8943013c1aac621ff86">lastcol</a>;
<a name="l02016"></a>02016     <span class="keywordflow">if</span> (<a class="code" href="psc_8c.html#aa05918833f3a8b7fef91e11a4da20603">currow</a> &gt;= firstrow &amp;&amp; <a class="code" href="psc_8c.html#aa05918833f3a8b7fef91e11a4da20603">currow</a> &lt;= lastrow &amp;&amp;
<a name="l02017"></a>02017             <a class="code" href="psc_8c.html#a32e89ea1aab32cbb2b59ef4274b0f610">curcol</a> &gt;= firstcol &amp;&amp; <a class="code" href="psc_8c.html#a32e89ea1aab32cbb2b59ef4274b0f610">curcol</a> &lt;= lastcol) {
<a name="l02018"></a>02018         endr = <a class="code" href="psc_8c.html#aa05918833f3a8b7fef91e11a4da20603">currow</a>;
<a name="l02019"></a>02019         endc = <a class="code" href="psc_8c.html#a32e89ea1aab32cbb2b59ef4274b0f610">curcol</a>;
<a name="l02020"></a>02020     } <span class="keywordflow">else</span> {
<a name="l02021"></a>02021         endr = <a class="code" href="screen_8c.html#a47871bc65fa6b49d78379e94a4f17616">lastrow</a>;
<a name="l02022"></a>02022         endc = <a class="code" href="sc_8c.html#a6fc2d90004d9b8943013c1aac621ff86">lastcol</a>;
<a name="l02023"></a>02023     }
<a name="l02024"></a>02024     r = endr;
<a name="l02025"></a>02025     c = endc;
<a name="l02026"></a>02026     <span class="keywordflow">while</span> (1) {
<a name="l02027"></a>02027         <span class="keywordflow">if</span> (c &lt; lastcol) {
<a name="l02028"></a>02028             c++;
<a name="l02029"></a>02029         } <span class="keywordflow">else</span> {
<a name="l02030"></a>02030             <span class="keywordflow">if</span> (r &lt; lastrow) {
<a name="l02031"></a>02031                 <span class="keywordflow">while</span> (++r &lt; lastrow &amp;&amp; <a class="code" href="sc_8c.html#a3c86d4e1ef623cd7e974c6974dc47542">row_hidden</a>[r]) <span class="comment">/* */</span>;
<a name="l02032"></a>02032                 c = firstcol;
<a name="l02033"></a>02033             } <span class="keywordflow">else</span> {
<a name="l02034"></a>02034                 r = firstrow;
<a name="l02035"></a>02035                 c = firstcol;
<a name="l02036"></a>02036             }
<a name="l02037"></a>02037         }
<a name="l02038"></a>02038         p = *<a class="code" href="sc_8h.html#a2288f3ade588c7240beef3b7a301051b">ATBL</a>(<a class="code" href="sc_8c.html#ab1cc8ce06f419cceb40acdf03a6bb4fc">tbl</a>, r, c);
<a name="l02039"></a>02039         <span class="keywordflow">if</span> (<a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#ac5e5668040857907701f5dc0bcf4da2f">g_type</a> == <a class="code" href="interp_8c.html#aa9aa1c757d3baad975fe85af45624d15">G_NSTR</a>) {
<a name="l02040"></a>02040             *<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a> = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l02041"></a>02041             <span class="keywordflow">if</span> (p) {
<a name="l02042"></a>02042                 <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structent.html#ab08000c5e4f50af3a8f55684f634ca7e">cellerror</a>)
<a name="l02043"></a>02043                     sprintf(<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>, <span class="stringliteral">&quot;%s&quot;</span>, p-&gt;<a class="code" href="structent.html#ab08000c5e4f50af3a8f55684f634ca7e">cellerror</a> == <a class="code" href="sc_8h.html#a21246343b17f2039f546f18e0e72cff6">CELLERROR</a> ?
<a name="l02044"></a>02044                             <span class="stringliteral">&quot;ERROR&quot;</span> : <span class="stringliteral">&quot;INVALID&quot;</span>);
<a name="l02045"></a>02045                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> &amp; <a class="code" href="sc_8h.html#a242aaa897b3487fbbae12bf4b297ad1b">is_valid</a>) {
<a name="l02046"></a>02046                     <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structent.html#a55aaf4789a715142f6a458d9584debd5">format</a>) {
<a name="l02047"></a>02047                         <span class="keywordflow">if</span> (*(p-&gt;<a class="code" href="structent.html#a55aaf4789a715142f6a458d9584debd5">format</a>) == <a class="code" href="sc_8h.html#aa5a422d5a68ed18fb93170467d082b2e">ctl</a>(<span class="charliteral">&#39;d&#39;</span>)) {
<a name="l02048"></a>02048                             time_t i = (time_t) (p-&gt;<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>);
<a name="l02049"></a>02049                             strftime(<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>, <span class="keyword">sizeof</span>(<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>), (p-&gt;<a class="code" href="structent.html#a55aaf4789a715142f6a458d9584debd5">format</a>)+1,
<a name="l02050"></a>02050                                 localtime(&amp;i));
<a name="l02051"></a>02051                         } <span class="keywordflow">else</span>
<a name="l02052"></a>02052                             <a class="code" href="format_8c.html#a91200756e9bdbfa9d1f52a6606e2da19">format</a>(p-&gt;<a class="code" href="structent.html#a55aaf4789a715142f6a458d9584debd5">format</a>, <a class="code" href="psc_8c.html#ad8f226cf2051ad5bdb9658f3d2a41253">precision</a>[c], p-&gt;<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>, <a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>,
<a name="l02053"></a>02053                                     <span class="keyword">sizeof</span>(<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>));
<a name="l02054"></a>02054                     } <span class="keywordflow">else</span>
<a name="l02055"></a>02055                         <a class="code" href="format_8c.html#a141f671670b78073e7cce9b6fd87e527">engformat</a>(<a class="code" href="psc_8c.html#a6866a2b1bf4d8918e41c8485cf5a7e50">realfmt</a>[c], <a class="code" href="psc_8c.html#a380deb5bf2969f013bb9b5f197d1ea8f">fwidth</a>[c], <a class="code" href="psc_8c.html#ad8f226cf2051ad5bdb9658f3d2a41253">precision</a>[c],
<a name="l02056"></a>02056                                 p-&gt;<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>, <a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>, <span class="keyword">sizeof</span>(<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>));
<a name="l02057"></a>02057                 }
<a name="l02058"></a>02058             }
<a name="l02059"></a>02059         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#ac5e5668040857907701f5dc0bcf4da2f">g_type</a> == <a class="code" href="interp_8c.html#adf4f0280a0c65f6879059eb789731eb8">G_XSTR</a>) {
<a name="l02060"></a>02060             *<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a> = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l02061"></a>02061             <span class="keywordflow">if</span> (p &amp;&amp; p-&gt;<a class="code" href="structent.html#a6689c3abcaf3ef54fa0318a5be81b85d">expr</a>) {
<a name="l02062"></a>02062                 <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a> = 0;
<a name="l02063"></a>02063                 <a class="code" href="interp_8c.html#a5d8205f1f72eaf6b54fde4cb193f741c">decompile</a>(p-&gt;<a class="code" href="structent.html#a6689c3abcaf3ef54fa0318a5be81b85d">expr</a>, 0);  <span class="comment">/* set line to expr */</span>
<a name="l02064"></a>02064                 <a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l02065"></a>02065                 <span class="keywordflow">if</span> (*<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a> == <span class="charliteral">&#39;?&#39;</span>)
<a name="l02066"></a>02066                     *<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a> = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l02067"></a>02067             }
<a name="l02068"></a>02068         }
<a name="l02069"></a>02069         <span class="keywordflow">if</span> (!<a class="code" href="sc_8c.html#a835f456ca402ce6970a27111b1328bf8">col_hidden</a>[c]){
<a name="l02070"></a>02070             <span class="keywordflow">if</span> (<a class="code" href="cmds_8c.html#a2f17e9f4120fd3498be8bebbc68f5700">gs</a>.<a class="code" href="structgo__save.html#ac5e5668040857907701f5dc0bcf4da2f">g_type</a> == <a class="code" href="interp_8c.html#a8c071082596007b19b854975272b73bd">G_STR</a>) {
<a name="l02071"></a>02071                 <span class="keywordflow">if</span> (p &amp;&amp; p-&gt;<a class="code" href="structent.html#a5346704737f8bf536f566804d95d9a02">label</a>
<a name="l02072"></a>02072 #<span class="keywordflow">if</span> defined(REGCOMP)
<a name="l02073"></a>02073                         &amp;&amp; (regexec(&amp;preg, p-&gt;<a class="code" href="structent.html#a5346704737f8bf536f566804d95d9a02">label</a>, 0, NULL, 0) == 0))
<a name="l02074"></a>02074 <span class="preprocessor">#else</span>
<a name="l02075"></a>02075 <span class="preprocessor"></span><span class="preprocessor">#if defined(RE_COMP)</span>
<a name="l02076"></a>02076 <span class="preprocessor"></span>                        &amp;&amp; (re_exec(p-&gt;<a class="code" href="structent.html#a5346704737f8bf536f566804d95d9a02">label</a>) != 0))
<a name="l02077"></a>02077 <span class="preprocessor">#else</span>
<a name="l02078"></a>02078 <span class="preprocessor"></span><span class="preprocessor">#if defined(REGCMP)</span>
<a name="l02079"></a>02079 <span class="preprocessor"></span>                        &amp;&amp; (regex(tmp, p-&gt;<a class="code" href="structent.html#a5346704737f8bf536f566804d95d9a02">label</a>) != (<span class="keywordtype">char</span> *)0))
<a name="l02080"></a>02080 #<span class="keywordflow">else</span>
<a name="l02081"></a>02081                         &amp;&amp; (strcmp(s, p-&gt;<a class="code" href="structent.html#a5346704737f8bf536f566804d95d9a02">label</a>) == 0))
<a name="l02082"></a>02082 <span class="preprocessor">#endif</span>
<a name="l02083"></a>02083 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l02084"></a>02084 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l02085"></a>02085 <span class="preprocessor"></span>                    <span class="keywordflow">break</span>;
<a name="l02086"></a>02086             } <span class="keywordflow">else</span>                      <span class="comment">/* gs.g_type != G_STR */</span>
<a name="l02087"></a>02087                 <span class="keywordflow">if</span> (*<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a> != <span class="charliteral">&#39;\0&#39;</span>
<a name="l02088"></a>02088 #<span class="keywordflow">if</span> defined(REGCOMP)
<a name="l02089"></a>02089                         &amp;&amp; (regexec(&amp;preg, <a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>, 0, NULL, 0) == 0))
<a name="l02090"></a>02090 <span class="preprocessor">#else</span>
<a name="l02091"></a>02091 <span class="preprocessor"></span><span class="preprocessor">#if defined(RE_COMP)</span>
<a name="l02092"></a>02092 <span class="preprocessor"></span>                        &amp;&amp; (re_exec(<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>) != 0))
<a name="l02093"></a>02093 <span class="preprocessor">#else</span>
<a name="l02094"></a>02094 <span class="preprocessor"></span><span class="preprocessor">#if defined(REGCMP)</span>
<a name="l02095"></a>02095 <span class="preprocessor"></span>                        &amp;&amp; (regex(tmp, <a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>) != (<span class="keywordtype">char</span> *)0))
<a name="l02096"></a>02096 #<span class="keywordflow">else</span>
<a name="l02097"></a>02097                         &amp;&amp; (strcmp(s, <a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>) == 0))
<a name="l02098"></a>02098 <span class="preprocessor">#endif</span>
<a name="l02099"></a>02099 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l02100"></a>02100 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l02101"></a>02101 <span class="preprocessor"></span>                    <span class="keywordflow">break</span>;
<a name="l02102"></a>02102         }
<a name="l02103"></a>02103         <span class="keywordflow">if</span> (r == endr &amp;&amp; c == endc) {
<a name="l02104"></a>02104             <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot;String not found&quot;</span>);
<a name="l02105"></a>02105 <span class="preprocessor">#if defined(REGCOMP)</span>
<a name="l02106"></a>02106 <span class="preprocessor"></span>            regfree(&amp;preg);
<a name="l02107"></a>02107 <span class="preprocessor">#endif</span>
<a name="l02108"></a>02108 <span class="preprocessor"></span><span class="preprocessor">#if defined(REGCMP)</span>
<a name="l02109"></a>02109 <span class="preprocessor"></span>            free(tmp);
<a name="l02110"></a>02110 <span class="preprocessor">#endif</span>
<a name="l02111"></a>02111 <span class="preprocessor"></span>            <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a> = -1;
<a name="l02112"></a>02112             <span class="keywordflow">return</span>;
<a name="l02113"></a>02113         }
<a name="l02114"></a>02114     }
<a name="l02115"></a>02115     <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a> = -1;
<a name="l02116"></a>02116     <a class="code" href="psc_8c.html#aa05918833f3a8b7fef91e11a4da20603">currow</a> = r;
<a name="l02117"></a>02117     <a class="code" href="psc_8c.html#a32e89ea1aab32cbb2b59ef4274b0f610">curcol</a> = c;
<a name="l02118"></a>02118     <a class="code" href="sc_8c.html#a5fbb0d87dafab6069be59becba1bc506">rowsinrange</a> = 1;
<a name="l02119"></a>02119     <a class="code" href="sc_8c.html#a1ab65195b09be19b606459489c260b86">colsinrange</a> = <a class="code" href="psc_8c.html#a380deb5bf2969f013bb9b5f197d1ea8f">fwidth</a>[<a class="code" href="psc_8c.html#a32e89ea1aab32cbb2b59ef4274b0f610">curcol</a>];
<a name="l02120"></a>02120 <span class="preprocessor">#if defined(REGCOMP)</span>
<a name="l02121"></a>02121 <span class="preprocessor"></span>    regfree(&amp;preg);
<a name="l02122"></a>02122 <span class="preprocessor">#endif</span>
<a name="l02123"></a>02123 <span class="preprocessor"></span><span class="preprocessor">#if defined(REGCMP)</span>
<a name="l02124"></a>02124 <span class="preprocessor"></span>    free(tmp);
<a name="l02125"></a>02125 <span class="preprocessor">#endif</span>
<a name="l02126"></a>02126 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="interp_8c.html#a6825c9e12c2d5353c1741e71fbe29fc0">loading</a>) {
<a name="l02127"></a>02127         <a class="code" href="sc_8c.html#ac5c54df7ed3b930268c8d7752c101725">update</a>(1);
<a name="l02128"></a>02128         <a class="code" href="sc_8c.html#aaece488ae3f9f67f9991b0c90fd12369">changed</a> = 0;
<a name="l02129"></a>02129     } <span class="keywordflow">else</span>
<a name="l02130"></a>02130         <a class="code" href="sc_8h.html#a6952e86fc1b1fb65d18dd0cd44ca7f8c">remember</a>(1);
<a name="l02131"></a>02131 }
<a name="l02132"></a>02132 
<a name="l02133"></a>02133 <span class="comment">/* fill a range with constants */</span>
<a name="l02134"></a>02134 <span class="keywordtype">void</span>
<a name="l02135"></a><a class="code" href="sc_8h.html#a972cf23a6f3ab2c7ce2bb79dba391423">02135</a> <a class="code" href="interp_8c.html#a972cf23a6f3ab2c7ce2bb79dba391423">fill</a>(<span class="keyword">struct</span> <a class="code" href="structent.html">ent</a> *v1, <span class="keyword">struct</span> <a class="code" href="structent.html">ent</a> *v2, <span class="keywordtype">double</span> start, <span class="keywordtype">double</span> inc)
<a name="l02136"></a>02136 {
<a name="l02137"></a>02137     <span class="keywordtype">int</span> r, c;
<a name="l02138"></a>02138     <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *n;
<a name="l02139"></a>02139     <span class="keywordtype">int</span> maxr, maxc;
<a name="l02140"></a>02140     <span class="keywordtype">int</span> minr, minc;
<a name="l02141"></a>02141 
<a name="l02142"></a>02142     maxr = v2-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>;
<a name="l02143"></a>02143     maxc = v2-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>;
<a name="l02144"></a>02144     minr = v1-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>;
<a name="l02145"></a>02145     minc = v1-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>;
<a name="l02146"></a>02146     <span class="keywordflow">if</span> (minr&gt;maxr) r = maxr, maxr = minr, minr = r;
<a name="l02147"></a>02147     <span class="keywordflow">if</span> (minc&gt;maxc) c = maxc, maxc = minc, minc = c;
<a name="l02148"></a>02148     <a class="code" href="pvmtbl_8c.html#aed91143b6917f518cec727e37c387590">checkbounds</a>(&amp;maxr, &amp;maxc);
<a name="l02149"></a>02149     <span class="keywordflow">if</span> (minr &lt; 0) minr = 0;
<a name="l02150"></a>02150     <span class="keywordflow">if</span> (minc &lt; 0) minc = 0;
<a name="l02151"></a>02151 
<a name="l02152"></a>02152     <a class="code" href="sc_8c.html#a097b228db628667b011ac79ea89ba080">FullUpdate</a>++;
<a name="l02153"></a>02153     <span class="keywordflow">if</span> (<a class="code" href="sc_8c.html#a874a35249fb6ae568098ba9a3e9dabe3">calc_order</a> == <a class="code" href="sc_8h.html#a781b3b06c024fd41e20e83f60be77dbf">BYROWS</a>) {
<a name="l02154"></a>02154     <span class="keywordflow">for</span> (r = minr; r&lt;=maxr; r++)
<a name="l02155"></a>02155         <span class="keywordflow">for</span> (c = minc; c&lt;=maxc; c++) {
<a name="l02156"></a>02156             n = <a class="code" href="sc_8c.html#a119a206e8bc414b4c30942f4ff8b2b6c">lookat</a>(r, c);
<a name="l02157"></a>02157             <span class="keywordflow">if</span> (n-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a>&amp;<a class="code" href="sc_8h.html#ab7711cca790f4954262812032305a3ee">is_locked</a>) <span class="keywordflow">continue</span>;
<a name="l02158"></a>02158             (void) <a class="code" href="interp_8c.html#a4bbbada00b674cf1562774b7266239da">clearent</a>(n);
<a name="l02159"></a>02159             n-&gt;<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a> = start;
<a name="l02160"></a>02160             start += inc;
<a name="l02161"></a>02161             n-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> |= (<a class="code" href="sc_8h.html#a66019db02c7b646c7afc1f8bf9bcbefc">is_changed</a>|<a class="code" href="sc_8h.html#a242aaa897b3487fbbae12bf4b297ad1b">is_valid</a>);
<a name="l02162"></a>02162             n-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> &amp;= ~(<a class="code" href="sc_8h.html#aa6e2d6b596a37b7321753ea442e032c7">is_cleared</a>);
<a name="l02163"></a>02163         }
<a name="l02164"></a>02164     }
<a name="l02165"></a>02165     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="sc_8c.html#a874a35249fb6ae568098ba9a3e9dabe3">calc_order</a> == <a class="code" href="sc_8h.html#accc5c262511ae8218630af08ecf99d18">BYCOLS</a>) {
<a name="l02166"></a>02166     <span class="keywordflow">for</span> (c = minc; c&lt;=maxc; c++)
<a name="l02167"></a>02167         <span class="keywordflow">for</span> (r = minr; r&lt;=maxr; r++) {
<a name="l02168"></a>02168             n = <a class="code" href="sc_8c.html#a119a206e8bc414b4c30942f4ff8b2b6c">lookat</a>(r, c);
<a name="l02169"></a>02169             (void) <a class="code" href="interp_8c.html#a4bbbada00b674cf1562774b7266239da">clearent</a>(n);
<a name="l02170"></a>02170             n-&gt;<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a> = start;
<a name="l02171"></a>02171             start += inc;
<a name="l02172"></a>02172             n-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> |= (<a class="code" href="sc_8h.html#a66019db02c7b646c7afc1f8bf9bcbefc">is_changed</a>|<a class="code" href="sc_8h.html#a242aaa897b3487fbbae12bf4b297ad1b">is_valid</a>);
<a name="l02173"></a>02173             n-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> &amp;= ~(<a class="code" href="sc_8h.html#aa6e2d6b596a37b7321753ea442e032c7">is_cleared</a>);
<a name="l02174"></a>02174         }
<a name="l02175"></a>02175     }
<a name="l02176"></a>02176     <span class="keywordflow">else</span> <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot; Internal error calc_order&quot;</span>);
<a name="l02177"></a>02177     <a class="code" href="sc_8c.html#aaece488ae3f9f67f9991b0c90fd12369">changed</a>++;
<a name="l02178"></a>02178 }
<a name="l02179"></a>02179 
<a name="l02180"></a>02180 <span class="comment">/* lock a range of cells */</span>
<a name="l02181"></a>02181 
<a name="l02182"></a>02182 <span class="keywordtype">void</span>
<a name="l02183"></a><a class="code" href="sc_8h.html#abeb2c94a3e7bfc221eaf70bb6eb6f30d">02183</a> <a class="code" href="interp_8c.html#abeb2c94a3e7bfc221eaf70bb6eb6f30d">lock_cells</a>(<span class="keyword">struct</span> <a class="code" href="structent.html">ent</a> *v1, <span class="keyword">struct</span> <a class="code" href="structent.html">ent</a> *v2)
<a name="l02184"></a>02184 {
<a name="l02185"></a>02185     <span class="keywordtype">int</span> r, c;
<a name="l02186"></a>02186     <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *n;
<a name="l02187"></a>02187     <span class="keywordtype">int</span> maxr, maxc;
<a name="l02188"></a>02188     <span class="keywordtype">int</span> minr, minc;
<a name="l02189"></a>02189 
<a name="l02190"></a>02190     maxr = v2-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>;
<a name="l02191"></a>02191     maxc = v2-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>;
<a name="l02192"></a>02192     minr = v1-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>;
<a name="l02193"></a>02193     minc = v1-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>;
<a name="l02194"></a>02194     <span class="keywordflow">if</span> (minr&gt;maxr) r = maxr, maxr = minr, minr = r;
<a name="l02195"></a>02195     <span class="keywordflow">if</span> (minc&gt;maxc) c = maxc, maxc = minc, minc = c;
<a name="l02196"></a>02196     <a class="code" href="pvmtbl_8c.html#aed91143b6917f518cec727e37c387590">checkbounds</a>(&amp;maxr, &amp;maxc);
<a name="l02197"></a>02197     <span class="keywordflow">if</span> (minr &lt; 0) minr = 0;
<a name="l02198"></a>02198     <span class="keywordflow">if</span> (minc &lt; 0) minc = 0;
<a name="l02199"></a>02199 
<a name="l02200"></a>02200     <span class="keywordflow">for</span> (r = minr; r&lt;=maxr; r++)
<a name="l02201"></a>02201         <span class="keywordflow">for</span> (c = minc; c&lt;=maxc; c++) {
<a name="l02202"></a>02202             n = <a class="code" href="sc_8c.html#a119a206e8bc414b4c30942f4ff8b2b6c">lookat</a>(r, c);
<a name="l02203"></a>02203             n-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> |= <a class="code" href="sc_8h.html#ab7711cca790f4954262812032305a3ee">is_locked</a>;
<a name="l02204"></a>02204         }
<a name="l02205"></a>02205 }
<a name="l02206"></a>02206 
<a name="l02207"></a>02207 <span class="comment">/* unlock a range of cells */</span>
<a name="l02208"></a>02208 
<a name="l02209"></a>02209 <span class="keywordtype">void</span>
<a name="l02210"></a><a class="code" href="sc_8h.html#a574d234a01e765f25a2e9ac63992db20">02210</a> <a class="code" href="interp_8c.html#a574d234a01e765f25a2e9ac63992db20">unlock_cells</a>(<span class="keyword">struct</span> <a class="code" href="structent.html">ent</a> *v1, <span class="keyword">struct</span> <a class="code" href="structent.html">ent</a> *v2)
<a name="l02211"></a>02211 {
<a name="l02212"></a>02212     <span class="keywordtype">int</span> r, c;
<a name="l02213"></a>02213     <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *n;
<a name="l02214"></a>02214     <span class="keywordtype">int</span> maxr, maxc;
<a name="l02215"></a>02215     <span class="keywordtype">int</span> minr, minc;
<a name="l02216"></a>02216 
<a name="l02217"></a>02217     maxr = v2-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>;
<a name="l02218"></a>02218     maxc = v2-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>;
<a name="l02219"></a>02219     minr = v1-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>;
<a name="l02220"></a>02220     minc = v1-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>;
<a name="l02221"></a>02221     <span class="keywordflow">if</span> (minr&gt;maxr) r = maxr, maxr = minr, minr = r;
<a name="l02222"></a>02222     <span class="keywordflow">if</span> (minc&gt;maxc) c = maxc, maxc = minc, minc = c;
<a name="l02223"></a>02223     <a class="code" href="pvmtbl_8c.html#aed91143b6917f518cec727e37c387590">checkbounds</a>(&amp;maxr, &amp;maxc);
<a name="l02224"></a>02224     <span class="keywordflow">if</span> (minr &lt; 0) minr = 0;
<a name="l02225"></a>02225     <span class="keywordflow">if</span> (minc &lt; 0) minc = 0;
<a name="l02226"></a>02226 
<a name="l02227"></a>02227     <span class="keywordflow">for</span> (r = minr; r&lt;=maxr; r++)
<a name="l02228"></a>02228         <span class="keywordflow">for</span> (c = minc; c&lt;=maxc; c++) {
<a name="l02229"></a>02229             n = <a class="code" href="sc_8c.html#a119a206e8bc414b4c30942f4ff8b2b6c">lookat</a>(r, c);
<a name="l02230"></a>02230             n-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> &amp;= ~<a class="code" href="sc_8h.html#ab7711cca790f4954262812032305a3ee">is_locked</a>;
<a name="l02231"></a>02231         }
<a name="l02232"></a>02232 }
<a name="l02233"></a>02233 
<a name="l02234"></a>02234 <span class="comment">/* set the numeric part of a cell */</span>
<a name="l02235"></a>02235 <span class="keywordtype">void</span>
<a name="l02236"></a><a class="code" href="sc_8h.html#a1d1a31648f269925fd904e24dd6eab0b">02236</a> <a class="code" href="interp_8c.html#a1d1a31648f269925fd904e24dd6eab0b">let</a>(<span class="keyword">struct</span> <a class="code" href="structent.html">ent</a> *<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>, <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *e)
<a name="l02237"></a>02237 {
<a name="l02238"></a>02238     <span class="keywordtype">double</span> val;
<a name="l02239"></a>02239     <span class="keywordtype">unsigned</span> isconstant = <a class="code" href="interp_8c.html#af3f31ae6f6be0cf9f9f97f616e32949a">constant</a>(e);
<a name="l02240"></a>02240 
<a name="l02241"></a>02241     <span class="keywordflow">if</span> (<a class="code" href="sc_8c.html#a29b9f87cc5492b07b05c239310fe5825">locked_cell</a>(v-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>, v-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>))
<a name="l02242"></a>02242         <span class="keywordflow">return</span>;
<a name="l02243"></a>02243     <span class="keywordflow">if</span> (v-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a> == <a class="code" href="psc_8c.html#aa05918833f3a8b7fef91e11a4da20603">currow</a> &amp;&amp; v-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a> == <a class="code" href="psc_8c.html#a32e89ea1aab32cbb2b59ef4274b0f610">curcol</a>)
<a name="l02244"></a>02244         <a class="code" href="sc_8c.html#a821426347ac9c3c2f4610d51684b5181">cellassign</a> = 1;
<a name="l02245"></a>02245     <span class="keywordflow">if</span> (<a class="code" href="interp_8c.html#a6825c9e12c2d5353c1741e71fbe29fc0">loading</a> &amp;&amp; !isconstant)
<a name="l02246"></a>02246         val = (double)0.0;
<a name="l02247"></a>02247     <span class="keywordflow">else</span> {
<a name="l02248"></a>02248         <a class="code" href="interp_8c.html#a158d9d755a3b4e8262cc8e9ff1592b44">exprerr</a> = 0;
<a name="l02249"></a>02249         (void) signal(SIGFPE, <a class="code" href="interp_8c.html#ad192e48d7fbfd4d91bf0e323834044cb">eval_fpe</a>);
<a name="l02250"></a>02250         <span class="keywordflow">if</span> (setjmp(<a class="code" href="interp_8c.html#a32f86b7c541e3f352078b7a2bfa115cb">fpe_save</a>)) {
<a name="l02251"></a>02251             <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot;Floating point exception in cell %s&quot;</span>, <a class="code" href="range_8c.html#a9248e2ed2edf876ebd286ab6262e80f3">v_name</a>(v-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>, v-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>));
<a name="l02252"></a>02252             val = (double)0.0;
<a name="l02253"></a>02253             cellerror = <a class="code" href="sc_8h.html#a21246343b17f2039f546f18e0e72cff6">CELLERROR</a>;
<a name="l02254"></a>02254         } <span class="keywordflow">else</span> {
<a name="l02255"></a>02255             cellerror = <a class="code" href="sc_8h.html#a0a47a7c621688cb5e5dd3b35954cdad2">CELLOK</a>;
<a name="l02256"></a>02256             val = <a class="code" href="interp_8c.html#ab28be6c2dbde9b58fdbb7ee205c6b139">eval</a>(e);
<a name="l02257"></a>02257         }
<a name="l02258"></a>02258         <span class="keywordflow">if</span> (v-&gt;<a class="code" href="structent.html#ab08000c5e4f50af3a8f55684f634ca7e">cellerror</a> != cellerror) {
<a name="l02259"></a>02259             v-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> |= <a class="code" href="sc_8h.html#a66019db02c7b646c7afc1f8bf9bcbefc">is_changed</a>;
<a name="l02260"></a>02260             <a class="code" href="sc_8c.html#aaece488ae3f9f67f9991b0c90fd12369">changed</a>++;
<a name="l02261"></a>02261             <a class="code" href="sc_8c.html#a5da08c7117ad335645302cccb2b68e59">modflg</a>++;
<a name="l02262"></a>02262             <a class="code" href="sc_8c.html#a097b228db628667b011ac79ea89ba080">FullUpdate</a>++;
<a name="l02263"></a>02263             v-&gt;<a class="code" href="structent.html#ab08000c5e4f50af3a8f55684f634ca7e">cellerror</a> = <a class="code" href="interp_8c.html#a274198a92f8aa92468c7ed3a62c8e7eb">cellerror</a>;
<a name="l02264"></a>02264         }
<a name="l02265"></a>02265         (void) signal(SIGFPE, <a class="code" href="interp_8c.html#ab5032b2f1718f2505efc7a82fbc6ae30">doquit</a>);
<a name="l02266"></a>02266         <span class="keywordflow">if</span> (<a class="code" href="interp_8c.html#a158d9d755a3b4e8262cc8e9ff1592b44">exprerr</a>) {
<a name="l02267"></a>02267             <a class="code" href="interp_8c.html#af5b08a578ddb46f5ed110e633f8d6c45">efree</a>(e);
<a name="l02268"></a>02268             <span class="keywordflow">return</span>;
<a name="l02269"></a>02269         }
<a name="l02270"></a>02270     }
<a name="l02271"></a>02271 
<a name="l02272"></a>02272     <span class="keywordflow">if</span> (isconstant) {
<a name="l02273"></a>02273         <span class="comment">/* prescale input unless it has a decimal */</span>
<a name="l02274"></a>02274         <span class="keywordflow">if</span> (!<a class="code" href="interp_8c.html#a6825c9e12c2d5353c1741e71fbe29fc0">loading</a> &amp;&amp; !<a class="code" href="interp_8c.html#ad8a8d3ef8400e8e62501d0f006eb5c1b">decimal</a> &amp;&amp; (<a class="code" href="interp_8c.html#a2dcf3a506b87ebbd54de2fe635ff36a2">prescale</a> &lt; (<span class="keywordtype">double</span>)0.9999999))
<a name="l02275"></a>02275             val *= <a class="code" href="interp_8c.html#a2dcf3a506b87ebbd54de2fe635ff36a2">prescale</a>;
<a name="l02276"></a>02276         <a class="code" href="interp_8c.html#ad8a8d3ef8400e8e62501d0f006eb5c1b">decimal</a> = FALSE;
<a name="l02277"></a>02277 
<a name="l02278"></a>02278         v-&gt;<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a> = val;
<a name="l02279"></a>02279 
<a name="l02280"></a>02280         <span class="keywordflow">if</span> (!(v-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> &amp; <a class="code" href="sc_8h.html#a13693a07927c228618ada130ce373acd">is_strexpr</a>)) {
<a name="l02281"></a>02281             <a class="code" href="interp_8c.html#af5b08a578ddb46f5ed110e633f8d6c45">efree</a>(v-&gt;<a class="code" href="structent.html#a6689c3abcaf3ef54fa0318a5be81b85d">expr</a>);
<a name="l02282"></a>02282             v-&gt;<a class="code" href="structent.html#a6689c3abcaf3ef54fa0318a5be81b85d">expr</a> = (<span class="keyword">struct </span><a class="code" href="structenode.html">enode</a> *)0;
<a name="l02283"></a>02283         }
<a name="l02284"></a>02284         <a class="code" href="interp_8c.html#af5b08a578ddb46f5ed110e633f8d6c45">efree</a>(e);
<a name="l02285"></a>02285     } <span class="keywordflow">else</span> {
<a name="l02286"></a>02286         <a class="code" href="interp_8c.html#af5b08a578ddb46f5ed110e633f8d6c45">efree</a>(v-&gt;<a class="code" href="structent.html#a6689c3abcaf3ef54fa0318a5be81b85d">expr</a>);
<a name="l02287"></a>02287         v-&gt;<a class="code" href="structent.html#a6689c3abcaf3ef54fa0318a5be81b85d">expr</a> = <a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>;
<a name="l02288"></a>02288         v-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> &amp;= ~<a class="code" href="sc_8h.html#a13693a07927c228618ada130ce373acd">is_strexpr</a>;
<a name="l02289"></a>02289     }
<a name="l02290"></a>02290 
<a name="l02291"></a>02291     <a class="code" href="sc_8c.html#aaece488ae3f9f67f9991b0c90fd12369">changed</a>++; <a class="code" href="sc_8c.html#a5da08c7117ad335645302cccb2b68e59">modflg</a>++;
<a name="l02292"></a>02292     v-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> |= (<a class="code" href="sc_8h.html#a66019db02c7b646c7afc1f8bf9bcbefc">is_changed</a>|<a class="code" href="sc_8h.html#a242aaa897b3487fbbae12bf4b297ad1b">is_valid</a>);
<a name="l02293"></a>02293     
<a name="l02294"></a>02294     <span class="keywordflow">if</span> (!<a class="code" href="interp_8c.html#a6825c9e12c2d5353c1741e71fbe29fc0">loading</a>) {
<a name="l02295"></a>02295         <span class="keywordtype">int</span> i;
<a name="l02296"></a>02296 
<a name="l02297"></a>02297         <span class="keywordflow">for</span> (i = 36; i &gt; 28; i--) {
<a name="l02298"></a>02298             <a class="code" href="sc_8c.html#a3d633a7c5fdc81cd74e646bb23d8c82b">savedrow</a>[i] = <a class="code" href="sc_8c.html#a3d633a7c5fdc81cd74e646bb23d8c82b">savedrow</a>[i-1];
<a name="l02299"></a>02299             <a class="code" href="sc_8c.html#a4a29d18d32aab6b3cbe08369afd893bf">savedcol</a>[i] = <a class="code" href="sc_8c.html#a4a29d18d32aab6b3cbe08369afd893bf">savedcol</a>[i-1];
<a name="l02300"></a>02300             <a class="code" href="sc_8c.html#a2afcf1e8b3309ee811ab989959be2cf3">savedstrow</a>[i] = <a class="code" href="sc_8c.html#a2afcf1e8b3309ee811ab989959be2cf3">savedstrow</a>[i-1];
<a name="l02301"></a>02301             <a class="code" href="sc_8c.html#a96c0f35369595ca5afaa0ab1476e8794">savedstcol</a>[i] = <a class="code" href="sc_8c.html#a96c0f35369595ca5afaa0ab1476e8794">savedstcol</a>[i-1];
<a name="l02302"></a>02302         }
<a name="l02303"></a>02303 
<a name="l02304"></a>02304         <a class="code" href="sc_8c.html#a3d633a7c5fdc81cd74e646bb23d8c82b">savedrow</a>[28] = v-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>;
<a name="l02305"></a>02305         <a class="code" href="sc_8c.html#a4a29d18d32aab6b3cbe08369afd893bf">savedcol</a>[28] = v-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>;
<a name="l02306"></a>02306         <a class="code" href="sc_8c.html#a2afcf1e8b3309ee811ab989959be2cf3">savedstrow</a>[28] = <a class="code" href="sc_8c.html#a2afcf1e8b3309ee811ab989959be2cf3">savedstrow</a>[27];
<a name="l02307"></a>02307         <a class="code" href="sc_8c.html#a96c0f35369595ca5afaa0ab1476e8794">savedstcol</a>[28] = <a class="code" href="sc_8c.html#a96c0f35369595ca5afaa0ab1476e8794">savedstcol</a>[27];
<a name="l02308"></a>02308     }
<a name="l02309"></a>02309 }
<a name="l02310"></a>02310 
<a name="l02311"></a>02311 <span class="keywordtype">void</span>
<a name="l02312"></a><a class="code" href="sc_8h.html#ac30304268f82ae636dacfdd31461f626">02312</a> <a class="code" href="interp_8c.html#ac30304268f82ae636dacfdd31461f626">slet</a>(<span class="keyword">struct</span> <a class="code" href="structent.html">ent</a> *<a class="code" href="structenode.html#af1d02090ec11bc269254d33a72506419">v</a>, <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *se, <span class="keywordtype">int</span> flushdir)
<a name="l02313"></a>02313 {
<a name="l02314"></a>02314     <span class="keywordtype">char</span> *p;
<a name="l02315"></a>02315 
<a name="l02316"></a>02316     <span class="keywordflow">if</span> (<a class="code" href="sc_8c.html#a29b9f87cc5492b07b05c239310fe5825">locked_cell</a>(v-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>, v-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>))
<a name="l02317"></a>02317         <span class="keywordflow">return</span>;
<a name="l02318"></a>02318     <span class="keywordflow">if</span> (v-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a> == <a class="code" href="psc_8c.html#aa05918833f3a8b7fef91e11a4da20603">currow</a> &amp;&amp; v-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a> == <a class="code" href="psc_8c.html#a32e89ea1aab32cbb2b59ef4274b0f610">curcol</a>)
<a name="l02319"></a>02319         <a class="code" href="sc_8c.html#a821426347ac9c3c2f4610d51684b5181">cellassign</a> = 1;
<a name="l02320"></a>02320     <a class="code" href="interp_8c.html#a158d9d755a3b4e8262cc8e9ff1592b44">exprerr</a> = 0;
<a name="l02321"></a>02321     (void) signal(SIGFPE, <a class="code" href="interp_8c.html#ad192e48d7fbfd4d91bf0e323834044cb">eval_fpe</a>);
<a name="l02322"></a>02322     <span class="keywordflow">if</span> (setjmp(<a class="code" href="interp_8c.html#a32f86b7c541e3f352078b7a2bfa115cb">fpe_save</a>)) {
<a name="l02323"></a>02323         <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a> (<span class="stringliteral">&quot;Floating point exception in cell %s&quot;</span>, <a class="code" href="range_8c.html#a9248e2ed2edf876ebd286ab6262e80f3">v_name</a>(v-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>, v-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>));
<a name="l02324"></a>02324         cellerror = <a class="code" href="sc_8h.html#a21246343b17f2039f546f18e0e72cff6">CELLERROR</a>;
<a name="l02325"></a>02325         p = <span class="stringliteral">&quot;&quot;</span>;
<a name="l02326"></a>02326     } <span class="keywordflow">else</span> {
<a name="l02327"></a>02327         cellerror = <a class="code" href="sc_8h.html#a0a47a7c621688cb5e5dd3b35954cdad2">CELLOK</a>;
<a name="l02328"></a>02328         p = <a class="code" href="interp_8c.html#a08452d640cd2db36eb97e3979d6df576">seval</a>(se);
<a name="l02329"></a>02329     }
<a name="l02330"></a>02330     <span class="keywordflow">if</span> (v-&gt;<a class="code" href="structent.html#ab08000c5e4f50af3a8f55684f634ca7e">cellerror</a> != cellerror) {
<a name="l02331"></a>02331         v-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> |= <a class="code" href="sc_8h.html#a66019db02c7b646c7afc1f8bf9bcbefc">is_changed</a>;
<a name="l02332"></a>02332         <a class="code" href="sc_8c.html#aaece488ae3f9f67f9991b0c90fd12369">changed</a>++;      <a class="code" href="sc_8c.html#a5da08c7117ad335645302cccb2b68e59">modflg</a>++;
<a name="l02333"></a>02333         <a class="code" href="sc_8c.html#a097b228db628667b011ac79ea89ba080">FullUpdate</a>++;
<a name="l02334"></a>02334         v-&gt;<a class="code" href="structent.html#ab08000c5e4f50af3a8f55684f634ca7e">cellerror</a> = <a class="code" href="interp_8c.html#a274198a92f8aa92468c7ed3a62c8e7eb">cellerror</a>;
<a name="l02335"></a>02335     }
<a name="l02336"></a>02336     (void) signal(SIGFPE, <a class="code" href="interp_8c.html#ab5032b2f1718f2505efc7a82fbc6ae30">doquit</a>);
<a name="l02337"></a>02337     <span class="keywordflow">if</span> (<a class="code" href="interp_8c.html#a158d9d755a3b4e8262cc8e9ff1592b44">exprerr</a>) {
<a name="l02338"></a>02338         <a class="code" href="interp_8c.html#af5b08a578ddb46f5ed110e633f8d6c45">efree</a>(se);
<a name="l02339"></a>02339         <span class="keywordflow">return</span>;
<a name="l02340"></a>02340     }
<a name="l02341"></a>02341     <span class="keywordflow">if</span> (!<a class="code" href="interp_8c.html#a6825c9e12c2d5353c1741e71fbe29fc0">loading</a>) {
<a name="l02342"></a>02342         <span class="keywordtype">int</span> i;
<a name="l02343"></a>02343 
<a name="l02344"></a>02344         <span class="keywordflow">for</span> (i = 36; i &gt; 28; i--) {
<a name="l02345"></a>02345             <a class="code" href="sc_8c.html#a3d633a7c5fdc81cd74e646bb23d8c82b">savedrow</a>[i] = <a class="code" href="sc_8c.html#a3d633a7c5fdc81cd74e646bb23d8c82b">savedrow</a>[i-1];
<a name="l02346"></a>02346             <a class="code" href="sc_8c.html#a4a29d18d32aab6b3cbe08369afd893bf">savedcol</a>[i] = <a class="code" href="sc_8c.html#a4a29d18d32aab6b3cbe08369afd893bf">savedcol</a>[i-1];
<a name="l02347"></a>02347             <a class="code" href="sc_8c.html#a2afcf1e8b3309ee811ab989959be2cf3">savedstrow</a>[i] = <a class="code" href="sc_8c.html#a2afcf1e8b3309ee811ab989959be2cf3">savedstrow</a>[i-1];
<a name="l02348"></a>02348             <a class="code" href="sc_8c.html#a96c0f35369595ca5afaa0ab1476e8794">savedstcol</a>[i] = <a class="code" href="sc_8c.html#a96c0f35369595ca5afaa0ab1476e8794">savedstcol</a>[i-1];
<a name="l02349"></a>02349         }
<a name="l02350"></a>02350 
<a name="l02351"></a>02351         <a class="code" href="sc_8c.html#a3d633a7c5fdc81cd74e646bb23d8c82b">savedrow</a>[28] = v-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>;
<a name="l02352"></a>02352         <a class="code" href="sc_8c.html#a4a29d18d32aab6b3cbe08369afd893bf">savedcol</a>[28] = v-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>;
<a name="l02353"></a>02353         <a class="code" href="sc_8c.html#a2afcf1e8b3309ee811ab989959be2cf3">savedstrow</a>[28] = <a class="code" href="sc_8c.html#a2afcf1e8b3309ee811ab989959be2cf3">savedstrow</a>[27];
<a name="l02354"></a>02354         <a class="code" href="sc_8c.html#a96c0f35369595ca5afaa0ab1476e8794">savedstcol</a>[28] = <a class="code" href="sc_8c.html#a96c0f35369595ca5afaa0ab1476e8794">savedstcol</a>[27];
<a name="l02355"></a>02355     }
<a name="l02356"></a>02356     <span class="keywordflow">if</span> (<a class="code" href="interp_8c.html#af3f31ae6f6be0cf9f9f97f616e32949a">constant</a>(se)) {
<a name="l02357"></a>02357         <a class="code" href="interp_8c.html#a6d4c5de1bc33dd46b15352c75255dff0">label</a>(v, p, flushdir);
<a name="l02358"></a>02358         <span class="keywordflow">if</span> (p)
<a name="l02359"></a>02359             <a class="code" href="pxmalloc_8c.html#a319bd47b6e3c09b65d3d666d7007bdc3">scxfree</a>(p);
<a name="l02360"></a>02360         <a class="code" href="interp_8c.html#af5b08a578ddb46f5ed110e633f8d6c45">efree</a>(se);
<a name="l02361"></a>02361         <span class="keywordflow">if</span> (v-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> &amp; <a class="code" href="sc_8h.html#a13693a07927c228618ada130ce373acd">is_strexpr</a>) {
<a name="l02362"></a>02362             <a class="code" href="interp_8c.html#af5b08a578ddb46f5ed110e633f8d6c45">efree</a>(v-&gt;<a class="code" href="structent.html#a6689c3abcaf3ef54fa0318a5be81b85d">expr</a>);
<a name="l02363"></a>02363             v-&gt;<a class="code" href="structent.html#a6689c3abcaf3ef54fa0318a5be81b85d">expr</a> = (<span class="keyword">struct </span><a class="code" href="structenode.html">enode</a> *)0;
<a name="l02364"></a>02364             v-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> &amp;= ~<a class="code" href="sc_8h.html#a13693a07927c228618ada130ce373acd">is_strexpr</a>;
<a name="l02365"></a>02365         }
<a name="l02366"></a>02366         <span class="keywordflow">return</span>;
<a name="l02367"></a>02367     }
<a name="l02368"></a>02368     <a class="code" href="interp_8c.html#af5b08a578ddb46f5ed110e633f8d6c45">efree</a>(v-&gt;<a class="code" href="structent.html#a6689c3abcaf3ef54fa0318a5be81b85d">expr</a>);
<a name="l02369"></a>02369     v-&gt;<a class="code" href="structent.html#a6689c3abcaf3ef54fa0318a5be81b85d">expr</a> = se;
<a name="l02370"></a>02370     v-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> |= (<a class="code" href="sc_8h.html#a66019db02c7b646c7afc1f8bf9bcbefc">is_changed</a>|<a class="code" href="sc_8h.html#a13693a07927c228618ada130ce373acd">is_strexpr</a>);
<a name="l02371"></a>02371     <span class="keywordflow">if</span> (flushdir &lt; 0) v-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> |= <a class="code" href="sc_8h.html#afc97b1d549dfa942f8b24bead5612ee1">is_leftflush</a>;
<a name="l02372"></a>02372 
<a name="l02373"></a>02373     <span class="keywordflow">if</span> (flushdir == 0)
<a name="l02374"></a>02374         v-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> |= <a class="code" href="sc_8h.html#ac2f47f73034c55998aa842f5d6939da9">is_label</a>;
<a name="l02375"></a>02375     <span class="keywordflow">else</span> v-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> &amp;= ~<a class="code" href="sc_8h.html#ac2f47f73034c55998aa842f5d6939da9">is_label</a>;
<a name="l02376"></a>02376 
<a name="l02377"></a>02377     <a class="code" href="sc_8c.html#a097b228db628667b011ac79ea89ba080">FullUpdate</a>++;
<a name="l02378"></a>02378     <a class="code" href="sc_8c.html#aaece488ae3f9f67f9991b0c90fd12369">changed</a>++;
<a name="l02379"></a>02379     <a class="code" href="sc_8c.html#a5da08c7117ad335645302cccb2b68e59">modflg</a>++;
<a name="l02380"></a>02380 }
<a name="l02381"></a>02381 
<a name="l02382"></a>02382 <span class="keywordtype">void</span>
<a name="l02383"></a><a class="code" href="sc_8h.html#a9915e7463c2f346f775decf9348f70a4">02383</a> <a class="code" href="interp_8c.html#a9915e7463c2f346f775decf9348f70a4">format_cell</a>(<span class="keyword">struct</span> <a class="code" href="structent.html">ent</a> *v1, <span class="keyword">struct</span> <a class="code" href="structent.html">ent</a> *v2, <span class="keywordtype">char</span> *<a class="code" href="structenode.html#a993db5ac323e22de8928bead6adf0ecd">s</a>)
<a name="l02384"></a>02384 {
<a name="l02385"></a>02385     <span class="keywordtype">int</span> <a class="code" href="structenode.html#a665ccff1d13c8ee142d2278af000dfc9">r</a>, c;
<a name="l02386"></a>02386     <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *n;
<a name="l02387"></a>02387     <span class="keywordtype">int</span> maxr, maxc;
<a name="l02388"></a>02388     <span class="keywordtype">int</span> minr, minc;
<a name="l02389"></a>02389 
<a name="l02390"></a>02390     maxr = v2-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>;
<a name="l02391"></a>02391     maxc = v2-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>;
<a name="l02392"></a>02392     minr = v1-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>;
<a name="l02393"></a>02393     minc = v1-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>;
<a name="l02394"></a>02394     <span class="keywordflow">if</span> (minr&gt;maxr) r = maxr, maxr = minr, minr = r;
<a name="l02395"></a>02395     <span class="keywordflow">if</span> (minc&gt;maxc) c = maxc, maxc = minc, minc = c;
<a name="l02396"></a>02396     <a class="code" href="pvmtbl_8c.html#aed91143b6917f518cec727e37c387590">checkbounds</a>(&amp;maxr, &amp;maxc);
<a name="l02397"></a>02397     <span class="keywordflow">if</span> (minr &lt; 0) minr = 0;
<a name="l02398"></a>02398     <span class="keywordflow">if</span> (minc &lt; 0) minc = 0;
<a name="l02399"></a>02399 
<a name="l02400"></a>02400     <a class="code" href="sc_8c.html#a097b228db628667b011ac79ea89ba080">FullUpdate</a>++;
<a name="l02401"></a>02401     <a class="code" href="sc_8c.html#a5da08c7117ad335645302cccb2b68e59">modflg</a>++;
<a name="l02402"></a>02402 
<a name="l02403"></a>02403     <span class="keywordflow">for</span> (r = minr; r &lt;= maxr; r++)
<a name="l02404"></a>02404         <span class="keywordflow">for</span> (c = minc; c &lt;= maxc; c++) {
<a name="l02405"></a>02405             n = <a class="code" href="sc_8c.html#a119a206e8bc414b4c30942f4ff8b2b6c">lookat</a>(r, c);
<a name="l02406"></a>02406             <span class="keywordflow">if</span> (<a class="code" href="sc_8c.html#a29b9f87cc5492b07b05c239310fe5825">locked_cell</a>(n-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>, n-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>))
<a name="l02407"></a>02407                 <span class="keywordflow">continue</span>;
<a name="l02408"></a>02408             <span class="keywordflow">if</span> (n-&gt;<a class="code" href="structent.html#a55aaf4789a715142f6a458d9584debd5">format</a>)
<a name="l02409"></a>02409                 <a class="code" href="pxmalloc_8c.html#a319bd47b6e3c09b65d3d666d7007bdc3">scxfree</a>(n-&gt;<a class="code" href="structent.html#a55aaf4789a715142f6a458d9584debd5">format</a>);
<a name="l02410"></a>02410             n-&gt;<a class="code" href="structent.html#a55aaf4789a715142f6a458d9584debd5">format</a> = 0;
<a name="l02411"></a>02411             <span class="keywordflow">if</span> (s &amp;&amp; *s != <span class="charliteral">&#39;\0&#39;</span>)
<a name="l02412"></a>02412                 n-&gt;<a class="code" href="structent.html#a55aaf4789a715142f6a458d9584debd5">format</a> = strcpy(<a class="code" href="pxmalloc_8c.html#a7119be33744c04e41b75e9edc14a3a46">scxmalloc</a>((<span class="keywordtype">unsigned</span>)(strlen(s)+1)), s);
<a name="l02413"></a>02413             n-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> |= <a class="code" href="sc_8h.html#a66019db02c7b646c7afc1f8bf9bcbefc">is_changed</a>;
<a name="l02414"></a>02414         }
<a name="l02415"></a>02415 }
<a name="l02416"></a>02416 
<a name="l02417"></a>02417 <span class="keywordtype">void</span>
<a name="l02418"></a><a class="code" href="sc_8h.html#aa504e8892ab842a43ac66e13f2886563">02418</a> <a class="code" href="interp_8c.html#aa504e8892ab842a43ac66e13f2886563">hide_row</a>(<span class="keywordtype">int</span> <a class="code" href="sc_8c.html#af09bff4320de23f28f0d261c3b124d6b">arg</a>)
<a name="l02419"></a>02419 {
<a name="l02420"></a>02420     <span class="keywordflow">if</span> (arg &lt; 0) {
<a name="l02421"></a>02421         <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot;Invalid Range&quot;</span>);
<a name="l02422"></a>02422         <span class="keywordflow">return</span>;
<a name="l02423"></a>02423     }
<a name="l02424"></a>02424     <span class="keywordflow">if</span> (arg &gt;= <a class="code" href="sc_8c.html#aad460640e3f69b0a50f1c6b5aefacbf5">maxrows</a>-1) {
<a name="l02425"></a>02425         <span class="keywordflow">if</span> (!<a class="code" href="pvmtbl_8c.html#ad6032c9b22db5e9cc3ce307187e9741c">growtbl</a>(<a class="code" href="sc_8h.html#aeb52464d5045f6e18955c4b26d4964f5">GROWROW</a>, arg+1, 0)) {
<a name="l02426"></a>02426             <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot;You can&#39;t hide the last row&quot;</span>);
<a name="l02427"></a>02427             <span class="keywordflow">return</span>;
<a name="l02428"></a>02428         }
<a name="l02429"></a>02429     }
<a name="l02430"></a>02430     <a class="code" href="sc_8c.html#a097b228db628667b011ac79ea89ba080">FullUpdate</a>++;
<a name="l02431"></a>02431     <a class="code" href="sc_8c.html#a3c86d4e1ef623cd7e974c6974dc47542">row_hidden</a>[<a class="code" href="sc_8c.html#af09bff4320de23f28f0d261c3b124d6b">arg</a>] = TRUE;
<a name="l02432"></a>02432 }
<a name="l02433"></a>02433 
<a name="l02434"></a>02434 <span class="keywordtype">void</span>
<a name="l02435"></a><a class="code" href="sc_8h.html#a1812477a2a4e71dfbbd1d477f5c5f41a">02435</a> <a class="code" href="interp_8c.html#a1812477a2a4e71dfbbd1d477f5c5f41a">hide_col</a>(<span class="keywordtype">int</span> <a class="code" href="sc_8c.html#af09bff4320de23f28f0d261c3b124d6b">arg</a>)
<a name="l02436"></a>02436 {
<a name="l02437"></a>02437     <span class="keywordflow">if</span> (arg &lt; 0) {
<a name="l02438"></a>02438         <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot;Invalid Range&quot;</span>);
<a name="l02439"></a>02439         <span class="keywordflow">return</span>;
<a name="l02440"></a>02440     }
<a name="l02441"></a>02441     <span class="keywordflow">if</span> (arg &gt;= <a class="code" href="psc_8c.html#aba78b5e694f3296b3216736dc74c2a71">maxcols</a>-1) {
<a name="l02442"></a>02442         <span class="keywordflow">if</span> ((arg &gt;= <a class="code" href="sc_8h.html#ae243f549b565646096353541624ad57e">ABSMAXCOLS</a>-1) || !<a class="code" href="pvmtbl_8c.html#ad6032c9b22db5e9cc3ce307187e9741c">growtbl</a>(<a class="code" href="sc_8h.html#aa4ba7a13ef2573b3174285bcd12879c6">GROWCOL</a>, 0, arg+1)) {
<a name="l02443"></a>02443             <a class="code" href="sc_8h.html#a0c5e59a7caaa02f887d077eaa467f209">error</a>(<span class="stringliteral">&quot;You can&#39;t hide the last col&quot;</span>);
<a name="l02444"></a>02444             <span class="keywordflow">return</span>;
<a name="l02445"></a>02445         }
<a name="l02446"></a>02446     }
<a name="l02447"></a>02447     <a class="code" href="sc_8c.html#a097b228db628667b011ac79ea89ba080">FullUpdate</a>++;
<a name="l02448"></a>02448     <a class="code" href="sc_8c.html#a835f456ca402ce6970a27111b1328bf8">col_hidden</a>[<a class="code" href="sc_8c.html#af09bff4320de23f28f0d261c3b124d6b">arg</a>] = TRUE;
<a name="l02449"></a>02449 }
<a name="l02450"></a>02450 
<a name="l02451"></a>02451 <span class="keywordtype">void</span>
<a name="l02452"></a><a class="code" href="sc_8h.html#a4bbbada00b674cf1562774b7266239da">02452</a> <a class="code" href="interp_8c.html#a4bbbada00b674cf1562774b7266239da">clearent</a>(<span class="keyword">struct</span> <a class="code" href="structent.html">ent</a> *<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>)
<a name="l02453"></a>02453 {
<a name="l02454"></a>02454     <span class="keywordflow">if</span> (!v)
<a name="l02455"></a>02455         <span class="keywordflow">return</span>;
<a name="l02456"></a>02456     <a class="code" href="interp_8c.html#a6d4c5de1bc33dd46b15352c75255dff0">label</a>(v,<span class="stringliteral">&quot;&quot;</span>,-1);
<a name="l02457"></a>02457     v-&gt;<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a> = (double)0;
<a name="l02458"></a>02458     <span class="keywordflow">if</span> (v-&gt;<a class="code" href="structent.html#a6689c3abcaf3ef54fa0318a5be81b85d">expr</a>)
<a name="l02459"></a>02459         <a class="code" href="interp_8c.html#af5b08a578ddb46f5ed110e633f8d6c45">efree</a>(v-&gt;<a class="code" href="structent.html#a6689c3abcaf3ef54fa0318a5be81b85d">expr</a>);
<a name="l02460"></a>02460     v-&gt;<a class="code" href="structent.html#a6689c3abcaf3ef54fa0318a5be81b85d">expr</a> = NULL;
<a name="l02461"></a>02461     <span class="keywordflow">if</span> (v-&gt;<a class="code" href="structent.html#a55aaf4789a715142f6a458d9584debd5">format</a>)
<a name="l02462"></a>02462         <a class="code" href="pxmalloc_8c.html#a319bd47b6e3c09b65d3d666d7007bdc3">scxfree</a>(v-&gt;<a class="code" href="structent.html#a55aaf4789a715142f6a458d9584debd5">format</a>);
<a name="l02463"></a>02463     v-&gt;<a class="code" href="structent.html#a55aaf4789a715142f6a458d9584debd5">format</a> = NULL;
<a name="l02464"></a>02464     v-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> = (<a class="code" href="sc_8h.html#a66019db02c7b646c7afc1f8bf9bcbefc">is_changed</a>|<a class="code" href="sc_8h.html#aa6e2d6b596a37b7321753ea442e032c7">is_cleared</a>);
<a name="l02465"></a>02465     <a class="code" href="sc_8c.html#aaece488ae3f9f67f9991b0c90fd12369">changed</a>++;
<a name="l02466"></a>02466     <a class="code" href="sc_8c.html#a5da08c7117ad335645302cccb2b68e59">modflg</a>++;
<a name="l02467"></a>02467 }
<a name="l02468"></a>02468 
<a name="l02469"></a>02469 <span class="comment">/*</span>
<a name="l02470"></a>02470 <span class="comment"> * Say if an expression is a constant (return 1) or not.</span>
<a name="l02471"></a>02471 <span class="comment"> */</span>
<a name="l02472"></a>02472 <span class="keywordtype">int</span>
<a name="l02473"></a><a class="code" href="interp_8c.html#af3f31ae6f6be0cf9f9f97f616e32949a">02473</a> <a class="code" href="interp_8c.html#af3f31ae6f6be0cf9f9f97f616e32949a">constant</a>(<span class="keyword">register</span> <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *e)
<a name="l02474"></a>02474 {
<a name="l02475"></a>02475     <span class="keywordflow">return</span> e == NULL
<a name="l02476"></a>02476          || e-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a> == <a class="code" href="sc_8h.html#a1b2fd882aad05d28c200084770380c56">O_CONST</a>
<a name="l02477"></a>02477          || e-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a> == <a class="code" href="sc_8h.html#aacd5f942bdb7e1615d7caca29545ee86">O_SCONST</a>
<a name="l02478"></a>02478          || (e-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a> == <span class="charliteral">&#39;m&#39;</span> &amp;&amp; <a class="code" href="interp_8c.html#af3f31ae6f6be0cf9f9f97f616e32949a">constant</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left))
<a name="l02479"></a>02479          || (e-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a> != <a class="code" href="sc_8h.html#ab7c61d0445730f55373808a31e3b9575">O_VAR</a>
<a name="l02480"></a>02480              &amp;&amp; !(e-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a> &amp; <a class="code" href="sc_8h.html#a76c64ace77ce430c5f0b1e614914825c">REDUCE</a>)
<a name="l02481"></a>02481              &amp;&amp; <a class="code" href="interp_8c.html#af3f31ae6f6be0cf9f9f97f616e32949a">constant</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left)
<a name="l02482"></a>02482              &amp;&amp; <a class="code" href="interp_8c.html#af3f31ae6f6be0cf9f9f97f616e32949a">constant</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right)
<a name="l02483"></a>02483              &amp;&amp; e-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a> != <a class="code" href="sc_8h.html#a0aac6c68a5a4eb4d5dbf7f94919de21c">EXT</a>     <span class="comment">/* functions look like constants but aren&#39;t */</span>
<a name="l02484"></a>02484              &amp;&amp; e-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a> != <a class="code" href="sc_8h.html#aad0629d32299aee19cd8666a8e24a295">NVAL</a>
<a name="l02485"></a>02485              &amp;&amp; e-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a> != <a class="code" href="sc_8h.html#a79fcb75e4cf7ae537a9fc8ca9d693d40">SVAL</a>
<a name="l02486"></a>02486              &amp;&amp; e-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a> != <a class="code" href="sc_8h.html#acc4a9ad83f9350a588d117e0c8916d45">NOW</a>
<a name="l02487"></a>02487              &amp;&amp; e-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a> != <a class="code" href="sc_8h.html#a1301b2df65d4e84eb11eaf30c001058e">MYROW</a>
<a name="l02488"></a>02488              &amp;&amp; e-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a> != <a class="code" href="sc_8h.html#a326b65bcb34b827fb4a7d812e42106c3">MYCOL</a>
<a name="l02489"></a>02489              &amp;&amp; e-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a> != <a class="code" href="sc_8h.html#a609deb5c57a8c9851fdd62aa309f0291">LASTROW</a>
<a name="l02490"></a>02490              &amp;&amp; e-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a> != <a class="code" href="sc_8h.html#a4571689acd41027b957b3a09fed31d8f">LASTCOL</a>
<a name="l02491"></a>02491              &amp;&amp; e-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a> != <a class="code" href="sc_8h.html#a4f642f93c8f1598b0be986e84b7cf168">NUMITER</a>
<a name="l02492"></a>02492              &amp;&amp; e-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a> != <a class="code" href="sc_8h.html#a8de29f7c8bbf1a81cc6e71ac602032d3">FILENAME</a>
<a name="l02493"></a>02493              &amp;&amp; <a class="code" href="sc_8c.html#aa33cf9fcdc419d39c5d05fa458bf089a">optimize</a> );
<a name="l02494"></a>02494 }
<a name="l02495"></a>02495 
<a name="l02496"></a>02496 <span class="keywordtype">void</span>
<a name="l02497"></a><a class="code" href="sc_8h.html#af5b08a578ddb46f5ed110e633f8d6c45">02497</a> <a class="code" href="interp_8c.html#af5b08a578ddb46f5ed110e633f8d6c45">efree</a>(<span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *e)
<a name="l02498"></a>02498 {
<a name="l02499"></a>02499     <span class="keywordflow">if</span> (e) {
<a name="l02500"></a>02500         <span class="keywordflow">if</span> (e-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a> != <a class="code" href="sc_8h.html#ab7c61d0445730f55373808a31e3b9575">O_VAR</a> &amp;&amp; e-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a> != <a class="code" href="sc_8h.html#a1b2fd882aad05d28c200084770380c56">O_CONST</a> &amp;&amp; e-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a> != <a class="code" href="sc_8h.html#aacd5f942bdb7e1615d7caca29545ee86">O_SCONST</a>
<a name="l02501"></a>02501                 &amp;&amp; !(e-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a> &amp; <a class="code" href="sc_8h.html#a76c64ace77ce430c5f0b1e614914825c">REDUCE</a>)) {
<a name="l02502"></a>02502             <a class="code" href="interp_8c.html#af5b08a578ddb46f5ed110e633f8d6c45">efree</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left);
<a name="l02503"></a>02503             <a class="code" href="interp_8c.html#af5b08a578ddb46f5ed110e633f8d6c45">efree</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right);
<a name="l02504"></a>02504         }
<a name="l02505"></a>02505         <span class="keywordflow">if</span> (e-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a> == <a class="code" href="sc_8h.html#aacd5f942bdb7e1615d7caca29545ee86">O_SCONST</a> &amp;&amp; e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#a993db5ac323e22de8928bead6adf0ecd">s</a>)
<a name="l02506"></a>02506             <a class="code" href="pxmalloc_8c.html#a319bd47b6e3c09b65d3d666d7007bdc3">scxfree</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#a993db5ac323e22de8928bead6adf0ecd">s</a>);
<a name="l02507"></a>02507         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (e-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a> == <a class="code" href="sc_8h.html#a0aac6c68a5a4eb4d5dbf7f94919de21c">EXT</a> &amp;&amp; e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.s)
<a name="l02508"></a>02508             <a class="code" href="pxmalloc_8c.html#a319bd47b6e3c09b65d3d666d7007bdc3">scxfree</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.s);
<a name="l02509"></a>02509         e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left = <a class="code" href="cmds_8c.html#a286e9016810cd4415bb921296a15d769">freeenodes</a>;
<a name="l02510"></a>02510         freeenodes = e;
<a name="l02511"></a>02511     }
<a name="l02512"></a>02512 }
<a name="l02513"></a>02513 
<a name="l02514"></a>02514 <span class="keywordtype">void</span>
<a name="l02515"></a><a class="code" href="sc_8h.html#a6d4c5de1bc33dd46b15352c75255dff0">02515</a> <a class="code" href="interp_8c.html#a6d4c5de1bc33dd46b15352c75255dff0">label</a>(<span class="keyword">register</span> <span class="keyword">struct</span> <a class="code" href="structent.html">ent</a> *<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>, <span class="keyword">register</span> <span class="keywordtype">char</span> *s, <span class="keywordtype">int</span> flushdir)
<a name="l02516"></a>02516 {
<a name="l02517"></a>02517     <span class="keywordflow">if</span> (v) {
<a name="l02518"></a>02518         <span class="keywordflow">if</span> (flushdir==0 &amp;&amp; v-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a>&amp;<a class="code" href="sc_8h.html#a242aaa897b3487fbbae12bf4b297ad1b">is_valid</a>) {
<a name="l02519"></a>02519             <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *tv;
<a name="l02520"></a>02520             <span class="keywordflow">if</span> (v-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>&gt;0 &amp;&amp; ((tv=<a class="code" href="sc_8c.html#a119a206e8bc414b4c30942f4ff8b2b6c">lookat</a>(v-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>,v-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>-1))-&gt;flags&amp;<a class="code" href="sc_8h.html#a242aaa897b3487fbbae12bf4b297ad1b">is_valid</a>)==0)
<a name="l02521"></a>02521                 v = tv, flushdir = 1;
<a name="l02522"></a>02522             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((tv=<a class="code" href="sc_8c.html#a119a206e8bc414b4c30942f4ff8b2b6c">lookat</a>(v-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>,v-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>+1))-&gt;flags&amp;<a class="code" href="sc_8h.html#a242aaa897b3487fbbae12bf4b297ad1b">is_valid</a>)==0)
<a name="l02523"></a>02523                 v = tv, flushdir = -1;
<a name="l02524"></a>02524             <span class="keywordflow">else</span> flushdir = -1;
<a name="l02525"></a>02525         }
<a name="l02526"></a>02526         <span class="keywordflow">if</span> (v-&gt;<a class="code" href="structent.html#a5346704737f8bf536f566804d95d9a02">label</a>) <a class="code" href="pxmalloc_8c.html#a319bd47b6e3c09b65d3d666d7007bdc3">scxfree</a>((<span class="keywordtype">char</span> *)(v-&gt;<a class="code" href="structent.html#a5346704737f8bf536f566804d95d9a02">label</a>));
<a name="l02527"></a>02527         <span class="keywordflow">if</span> (s &amp;&amp; s[0]) {
<a name="l02528"></a>02528             v-&gt;<a class="code" href="structent.html#a5346704737f8bf536f566804d95d9a02">label</a> = <a class="code" href="pxmalloc_8c.html#a7119be33744c04e41b75e9edc14a3a46">scxmalloc</a>((<span class="keywordtype">unsigned</span>)(strlen(s)+1));
<a name="l02529"></a>02529             (void) strcpy (v-&gt;<a class="code" href="structent.html#a5346704737f8bf536f566804d95d9a02">label</a>, s);
<a name="l02530"></a>02530         } <span class="keywordflow">else</span>
<a name="l02531"></a>02531             v-&gt;<a class="code" href="structent.html#a5346704737f8bf536f566804d95d9a02">label</a> = (<span class="keywordtype">char</span> *)0;
<a name="l02532"></a>02532         <span class="keywordflow">if</span> (flushdir&lt;0) v-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> |= <a class="code" href="sc_8h.html#afc97b1d549dfa942f8b24bead5612ee1">is_leftflush</a>;
<a name="l02533"></a>02533         <span class="keywordflow">else</span> v-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> &amp;= ~<a class="code" href="sc_8h.html#afc97b1d549dfa942f8b24bead5612ee1">is_leftflush</a>;
<a name="l02534"></a>02534         <span class="keywordflow">if</span> (flushdir==0) v-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> |= <a class="code" href="sc_8h.html#ac2f47f73034c55998aa842f5d6939da9">is_label</a>;
<a name="l02535"></a>02535         <span class="keywordflow">else</span> v-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> &amp;= ~<a class="code" href="sc_8h.html#ac2f47f73034c55998aa842f5d6939da9">is_label</a>;
<a name="l02536"></a>02536         <a class="code" href="sc_8c.html#a097b228db628667b011ac79ea89ba080">FullUpdate</a>++;
<a name="l02537"></a>02537         <a class="code" href="sc_8c.html#a5da08c7117ad335645302cccb2b68e59">modflg</a>++;
<a name="l02538"></a>02538     }
<a name="l02539"></a>02539 }
<a name="l02540"></a>02540 
<a name="l02541"></a>02541 <span class="keywordtype">void</span>
<a name="l02542"></a><a class="code" href="interp_8c.html#a2e0b4e50f1a63bbd138d8bb97e1304c6">02542</a> <a class="code" href="interp_8c.html#a2e0b4e50f1a63bbd138d8bb97e1304c6">decodev</a>(<span class="keyword">struct</span> <a class="code" href="structent__ptr.html">ent_ptr</a> <a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>)
<a name="l02543"></a>02543 {
<a name="l02544"></a>02544         <span class="keyword">struct </span><a class="code" href="structrange.html">range</a> *r;
<a name="l02545"></a>02545 
<a name="l02546"></a>02546         <span class="keywordflow">if</span> (!v.<a class="code" href="structent__ptr.html#abdf28c3ec0c48cd52cafbcd2825ae50b">vp</a> || v.<a class="code" href="structent__ptr.html#abdf28c3ec0c48cd52cafbcd2825ae50b">vp</a>-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> &amp; <a class="code" href="sc_8h.html#a31531b5af50566a57cd58e422bc3b3a7">is_deleted</a>)
<a name="l02547"></a>02547             (void) sprintf(<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a> + <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>, <span class="stringliteral">&quot;@ERR&quot;</span>);
<a name="l02548"></a>02548         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="range_8c.html#aa24fcfcb32be616924ccd4e7e3119c5b">find_range</a>((<span class="keywordtype">char</span> *)0, 0, v.<a class="code" href="structent__ptr.html#abdf28c3ec0c48cd52cafbcd2825ae50b">vp</a>, v.<a class="code" href="structent__ptr.html#abdf28c3ec0c48cd52cafbcd2825ae50b">vp</a>, &amp;r) &amp;&amp; !r-&gt;<a class="code" href="structrange.html#a2766ae588a42597710b039beb249be54">r_is_range</a>)
<a name="l02549"></a>02549             (<span class="keywordtype">void</span>) sprintf(<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>+<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>, <span class="stringliteral">&quot;%s&quot;</span>, r-&gt;<a class="code" href="structrange.html#a009621f2d6538f49f67c447e73395958">r_name</a>);
<a name="l02550"></a>02550         <span class="keywordflow">else</span> {
<a name="l02551"></a>02551             (void) sprintf(<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>+<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>, <span class="stringliteral">&quot;%s%s%s%d&quot;</span>,
<a name="l02552"></a>02552                 v.<a class="code" href="structent__ptr.html#a68b964980232d5b93da66ade646b6448">vf</a> &amp; <a class="code" href="sc_8h.html#a7a89e20080d3b56d96740b913c84163e">FIX_COL</a> ? <span class="stringliteral">&quot;$&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,
<a name="l02553"></a>02553                 <a class="code" href="interp_8c.html#a8e7c5b7d4aaadab7aa4bed05ea1f2be8">coltoa</a>(v.<a class="code" href="structent__ptr.html#abdf28c3ec0c48cd52cafbcd2825ae50b">vp</a>-&gt;<a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>),
<a name="l02554"></a>02554                 v.<a class="code" href="structent__ptr.html#a68b964980232d5b93da66ade646b6448">vf</a> &amp; <a class="code" href="sc_8h.html#a51d798b195d3e22ca7665e2ebf81539b">FIX_ROW</a> ? <span class="stringliteral">&quot;$&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,
<a name="l02555"></a>02555                 v.<a class="code" href="structent__ptr.html#abdf28c3ec0c48cd52cafbcd2825ae50b">vp</a>-&gt;<a class="code" href="structent.html#a447c154d7cadaebf91cff3015b910c59">row</a>);
<a name="l02556"></a>02556         }
<a name="l02557"></a>02557         <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a> += strlen(<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>+<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>);
<a name="l02558"></a>02558 }
<a name="l02559"></a>02559 
<a name="l02560"></a>02560 <span class="keywordtype">char</span> *
<a name="l02561"></a><a class="code" href="sc_8h.html#a1117e423a8d2172b0a433a188f57c8ce">02561</a> <a class="code" href="interp_8c.html#a8e7c5b7d4aaadab7aa4bed05ea1f2be8">coltoa</a>(<span class="keywordtype">int</span> col)
<a name="l02562"></a>02562 {
<a name="l02563"></a>02563     <span class="keyword">static</span> <span class="keywordtype">char</span> rname[3];
<a name="l02564"></a>02564     <span class="keyword">register</span> <span class="keywordtype">char</span> *p = rname;
<a name="l02565"></a>02565 
<a name="l02566"></a>02566     <span class="keywordflow">if</span> (col &gt; 25) {
<a name="l02567"></a>02567         *p++ = col/26 + <span class="charliteral">&#39;A&#39;</span> - 1;
<a name="l02568"></a>02568         col %= 26;
<a name="l02569"></a>02569     }
<a name="l02570"></a>02570     *p++ = col+<span class="charliteral">&#39;A&#39;</span>;
<a name="l02571"></a>02571     *p = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l02572"></a>02572     <span class="keywordflow">return</span> (rname);
<a name="l02573"></a>02573 }
<a name="l02574"></a>02574 
<a name="l02575"></a>02575 <span class="comment">/*</span>
<a name="l02576"></a>02576 <span class="comment"> *      To make list elements come out in the same order</span>
<a name="l02577"></a>02577 <span class="comment"> *      they were entered, we must do a depth-first eval</span>
<a name="l02578"></a>02578 <span class="comment"> *      of the ELIST tree</span>
<a name="l02579"></a>02579 <span class="comment"> */</span>
<a name="l02580"></a>02580 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l02581"></a><a class="code" href="interp_8c.html#aac773d88b919f8d1fe7648672cdb76fa">02581</a> <a class="code" href="interp_8c.html#aac773d88b919f8d1fe7648672cdb76fa">decompile_list</a>(<span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *p)
<a name="l02582"></a>02582 {
<a name="l02583"></a>02583         <span class="keywordflow">if</span> (!p) <span class="keywordflow">return</span>;
<a name="l02584"></a>02584         <a class="code" href="interp_8c.html#aac773d88b919f8d1fe7648672cdb76fa">decompile_list</a>(p-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left);    <span class="comment">/* depth first */</span>
<a name="l02585"></a>02585         <a class="code" href="interp_8c.html#a5d8205f1f72eaf6b54fde4cb193f741c">decompile</a>(p-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right, 0);
<a name="l02586"></a>02586         <a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = <span class="charliteral">&#39;,&#39;</span>;
<a name="l02587"></a>02587 }
<a name="l02588"></a>02588 
<a name="l02589"></a>02589 <span class="keywordtype">void</span>
<a name="l02590"></a><a class="code" href="sc_8h.html#a5d8205f1f72eaf6b54fde4cb193f741c">02590</a> <a class="code" href="interp_8c.html#a5d8205f1f72eaf6b54fde4cb193f741c">decompile</a>(<span class="keyword">register</span> <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *e, <span class="keywordtype">int</span> priority)
<a name="l02591"></a>02591 {
<a name="l02592"></a>02592     <span class="keyword">register</span> <span class="keywordtype">char</span> *s;
<a name="l02593"></a>02593     <span class="keywordflow">if</span> (e) {
<a name="l02594"></a>02594         <span class="keywordtype">int</span> mypriority;
<a name="l02595"></a>02595         <span class="keywordflow">switch</span> (e-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a>) {
<a name="l02596"></a>02596         <span class="keywordflow">default</span>: mypriority = 99; <span class="keywordflow">break</span>;
<a name="l02597"></a>02597         <span class="keywordflow">case</span> <span class="charliteral">&#39;;&#39;</span>: mypriority = 1; <span class="keywordflow">break</span>;
<a name="l02598"></a>02598         <span class="keywordflow">case</span> <span class="charliteral">&#39;?&#39;</span>: mypriority = 2; <span class="keywordflow">break</span>;
<a name="l02599"></a>02599         <span class="keywordflow">case</span> <span class="charliteral">&#39;:&#39;</span>: mypriority = 3; <span class="keywordflow">break</span>;
<a name="l02600"></a>02600         <span class="keywordflow">case</span> <span class="charliteral">&#39;|&#39;</span>: mypriority = 4; <span class="keywordflow">break</span>;
<a name="l02601"></a>02601         <span class="keywordflow">case</span> <span class="charliteral">&#39;&amp;&#39;</span>: mypriority = 5; <span class="keywordflow">break</span>;
<a name="l02602"></a>02602         <span class="keywordflow">case</span> <span class="charliteral">&#39;&lt;&#39;</span>: <span class="keywordflow">case</span> <span class="charliteral">&#39;=&#39;</span>: <span class="keywordflow">case</span> <span class="charliteral">&#39;&gt;&#39;</span>: mypriority = 6; <span class="keywordflow">break</span>;
<a name="l02603"></a>02603         <span class="keywordflow">case</span> <span class="charliteral">&#39;+&#39;</span>: <span class="keywordflow">case</span> <span class="charliteral">&#39;-&#39;</span>: <span class="keywordflow">case</span> <span class="charliteral">&#39;#&#39;</span>: mypriority = 8; <span class="keywordflow">break</span>;
<a name="l02604"></a>02604         <span class="keywordflow">case</span> <span class="charliteral">&#39;*&#39;</span>: <span class="keywordflow">case</span> <span class="charliteral">&#39;/&#39;</span>: <span class="keywordflow">case</span> <span class="charliteral">&#39;%&#39;</span>: mypriority = 10; <span class="keywordflow">break</span>;
<a name="l02605"></a>02605         <span class="keywordflow">case</span> <span class="charliteral">&#39;^&#39;</span>: mypriority = 12; <span class="keywordflow">break</span>;
<a name="l02606"></a>02606         }
<a name="l02607"></a>02607         <span class="keywordflow">if</span> (mypriority&lt;priority) <a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = <span class="charliteral">&#39;(&#39;</span>;
<a name="l02608"></a>02608         <span class="keywordflow">switch</span> (e-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a>) {
<a name="l02609"></a>02609         <span class="keywordflow">case</span> <span class="charliteral">&#39;f&#39;</span>:       <span class="keywordflow">for</span> (s=<span class="stringliteral">&quot;@fixed &quot;</span>; (<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = *s++); );
<a name="l02610"></a>02610                         <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>--;
<a name="l02611"></a>02611                         <a class="code" href="interp_8c.html#a5d8205f1f72eaf6b54fde4cb193f741c">decompile</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left, 30);
<a name="l02612"></a>02612                         <span class="keywordflow">break</span>;
<a name="l02613"></a>02613         <span class="keywordflow">case</span> <span class="charliteral">&#39;F&#39;</span>:       <span class="keywordflow">for</span> (s=<span class="stringliteral">&quot;(@fixed)&quot;</span>; (<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = *s++); );
<a name="l02614"></a>02614                         <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>--;
<a name="l02615"></a>02615                         <a class="code" href="interp_8c.html#a5d8205f1f72eaf6b54fde4cb193f741c">decompile</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left, 30);
<a name="l02616"></a>02616                         <span class="keywordflow">break</span>;
<a name="l02617"></a>02617         <span class="keywordflow">case</span> <span class="charliteral">&#39;m&#39;</span>:       <a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = <span class="charliteral">&#39;-&#39;</span>;
<a name="l02618"></a>02618                         <a class="code" href="interp_8c.html#a5d8205f1f72eaf6b54fde4cb193f741c">decompile</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left, 30);
<a name="l02619"></a>02619                         <span class="keywordflow">break</span>;
<a name="l02620"></a>02620         <span class="keywordflow">case</span> <span class="charliteral">&#39;!&#39;</span>:       <a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = <span class="charliteral">&#39;!&#39;</span>;
<a name="l02621"></a>02621                         <a class="code" href="interp_8c.html#a5d8205f1f72eaf6b54fde4cb193f741c">decompile</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left, 30);
<a name="l02622"></a>02622                         <span class="keywordflow">break</span>;
<a name="l02623"></a>02623         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ab7c61d0445730f55373808a31e3b9575">O_VAR</a>:     <a class="code" href="interp_8c.html#a2e0b4e50f1a63bbd138d8bb97e1304c6">decodev</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#af1d02090ec11bc269254d33a72506419">v</a>);
<a name="l02624"></a>02624                         <span class="keywordflow">break</span>;
<a name="l02625"></a>02625         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a1b2fd882aad05d28c200084770380c56">O_CONST</a>:   (void) sprintf(<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>+<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>, <span class="stringliteral">&quot;%.15g&quot;</span>, e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ad6e4e48660754be5ffc0583c15716ac0">k</a>);
<a name="l02626"></a>02626                         <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a> += strlen(<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>+<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>);
<a name="l02627"></a>02627                         <span class="keywordflow">break</span>;
<a name="l02628"></a>02628         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#aacd5f942bdb7e1615d7caca29545ee86">O_SCONST</a>:  (void) sprintf(<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>+<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>, <span class="stringliteral">&quot;\&quot;%s\&quot;&quot;</span>, e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#a993db5ac323e22de8928bead6adf0ecd">s</a>);
<a name="l02629"></a>02629                         <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a> += strlen(<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>+<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>);
<a name="l02630"></a>02630                         <span class="keywordflow">break</span>;
<a name="l02631"></a>02631 
<a name="l02632"></a>02632         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a1319745524dbd8748dba95bb12b19f19">SUM</a>        : <a class="code" href="interp_8c.html#a55eb98d039d128372f7339b0c024b7d8">index_arg</a>(<span class="stringliteral">&quot;@sum&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02633"></a>02633         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a6fb685ced489c960ab8a71e915f72539">PROD</a>       : <a class="code" href="interp_8c.html#a55eb98d039d128372f7339b0c024b7d8">index_arg</a>(<span class="stringliteral">&quot;@prod&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02634"></a>02634         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ac377db81b810bff5ff74221befd2ccc0">AVG</a>        : <a class="code" href="interp_8c.html#a55eb98d039d128372f7339b0c024b7d8">index_arg</a>(<span class="stringliteral">&quot;@avg&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02635"></a>02635         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a698c124f1c293f98840449d6c5b9d984">COUNT</a>      : <a class="code" href="interp_8c.html#a55eb98d039d128372f7339b0c024b7d8">index_arg</a>(<span class="stringliteral">&quot;@count&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02636"></a>02636         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a87244bd2adfc822019823add7aa42514">STDDEV</a>     : <a class="code" href="interp_8c.html#a55eb98d039d128372f7339b0c024b7d8">index_arg</a>(<span class="stringliteral">&quot;@stddev&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02637"></a>02637         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a392fb874e547e582e9c66a08a1f23326">MAX</a>        : <a class="code" href="interp_8c.html#a55eb98d039d128372f7339b0c024b7d8">index_arg</a>(<span class="stringliteral">&quot;@max&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02638"></a>02638         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#adbd5cbe76e047a39e0a34f085cdae6fe">MIN</a>        : <a class="code" href="interp_8c.html#a55eb98d039d128372f7339b0c024b7d8">index_arg</a>(<span class="stringliteral">&quot;@min&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02639"></a>02639         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a76c64ace77ce430c5f0b1e614914825c">REDUCE</a> | <span class="charliteral">&#39;R&#39;</span>: <a class="code" href="interp_8c.html#acf925506b3dc0f276cc55161b0cb82a7">range_arg</a>(<span class="stringliteral">&quot;@rows(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02640"></a>02640         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a76c64ace77ce430c5f0b1e614914825c">REDUCE</a> | <span class="charliteral">&#39;C&#39;</span>: <a class="code" href="interp_8c.html#acf925506b3dc0f276cc55161b0cb82a7">range_arg</a>(<span class="stringliteral">&quot;@cols(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02641"></a>02641 
<a name="l02642"></a>02642         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a26e668489fb528456f4bc54ba908d5b4">ABS</a>:       <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>(<span class="stringliteral">&quot;@abs(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02643"></a>02643         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ac0968392c2b2fc716807863a5fa7d5f1">ACOS</a>:      <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>(<span class="stringliteral">&quot;@acos(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02644"></a>02644         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a2fefd27702dc315df5aa8418055b9576">ASIN</a>:      <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>(<span class="stringliteral">&quot;@asin(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02645"></a>02645         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a417dfa30ded09b26e9d0216adccab21e">ATAN</a>:      <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>(<span class="stringliteral">&quot;@atan(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02646"></a>02646         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ac0c1f033adeb97850cce1712ad1b09e2">ATAN2</a>:     <a class="code" href="interp_8c.html#adf9f3e1f811a4f9a338defe68d9ce232">two_arg</a>(<span class="stringliteral">&quot;@atan2(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02647"></a>02647         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ae942a914db9767fa4fde805a268004e0">CEIL</a>:      <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>(<span class="stringliteral">&quot;@ceil(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02648"></a>02648         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#af1af2de870caad797b91210f0fc6fe78">COS</a>:       <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>(<span class="stringliteral">&quot;@cos(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02649"></a>02649         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a84db90500a1f9527c04e28817d9f60a1">EXP</a>:       <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>(<span class="stringliteral">&quot;@exp(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02650"></a>02650         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#af0175ba905b01f1a4ba753b6961473c5">FABS</a>:      <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>(<span class="stringliteral">&quot;@fabs(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02651"></a>02651         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a1082f0d0b3b2f687958ea044cb0cd306">FLOOR</a>:     <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>(<span class="stringliteral">&quot;@floor(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02652"></a>02652         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a3c7ad9d42d16f4b60697ceec2034c2f1">HYPOT</a>:     <a class="code" href="interp_8c.html#adf9f3e1f811a4f9a338defe68d9ce232">two_arg</a>(<span class="stringliteral">&quot;@hypot(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02653"></a>02653         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a159ca84d25a5487d8e81e4438725df19">LOG</a>:       <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>(<span class="stringliteral">&quot;@ln(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02654"></a>02654         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a386bc1bec332d5809e3c5e5be1f47a5d">LOG10</a>:     <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>(<span class="stringliteral">&quot;@log(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02655"></a>02655         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a7d36eb793ee8943f856044317659fbf1">POW</a>:       <a class="code" href="interp_8c.html#adf9f3e1f811a4f9a338defe68d9ce232">two_arg</a>(<span class="stringliteral">&quot;@pow(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02656"></a>02656         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ac80ce9955a1af2ab7aa3a67251ec9f5c">SIN</a>:       <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>(<span class="stringliteral">&quot;@sin(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02657"></a>02657         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a095e93222540fb38e433670cf08b5a46">SQRT</a>:      <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>(<span class="stringliteral">&quot;@sqrt(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02658"></a>02658         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a3f6118fca436bd2827d5fd0f998f665d">TAN</a>:       <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>(<span class="stringliteral">&quot;@tan(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02659"></a>02659         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a67198df5376db153ccd642a81d2623ad">DTR</a>:       <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>(<span class="stringliteral">&quot;@dtr(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02660"></a>02660         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ab6b71477e5e01a9588d5176b73bc346e">RTD</a>:       <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>(<span class="stringliteral">&quot;@rtd(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02661"></a>02661         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a64d6f5c8106c7e39c1cc3b5d2b9699af">RND</a>:       <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>(<span class="stringliteral">&quot;@rnd(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02662"></a>02662         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#af144c56be720021d0c3a8075b87ff9b5">ROUND</a>:     <a class="code" href="interp_8c.html#adf9f3e1f811a4f9a338defe68d9ce232">two_arg</a>(<span class="stringliteral">&quot;@round(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02663"></a>02663         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a4698ae12cf6a8acb5886fffd0ec897e6">HOUR</a>:      <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>(<span class="stringliteral">&quot;@hour(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02664"></a>02664         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ac1454fa04f41c693f39425697a137d82">MINUTE</a>:    <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>(<span class="stringliteral">&quot;@minute(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02665"></a>02665         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a94212be2394d2d37d9dfd33d07d82dba">SECOND</a>:    <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>(<span class="stringliteral">&quot;@second(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02666"></a>02666         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a3729d06495d9713592f79f3122c9e677">MONTH</a>:     <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>(<span class="stringliteral">&quot;@month(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02667"></a>02667         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a509a01c55cbe47386fe24602b7c7fda1">DAY</a>:       <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>(<span class="stringliteral">&quot;@day(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02668"></a>02668         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a5871356500f559add06ea81d60331b1b">YEAR</a>:      <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>(<span class="stringliteral">&quot;@year(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02669"></a>02669         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#acc4a9ad83f9350a588d117e0c8916d45">NOW</a>:       <span class="keywordflow">for</span> (s = <span class="stringliteral">&quot;@now&quot;</span>; (<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = *s++); );
<a name="l02670"></a>02670                         <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>--;
<a name="l02671"></a>02671                         <span class="keywordflow">break</span>;
<a name="l02672"></a>02672         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a30b328ca499f27b3d0f8111b495834ca">DATE</a>:      <span class="keywordflow">if</span> (e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right)
<a name="l02673"></a>02673                             <a class="code" href="interp_8c.html#adf9f3e1f811a4f9a338defe68d9ce232">two_arg</a>(<span class="stringliteral">&quot;@date(&quot;</span>, e);
<a name="l02674"></a>02674                         <span class="keywordflow">else</span>
<a name="l02675"></a>02675                             <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>(<span class="stringliteral">&quot;@date(&quot;</span>, e);
<a name="l02676"></a>02676                         <span class="keywordflow">break</span>;
<a name="l02677"></a>02677         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a3dfb8ef0d04e938194da60b4420c7517">FMT</a>:       <a class="code" href="interp_8c.html#adf9f3e1f811a4f9a338defe68d9ce232">two_arg</a>(<span class="stringliteral">&quot;@fmt(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02678"></a>02678         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ab7a309e1cb06fb6bcbd4314371443416">UPPER</a>:     <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>(<span class="stringliteral">&quot;@upper(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02679"></a>02679         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#aaa9295df3f8f6033cae4b89cc7e5ff29">LOWER</a>:     <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>(<span class="stringliteral">&quot;@lower(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02680"></a>02680         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a9e86bb407a3bf01b7ce8bc9745cca8a8">CAPITAL</a>:   <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>(<span class="stringliteral">&quot;@capital(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02681"></a>02681         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a68a1aa466b92d843627484fe6757cac7">DTS</a>:       <a class="code" href="interp_8c.html#a194e7a2d14c4cab05673a019d73f2403">three_arg</a>(<span class="stringliteral">&quot;@dts(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02682"></a>02682         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a201ee32eb38067857d67c95585041983">TTS</a>:       <a class="code" href="interp_8c.html#a194e7a2d14c4cab05673a019d73f2403">three_arg</a>(<span class="stringliteral">&quot;@tts(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02683"></a>02683         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a06c35b4920003c4ec3a2309f810f25b2">STON</a>:      <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>(<span class="stringliteral">&quot;@ston(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02684"></a>02684         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a1b96fad41423e3cf4555538bb18d8257">EQS</a>:       <a class="code" href="interp_8c.html#adf9f3e1f811a4f9a338defe68d9ce232">two_arg</a>(<span class="stringliteral">&quot;@eqs(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02685"></a>02685         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a5b086514f6963b35ee29bc954fc9b0f3">LMAX</a>:      <a class="code" href="interp_8c.html#a5f57fdc1c231ab547ac922e57c387a92">list_arg</a>(<span class="stringliteral">&quot;@max(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02686"></a>02686         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ad4719e154547547a009bed475dc2083c">LMIN</a>:      <a class="code" href="interp_8c.html#a5f57fdc1c231ab547ac922e57c387a92">list_arg</a>(<span class="stringliteral">&quot;@min(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02687"></a>02687         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a2493b51e5d7913035483d04f68c57cec">FV</a>:        <a class="code" href="interp_8c.html#a194e7a2d14c4cab05673a019d73f2403">three_arg</a>(<span class="stringliteral">&quot;@fv(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02688"></a>02688         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a46b90e99485a21a2150e424cc2a4afba">PV</a>:        <a class="code" href="interp_8c.html#a194e7a2d14c4cab05673a019d73f2403">three_arg</a>(<span class="stringliteral">&quot;@pv(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02689"></a>02689         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a18dbd798cee76f2edc7b877b4c0fb400">PMT</a>:       <a class="code" href="interp_8c.html#a194e7a2d14c4cab05673a019d73f2403">three_arg</a>(<span class="stringliteral">&quot;@pmt(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02690"></a>02690         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#aad0629d32299aee19cd8666a8e24a295">NVAL</a>:      <a class="code" href="interp_8c.html#adf9f3e1f811a4f9a338defe68d9ce232">two_arg</a>(<span class="stringliteral">&quot;@nval(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02691"></a>02691         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a79fcb75e4cf7ae537a9fc8ca9d693d40">SVAL</a>:      <a class="code" href="interp_8c.html#adf9f3e1f811a4f9a338defe68d9ce232">two_arg</a>(<span class="stringliteral">&quot;@sval(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02692"></a>02692         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a0aac6c68a5a4eb4d5dbf7f94919de21c">EXT</a>:       <a class="code" href="interp_8c.html#adf9f3e1f811a4f9a338defe68d9ce232">two_arg</a>(<span class="stringliteral">&quot;@ext(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02693"></a>02693         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a6df32afef4252c11e71b3d9598624690">SUBSTR</a>:    <a class="code" href="interp_8c.html#a194e7a2d14c4cab05673a019d73f2403">three_arg</a>(<span class="stringliteral">&quot;@substr(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02694"></a>02694         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#aa5e896999b4b983ad5b24e479d343ec0">STINDEX</a>:   <a class="code" href="interp_8c.html#a55eb98d039d128372f7339b0c024b7d8">index_arg</a>(<span class="stringliteral">&quot;@stindex&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02695"></a>02695         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ac6885dbfb371c33e523c7fb046118b36">INDEX</a>:     <a class="code" href="interp_8c.html#a55eb98d039d128372f7339b0c024b7d8">index_arg</a>(<span class="stringliteral">&quot;@index&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02696"></a>02696         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#afad4cd3fef3f7d50f95ee7713a58c59e">LOOKUP</a>:    <a class="code" href="interp_8c.html#a55eb98d039d128372f7339b0c024b7d8">index_arg</a>(<span class="stringliteral">&quot;@lookup&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02697"></a>02697         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a3ede2116cb46920427dbd47638bd0520">HLOOKUP</a>:   <a class="code" href="interp_8c.html#a500313724a891a50e7fa127e69e48efc">two_arg_index</a>(<span class="stringliteral">&quot;@hlookup&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02698"></a>02698         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ad09c432ea106e71a0121048889ce2fae">VLOOKUP</a>:   <a class="code" href="interp_8c.html#a500313724a891a50e7fa127e69e48efc">two_arg_index</a>(<span class="stringliteral">&quot;@vlookup&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02699"></a>02699         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ac138c68a0709c57bc5f7567abc1558eb">IF</a>:        <a class="code" href="interp_8c.html#a194e7a2d14c4cab05673a019d73f2403">three_arg</a>(<span class="stringliteral">&quot;@if(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02700"></a>02700         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a1301b2df65d4e84eb11eaf30c001058e">MYROW</a>:     <span class="keywordflow">for</span> (s = <span class="stringliteral">&quot;@myrow&quot;</span>; (<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = *s++); );
<a name="l02701"></a>02701                         <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>--;
<a name="l02702"></a>02702                         <span class="keywordflow">break</span>;
<a name="l02703"></a>02703         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a326b65bcb34b827fb4a7d812e42106c3">MYCOL</a>:     <span class="keywordflow">for</span> (s = <span class="stringliteral">&quot;@mycol&quot;</span>; (<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = *s++); );
<a name="l02704"></a>02704                         <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>--;
<a name="l02705"></a>02705                         <span class="keywordflow">break</span>;
<a name="l02706"></a>02706         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a609deb5c57a8c9851fdd62aa309f0291">LASTROW</a>:   <span class="keywordflow">for</span> (s = <span class="stringliteral">&quot;@lastrow&quot;</span>; (<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = *s++); );
<a name="l02707"></a>02707                         <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>--;
<a name="l02708"></a>02708                         <span class="keywordflow">break</span>;
<a name="l02709"></a>02709         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a4571689acd41027b957b3a09fed31d8f">LASTCOL</a>:   <span class="keywordflow">for</span> (s = <span class="stringliteral">&quot;@lastcol&quot;</span>; (<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = *s++); );
<a name="l02710"></a>02710                         <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>--;
<a name="l02711"></a>02711                         <span class="keywordflow">break</span>;
<a name="l02712"></a>02712         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a1e839fcdc337fa2c35b325d0c4cd6887">COLTOA</a>:    <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>( <span class="stringliteral">&quot;@coltoa(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02713"></a>02713         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a8de29f7c8bbf1a81cc6e71ac602032d3">FILENAME</a>:  <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>( <span class="stringliteral">&quot;@filename(&quot;</span>, e); <span class="keywordflow">break</span>;
<a name="l02714"></a>02714         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a4f642f93c8f1598b0be986e84b7cf168">NUMITER</a>:   <span class="keywordflow">for</span> (s = <span class="stringliteral">&quot;@numiter&quot;</span>; (<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = *s++); );
<a name="l02715"></a>02715                         <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>--;
<a name="l02716"></a>02716                         <span class="keywordflow">break</span>;
<a name="l02717"></a>02717         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a2e5646da89a3a7fc37c028da6af601b8">ERR_</a>:      <span class="keywordflow">for</span> (s = <span class="stringliteral">&quot;@err&quot;</span>; (<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = *s++); );
<a name="l02718"></a>02718                         <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>--;
<a name="l02719"></a>02719                         <span class="keywordflow">break</span>;
<a name="l02720"></a>02720         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a564ffe67519ca25bde88566eac3c698a">PI_</a>:       <span class="keywordflow">for</span> (s = <span class="stringliteral">&quot;@pi&quot;</span>; (<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = *s++); );
<a name="l02721"></a>02721                         <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>--;
<a name="l02722"></a>02722                         <span class="keywordflow">break</span>;
<a name="l02723"></a>02723         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a7b3b25cba33b07c303f3060fe41887f6">BLACK</a>:     <span class="keywordflow">for</span> (s = <span class="stringliteral">&quot;@black&quot;</span>; (<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = *s++); );
<a name="l02724"></a>02724                         <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>--;
<a name="l02725"></a>02725                         <span class="keywordflow">break</span>;
<a name="l02726"></a>02726         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a8d23feea868a983c8c2b661e1e16972f">RED</a>:       <span class="keywordflow">for</span> (s = <span class="stringliteral">&quot;@red&quot;</span>; (<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = *s++); );
<a name="l02727"></a>02727                         <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>--;
<a name="l02728"></a>02728                         <span class="keywordflow">break</span>;
<a name="l02729"></a>02729         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#acfbc006ea433ad708fdee3e82996e721">GREEN</a>:     <span class="keywordflow">for</span> (s = <span class="stringliteral">&quot;@green&quot;</span>; (<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = *s++); );
<a name="l02730"></a>02730                         <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>--;
<a name="l02731"></a>02731                         <span class="keywordflow">break</span>;
<a name="l02732"></a>02732         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#abf681265909adf3d3e8116c93c0ba179">YELLOW</a>:    <span class="keywordflow">for</span> (s = <span class="stringliteral">&quot;@yellow&quot;</span>; (<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = *s++); );
<a name="l02733"></a>02733                         <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>--;
<a name="l02734"></a>02734                         <span class="keywordflow">break</span>;
<a name="l02735"></a>02735         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a79d10e672abb49ad63eeaa8aaef57c38">BLUE</a>:      <span class="keywordflow">for</span> (s = <span class="stringliteral">&quot;@blue&quot;</span>; (<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = *s++); );
<a name="l02736"></a>02736                         <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>--;
<a name="l02737"></a>02737                         <span class="keywordflow">break</span>;
<a name="l02738"></a>02738         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a6f699060902f800f12aaae150f3a708e">MAGENTA</a>:   <span class="keywordflow">for</span> (s = <span class="stringliteral">&quot;@magenta&quot;</span>; (<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = *s++); );
<a name="l02739"></a>02739                         <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>--;
<a name="l02740"></a>02740                         <span class="keywordflow">break</span>;
<a name="l02741"></a>02741         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#ad243f93c16bc4c1d3e0a13b84421d760">CYAN</a>:      <span class="keywordflow">for</span> (s = <span class="stringliteral">&quot;@cyan&quot;</span>; (<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = *s++); );
<a name="l02742"></a>02742                         <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>--;
<a name="l02743"></a>02743                         <span class="keywordflow">break</span>;
<a name="l02744"></a>02744         <span class="keywordflow">case</span> <a class="code" href="sc_8h.html#a87b537f5fa5c109d3c05c13d6b18f382">WHITE</a>:     <span class="keywordflow">for</span> (s = <span class="stringliteral">&quot;@white&quot;</span>; (<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = *s++); );
<a name="l02745"></a>02745                         <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>--;
<a name="l02746"></a>02746                         <span class="keywordflow">break</span>;
<a name="l02747"></a>02747         <span class="keywordflow">default</span>:        <a class="code" href="interp_8c.html#a5d8205f1f72eaf6b54fde4cb193f741c">decompile</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left, mypriority);
<a name="l02748"></a>02748                         <a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = e-&gt;<a class="code" href="structenode.html#ad42923b4d6202c87cc11cf8734d4a632">op</a>;
<a name="l02749"></a>02749                         <a class="code" href="interp_8c.html#a5d8205f1f72eaf6b54fde4cb193f741c">decompile</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right, mypriority+1);
<a name="l02750"></a>02750                         <span class="keywordflow">break</span>;
<a name="l02751"></a>02751         }
<a name="l02752"></a>02752         <span class="keywordflow">if</span> (mypriority&lt;priority) <a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = <span class="charliteral">&#39;)&#39;</span>;
<a name="l02753"></a>02753     } <span class="keywordflow">else</span> <a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = <span class="charliteral">&#39;?&#39;</span>;
<a name="l02754"></a>02754 }
<a name="l02755"></a>02755 
<a name="l02756"></a>02756 <span class="keywordtype">void</span>
<a name="l02757"></a><a class="code" href="interp_8c.html#a55eb98d039d128372f7339b0c024b7d8">02757</a> <a class="code" href="interp_8c.html#a55eb98d039d128372f7339b0c024b7d8">index_arg</a>(<span class="keywordtype">char</span> *s, <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *e)
<a name="l02758"></a>02758 {
<a name="l02759"></a>02759     <span class="keywordflow">if</span> (e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right &amp;&amp; e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right-&gt;op == <span class="charliteral">&#39;,&#39;</span>) {
<a name="l02760"></a>02760         <a class="code" href="interp_8c.html#a500313724a891a50e7fa127e69e48efc">two_arg_index</a>(s, e);
<a name="l02761"></a>02761         <span class="keywordflow">return</span>;
<a name="l02762"></a>02762     }
<a name="l02763"></a>02763     <span class="keywordflow">for</span> (; (<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = *s++); );
<a name="l02764"></a>02764     <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>--;
<a name="l02765"></a>02765     <a class="code" href="interp_8c.html#acf925506b3dc0f276cc55161b0cb82a7">range_arg</a>(<span class="stringliteral">&quot;(&quot;</span>, e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left);
<a name="l02766"></a>02766     <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>--;
<a name="l02767"></a>02767     <span class="keywordflow">if</span> (e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right) {
<a name="l02768"></a>02768         <a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = <span class="charliteral">&#39;,&#39;</span>;
<a name="l02769"></a>02769         <a class="code" href="interp_8c.html#a5d8205f1f72eaf6b54fde4cb193f741c">decompile</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right, 0);
<a name="l02770"></a>02770     }
<a name="l02771"></a>02771     <a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = <span class="charliteral">&#39;)&#39;</span>;
<a name="l02772"></a>02772 }
<a name="l02773"></a>02773 
<a name="l02774"></a>02774 <span class="keywordtype">void</span>
<a name="l02775"></a><a class="code" href="interp_8c.html#a500313724a891a50e7fa127e69e48efc">02775</a> <a class="code" href="interp_8c.html#a500313724a891a50e7fa127e69e48efc">two_arg_index</a>(<span class="keywordtype">char</span> *s, <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *e)
<a name="l02776"></a>02776 {
<a name="l02777"></a>02777     <span class="keywordflow">for</span> (; (<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = *s++); );
<a name="l02778"></a>02778     <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>--;
<a name="l02779"></a>02779     <a class="code" href="interp_8c.html#acf925506b3dc0f276cc55161b0cb82a7">range_arg</a>(<span class="stringliteral">&quot;(&quot;</span>, e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left);
<a name="l02780"></a>02780     <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>--;
<a name="l02781"></a>02781     <a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = <span class="charliteral">&#39;,&#39;</span>;
<a name="l02782"></a>02782     <a class="code" href="interp_8c.html#a5d8205f1f72eaf6b54fde4cb193f741c">decompile</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right-&gt;e.o.left, 0);
<a name="l02783"></a>02783     <a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = <span class="charliteral">&#39;,&#39;</span>;
<a name="l02784"></a>02784     <a class="code" href="interp_8c.html#a5d8205f1f72eaf6b54fde4cb193f741c">decompile</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right-&gt;e.o.right, 0);
<a name="l02785"></a>02785     <a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = <span class="charliteral">&#39;)&#39;</span>;
<a name="l02786"></a>02786 }
<a name="l02787"></a>02787 
<a name="l02788"></a>02788 <span class="keywordtype">void</span>
<a name="l02789"></a><a class="code" href="interp_8c.html#a5f57fdc1c231ab547ac922e57c387a92">02789</a> <a class="code" href="interp_8c.html#a5f57fdc1c231ab547ac922e57c387a92">list_arg</a>(<span class="keywordtype">char</span> *s, <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *e)
<a name="l02790"></a>02790 {
<a name="l02791"></a>02791     <span class="keywordflow">for</span> (; (<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = *s++); );
<a name="l02792"></a>02792     <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>--;
<a name="l02793"></a>02793 
<a name="l02794"></a>02794     <a class="code" href="interp_8c.html#a5d8205f1f72eaf6b54fde4cb193f741c">decompile</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right, 0);
<a name="l02795"></a>02795     <a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = <span class="charliteral">&#39;,&#39;</span>;
<a name="l02796"></a>02796     <a class="code" href="interp_8c.html#aac773d88b919f8d1fe7648672cdb76fa">decompile_list</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left);
<a name="l02797"></a>02797     <a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a> - 1] = <span class="charliteral">&#39;)&#39;</span>;
<a name="l02798"></a>02798 }
<a name="l02799"></a>02799 
<a name="l02800"></a>02800 <span class="keywordtype">void</span>
<a name="l02801"></a><a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">02801</a> <a class="code" href="interp_8c.html#a95365a7bcff881f7b645ea4003635b65">one_arg</a>(<span class="keywordtype">char</span> *s, <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *e)
<a name="l02802"></a>02802 {
<a name="l02803"></a>02803     <span class="keywordflow">for</span> (; (<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = *s++); );
<a name="l02804"></a>02804     <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>--;
<a name="l02805"></a>02805     <a class="code" href="interp_8c.html#a5d8205f1f72eaf6b54fde4cb193f741c">decompile</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left, 0);
<a name="l02806"></a>02806     <a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = <span class="charliteral">&#39;)&#39;</span>;
<a name="l02807"></a>02807 }
<a name="l02808"></a>02808 
<a name="l02809"></a>02809 <span class="keywordtype">void</span>
<a name="l02810"></a><a class="code" href="interp_8c.html#adf9f3e1f811a4f9a338defe68d9ce232">02810</a> <a class="code" href="interp_8c.html#adf9f3e1f811a4f9a338defe68d9ce232">two_arg</a>(<span class="keywordtype">char</span> *s, <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *e)
<a name="l02811"></a>02811 {
<a name="l02812"></a>02812     <span class="keywordflow">for</span> (; (<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = *s++); );
<a name="l02813"></a>02813     <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>--;
<a name="l02814"></a>02814     <a class="code" href="interp_8c.html#a5d8205f1f72eaf6b54fde4cb193f741c">decompile</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left, 0);
<a name="l02815"></a>02815     <a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = <span class="charliteral">&#39;,&#39;</span>;
<a name="l02816"></a>02816     <a class="code" href="interp_8c.html#a5d8205f1f72eaf6b54fde4cb193f741c">decompile</a> (e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right, 0);
<a name="l02817"></a>02817     <a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = <span class="charliteral">&#39;)&#39;</span>;
<a name="l02818"></a>02818 }
<a name="l02819"></a>02819 
<a name="l02820"></a>02820 <span class="keywordtype">void</span>
<a name="l02821"></a><a class="code" href="interp_8c.html#a194e7a2d14c4cab05673a019d73f2403">02821</a> <a class="code" href="interp_8c.html#a194e7a2d14c4cab05673a019d73f2403">three_arg</a>(<span class="keywordtype">char</span> *s, <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *e)
<a name="l02822"></a>02822 {
<a name="l02823"></a>02823     <span class="keywordflow">for</span> (; (<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = *s++); );
<a name="l02824"></a>02824     <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>--;
<a name="l02825"></a>02825     <a class="code" href="interp_8c.html#a5d8205f1f72eaf6b54fde4cb193f741c">decompile</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.left, 0);
<a name="l02826"></a>02826     <a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = <span class="charliteral">&#39;,&#39;</span>;
<a name="l02827"></a>02827     <a class="code" href="interp_8c.html#a5d8205f1f72eaf6b54fde4cb193f741c">decompile</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right-&gt;e.o.left, 0);
<a name="l02828"></a>02828     <a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = <span class="charliteral">&#39;,&#39;</span>;
<a name="l02829"></a>02829     <a class="code" href="interp_8c.html#a5d8205f1f72eaf6b54fde4cb193f741c">decompile</a> (e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#ab0add5ec2075045173955916766cdef6">o</a>.right-&gt;e.o.right, 0);
<a name="l02830"></a>02830     <a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = <span class="charliteral">&#39;)&#39;</span>;
<a name="l02831"></a>02831 }
<a name="l02832"></a>02832 
<a name="l02833"></a>02833 <span class="keywordtype">void</span>
<a name="l02834"></a><a class="code" href="interp_8c.html#acf925506b3dc0f276cc55161b0cb82a7">02834</a> <a class="code" href="interp_8c.html#acf925506b3dc0f276cc55161b0cb82a7">range_arg</a>(<span class="keywordtype">char</span> *s, <span class="keyword">struct</span> <a class="code" href="structenode.html">enode</a> *e)
<a name="l02835"></a>02835 {
<a name="l02836"></a>02836     <span class="keyword">struct </span><a class="code" href="structrange.html">range</a> *r;
<a name="l02837"></a>02837 
<a name="l02838"></a>02838     <span class="keywordflow">for</span> (; (<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = *s++); );
<a name="l02839"></a>02839     <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>--;
<a name="l02840"></a>02840     <span class="keywordflow">if</span> (!<a class="code" href="range_8c.html#aa24fcfcb32be616924ccd4e7e3119c5b">find_range</a>((<span class="keywordtype">char</span> *)0, 0, e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#a665ccff1d13c8ee142d2278af000dfc9">r</a>.left.vp,
<a name="l02841"></a>02841             e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#a665ccff1d13c8ee142d2278af000dfc9">r</a>.<a class="code" href="structrange__s.html#a86bf9abc26c383ebf69070b07a9d3375">right</a>.<a class="code" href="structent__ptr.html#abdf28c3ec0c48cd52cafbcd2825ae50b">vp</a>, &amp;r) &amp;&amp; r-&gt;<a class="code" href="structrange.html#a2766ae588a42597710b039beb249be54">r_is_range</a>) {
<a name="l02842"></a>02842         (void) sprintf(<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>+<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>, <span class="stringliteral">&quot;%s&quot;</span>, r-&gt;<a class="code" href="structrange.html#a009621f2d6538f49f67c447e73395958">r_name</a>);
<a name="l02843"></a>02843         <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a> += strlen(<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>+<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>);
<a name="l02844"></a>02844     } <span class="keywordflow">else</span> {
<a name="l02845"></a>02845         <a class="code" href="interp_8c.html#a2e0b4e50f1a63bbd138d8bb97e1304c6">decodev</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#a665ccff1d13c8ee142d2278af000dfc9">r</a>.left);
<a name="l02846"></a>02846         <a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = <span class="charliteral">&#39;:&#39;</span>;
<a name="l02847"></a>02847         <a class="code" href="interp_8c.html#a2e0b4e50f1a63bbd138d8bb97e1304c6">decodev</a>(e-&gt;<a class="code" href="structenode.html#a5a7fff57e5b92098c0a69788e1f4baa6">e</a>.<a class="code" href="structenode.html#a665ccff1d13c8ee142d2278af000dfc9">r</a>.<a class="code" href="structrange__s.html#a86bf9abc26c383ebf69070b07a9d3375">right</a>);
<a name="l02848"></a>02848     }
<a name="l02849"></a>02849     <a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>++] = <span class="charliteral">&#39;)&#39;</span>;
<a name="l02850"></a>02850 }
<a name="l02851"></a>02851 
<a name="l02852"></a>02852 <span class="keywordtype">void</span>
<a name="l02853"></a><a class="code" href="sc_8h.html#a3414669a9f3cc3c99863a5265bc8238a">02853</a> <a class="code" href="interp_8c.html#a3414669a9f3cc3c99863a5265bc8238a">editfmt</a>(<span class="keywordtype">int</span> <a class="code" href="help_8c.html#a3a974d15c9cde2c3be4c2ad715920fc1">row</a>, <span class="keywordtype">int</span> col)
<a name="l02854"></a>02854 {
<a name="l02855"></a>02855     <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *p;
<a name="l02856"></a>02856 
<a name="l02857"></a>02857     p = <a class="code" href="sc_8c.html#a119a206e8bc414b4c30942f4ff8b2b6c">lookat</a>(row, col);
<a name="l02858"></a>02858     <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structent.html#a55aaf4789a715142f6a458d9584debd5">format</a>) {
<a name="l02859"></a>02859         (void) sprintf(<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>, <span class="stringliteral">&quot;fmt %s \&quot;%s\&quot;&quot;</span>, <a class="code" href="range_8c.html#a9248e2ed2edf876ebd286ab6262e80f3">v_name</a>(row, col), p-&gt;<a class="code" href="structent.html#a55aaf4789a715142f6a458d9584debd5">format</a>);
<a name="l02860"></a>02860         <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a> = strlen(<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>);
<a name="l02861"></a>02861     }
<a name="l02862"></a>02862 }
<a name="l02863"></a>02863 
<a name="l02864"></a>02864 <span class="keywordtype">void</span>
<a name="l02865"></a><a class="code" href="sc_8h.html#a1fff3a7dd859cf0efdf90e03375ba5db">02865</a> <a class="code" href="interp_8c.html#a1fff3a7dd859cf0efdf90e03375ba5db">editv</a>(<span class="keywordtype">int</span> <a class="code" href="help_8c.html#a3a974d15c9cde2c3be4c2ad715920fc1">row</a>, <span class="keywordtype">int</span> <a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>)
<a name="l02866"></a>02866 {
<a name="l02867"></a>02867     <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *p;
<a name="l02868"></a>02868 
<a name="l02869"></a>02869     p = <a class="code" href="sc_8c.html#a119a206e8bc414b4c30942f4ff8b2b6c">lookat</a>(row, col);
<a name="l02870"></a>02870     (void) sprintf(<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>, <span class="stringliteral">&quot;let %s = &quot;</span>, <a class="code" href="range_8c.html#a9248e2ed2edf876ebd286ab6262e80f3">v_name</a>(row, col));
<a name="l02871"></a>02871     <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a> = strlen(<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>);
<a name="l02872"></a>02872     <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> &amp; <a class="code" href="sc_8h.html#a242aaa897b3487fbbae12bf4b297ad1b">is_valid</a>) {
<a name="l02873"></a>02873         <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> &amp; <a class="code" href="sc_8h.html#a13693a07927c228618ada130ce373acd">is_strexpr</a> || p-&gt;<a class="code" href="structent.html#a6689c3abcaf3ef54fa0318a5be81b85d">expr</a> == NULL) {
<a name="l02874"></a>02874             (void) sprintf(<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>+<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>, <span class="stringliteral">&quot;%.15g&quot;</span>, p-&gt;<a class="code" href="structent.html#a966d6e9b9b9e86b16a9ab2d402141bbf">v</a>);
<a name="l02875"></a>02875             <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a> = strlen(<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>);
<a name="l02876"></a>02876         } <span class="keywordflow">else</span>
<a name="l02877"></a>02877             <a class="code" href="interp_8c.html#a40adc84595d2ea2c40108c8812d6c1b2">editexp</a>(row, col);
<a name="l02878"></a>02878     }
<a name="l02879"></a>02879 }
<a name="l02880"></a>02880 
<a name="l02881"></a>02881 <span class="keywordtype">void</span>
<a name="l02882"></a><a class="code" href="sc_8h.html#a40adc84595d2ea2c40108c8812d6c1b2">02882</a> <a class="code" href="interp_8c.html#a40adc84595d2ea2c40108c8812d6c1b2">editexp</a>(<span class="keywordtype">int</span> <a class="code" href="help_8c.html#a3a974d15c9cde2c3be4c2ad715920fc1">row</a>, <span class="keywordtype">int</span> <a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>)
<a name="l02883"></a>02883 {
<a name="l02884"></a>02884     <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *p;
<a name="l02885"></a>02885 
<a name="l02886"></a>02886     p = <a class="code" href="sc_8c.html#a119a206e8bc414b4c30942f4ff8b2b6c">lookat</a>(row, col);
<a name="l02887"></a>02887     <a class="code" href="interp_8c.html#a5d8205f1f72eaf6b54fde4cb193f741c">decompile</a>(p-&gt;<a class="code" href="structent.html#a6689c3abcaf3ef54fa0318a5be81b85d">expr</a>, 0);
<a name="l02888"></a>02888     <a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>[<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l02889"></a>02889 }
<a name="l02890"></a>02890 
<a name="l02891"></a>02891 <span class="keywordtype">void</span>
<a name="l02892"></a><a class="code" href="sc_8h.html#a4af176d0587a35643edf96982dc1a42c">02892</a> <a class="code" href="interp_8c.html#a4af176d0587a35643edf96982dc1a42c">edits</a>(<span class="keywordtype">int</span> <a class="code" href="help_8c.html#a3a974d15c9cde2c3be4c2ad715920fc1">row</a>, <span class="keywordtype">int</span> <a class="code" href="structent.html#aa12329619bef1d4eace09d4c52834e1e">col</a>)
<a name="l02893"></a>02893 {
<a name="l02894"></a>02894     <span class="keyword">register</span> <span class="keyword">struct </span><a class="code" href="structent.html">ent</a> *p;
<a name="l02895"></a>02895 
<a name="l02896"></a>02896     p = <a class="code" href="sc_8c.html#a119a206e8bc414b4c30942f4ff8b2b6c">lookat</a>(row, col);
<a name="l02897"></a>02897     <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> &amp; <a class="code" href="sc_8h.html#ac2f47f73034c55998aa842f5d6939da9">is_label</a>)
<a name="l02898"></a>02898         (void) sprintf(<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>, <span class="stringliteral">&quot;label %s = &quot;</span>, <a class="code" href="range_8c.html#a9248e2ed2edf876ebd286ab6262e80f3">v_name</a>(row, col));
<a name="l02899"></a>02899     <span class="keywordflow">else</span>
<a name="l02900"></a>02900         (<span class="keywordtype">void</span>) sprintf(<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>, <span class="stringliteral">&quot;%sstring %s = &quot;</span>,
<a name="l02901"></a>02901                 ((p-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> &amp; <a class="code" href="sc_8h.html#afc97b1d549dfa942f8b24bead5612ee1">is_leftflush</a>) ? <span class="stringliteral">&quot;left&quot;</span> : <span class="stringliteral">&quot;right&quot;</span>),
<a name="l02902"></a>02902                 <a class="code" href="range_8c.html#a9248e2ed2edf876ebd286ab6262e80f3">v_name</a>(row, col));
<a name="l02903"></a>02903     <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a> = strlen(<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>);
<a name="l02904"></a>02904     <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structent.html#a27f4f732024d66d2574a420e3abd3da7">flags</a> &amp; <a class="code" href="sc_8h.html#a13693a07927c228618ada130ce373acd">is_strexpr</a> &amp;&amp; p-&gt;<a class="code" href="structent.html#a6689c3abcaf3ef54fa0318a5be81b85d">expr</a>) {
<a name="l02905"></a>02905         <a class="code" href="interp_8c.html#a40adc84595d2ea2c40108c8812d6c1b2">editexp</a>(row, col);
<a name="l02906"></a>02906     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structent.html#a5346704737f8bf536f566804d95d9a02">label</a>) {
<a name="l02907"></a>02907         (void) sprintf(<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>+<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>, <span class="stringliteral">&quot;\&quot;%s\&quot;&quot;</span>, p-&gt;<a class="code" href="structent.html#a5346704737f8bf536f566804d95d9a02">label</a>);
<a name="l02908"></a>02908         <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a> += strlen(<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>+<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>);
<a name="l02909"></a>02909     } <span class="keywordflow">else</span> {
<a name="l02910"></a>02910         (void) sprintf(<a class="code" href="sc_8c.html#aedd4459726e0e93d4c75ac878edf94cd">line</a>+<a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a>, <span class="stringliteral">&quot;\&quot;&quot;</span>);
<a name="l02911"></a>02911         <a class="code" href="sc_8c.html#a92bcdeff0b83666dd12f751361538b18">linelim</a> += 1;
<a name="l02912"></a>02912     }
<a name="l02913"></a>02913 }
<a name="l02914"></a>02914 
<a name="l02915"></a>02915 <span class="preprocessor">#ifdef RINT</span>
<a name="l02916"></a>02916 <span class="preprocessor"></span><span class="comment">/*      round-to-even, also known as ``banker&#39;s rounding&#39;&#39;.</span>
<a name="l02917"></a>02917 <span class="comment">        With round-to-even, a number exactly halfway between two values is</span>
<a name="l02918"></a>02918 <span class="comment">        rounded to whichever is even; e.g. rnd(0.5)=0, rnd(1.5)=2,</span>
<a name="l02919"></a>02919 <span class="comment">        rnd(2.5)=2, rnd(3.5)=4.  This is the default rounding mode for</span>
<a name="l02920"></a>02920 <span class="comment">        IEEE floating point, for good reason: it has better numeric</span>
<a name="l02921"></a>02921 <span class="comment">        properties.  For example, if X+Y is an integer,</span>
<a name="l02922"></a>02922 <span class="comment">        then X+Y = rnd(X)+rnd(Y) with round-to-even,</span>
<a name="l02923"></a>02923 <span class="comment">        but not always with sc&#39;s rounding (which is</span>
<a name="l02924"></a>02924 <span class="comment">        round-to-positive-infinity).  I ran into this problem when trying to</span>
<a name="l02925"></a>02925 <span class="comment">        split interest in an account to two people fairly.</span>
<a name="l02926"></a>02926 <span class="comment">*/</span>
<a name="l02927"></a>02927 
<a name="l02928"></a>02928 <span class="keywordtype">double</span>
<a name="l02929"></a>02929 <a class="code" href="interp_8c.html#a1da8e5cf1e1a1d41c1a030f094c44a03">rint</a>(<span class="keywordtype">double</span> d)
<a name="l02930"></a>02930 {
<a name="l02931"></a>02931         <span class="comment">/* as sent */</span>
<a name="l02932"></a>02932         <span class="keywordtype">double</span> fl = floor(d),  fr = d-fl;
<a name="l02933"></a>02933         <span class="keywordflow">return</span>
<a name="l02934"></a>02934             fr&lt;0.5  ||  fr==0.5 &amp;&amp; fl==floor(fl/2)*2   ?   fl   :   ceil(d);
<a name="l02935"></a>02935 }
<a name="l02936"></a>02936 <span class="preprocessor">#endif</span>
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Wed Nov 27 2013 16:30:38 for My Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
